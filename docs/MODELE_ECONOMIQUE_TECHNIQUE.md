# üí∞ MOD√àLE √âCONOMIQUE & ARCHITECTURE TECHNIQUE ‚Äî IA POSTE MANAGER

**Version:** 1.0 Prod-Ready  
**Date:** 20 janvier 2026  
**Statut:** Pr√™t pour d√©ploiement

---

## üéØ VISION STRAT√âGIQUE

> **Tu ne vends PAS une IA.**  
> **Tu vends la r√©duction du risque, du temps et des erreurs humaines.**

Un avocat, un cabinet, une entreprise **paie pour ne pas se tromper**.

---

## üíé OFFRES COMMERCIALES (3 TIERS)

### üü¢ PLAN SOLO / ASSOCIATION

**Cible:** Avocat solo, petite association, structure ind√©pendante

**Pricing:**
- **49‚Ç¨ - 79‚Ç¨ / mois**
- Ou **490‚Ç¨ - 790‚Ç¨ / an** (-20%)

**Limites techniques:**
```typescript
{
  maxWorkspaces: 1,          // 1 seul workspace actif
  maxDossiers: 50,           // 50 dossiers / mois
  maxClients: 20,            // 20 clients actifs
  maxStorageGb: 5,           // 5 GB stockage
  maxUsers: 1,               // 1 utilisateur
  aiAutonomyLevel: 1,        // Niveau IA basique
  humanValidation: true,     // Validation humaine obligatoire
  advancedAnalytics: false,  // Pas d'analytics avanc√©s
  prioritySupport: false,    // Support standard
  customBranding: false,     // Pas de personnalisation
  apiAccess: false           // Pas d'API
}
```

**Justification commerciale:**
> "1 erreur √©vit√©e = bien plus que 79‚Ç¨. 1 d√©lai manqu√© = perte client."

**Co√ªt acquisition:** 0-50‚Ç¨ (marketing organique)  
**LTV (Lifetime Value):** ~950‚Ç¨ sur 12 mois  
**Churn estim√©:** 15-20% (avocat solo sensible prix)

---

### üîµ PLAN CABINET (SWEET SPOT)

**Cible:** Cabinet d'avocats 3-10 personnes, PME RH/immigration, cabinets sp√©cialis√©s CESEDA

**Pricing:**
- **249‚Ç¨ - 490‚Ç¨ / mois**
- Ou **2490‚Ç¨ - 4900‚Ç¨ / an** (-20%)

**Limites techniques:**
```typescript
{
  maxWorkspaces: 10,         // 10 workspaces actifs simultan√©s
  maxDossiers: 300,          // 300 dossiers / mois
  maxClients: 100,           // 100 clients actifs
  maxStorageGb: 50,          // 50 GB stockage
  maxUsers: 5,               // 5 utilisateurs (avocats + assistants)
  aiAutonomyLevel: 2,        // IA interm√©diaire
  humanValidation: true,     // Validation recommand√©e
  advancedAnalytics: true,   // Analytics inclus
  prioritySupport: true,     // Support prioritaire (email 24h)
  customBranding: false,     // Pas de white-label
  apiAccess: false           // Pas d'API
}
```

**Justification commerciale:**
> "1 collaborateur junior = 2000‚Ç¨/mois. IA Poste Manager = assistant infatigable pour 249‚Ç¨."

**Valeur compar√©e:**
- Assistant juridique junior: 24 000‚Ç¨/an
- IA Poste Manager Cabinet: 2 490‚Ç¨/an
- **ROI: 10x minimum**

**Co√ªt acquisition:** 200-500‚Ç¨ (marketing cibl√©, salons juridiques)  
**LTV:** ~6 000‚Ç¨ sur 24 mois  
**Churn estim√©:** 8-12% (forte d√©pendance une fois adopt√©)

**üéØ C'est ICI que tu gagnes de l'argent.**

---

### üî¥ PLAN ENTERPRISE / INSTITUTION

**Cible:** Collectivit√©s, grandes associations, cabinets nationaux, entreprises internationales

**Pricing:**
- **1 200‚Ç¨ - 3 000‚Ç¨ / mois**
- Ou **12 000‚Ç¨ - 30 000‚Ç¨ / an** (-20%)
- **Custom pricing** au-del√† (n√©gociation)

**Limites techniques:**
```typescript
{
  maxWorkspaces: -1,         // ILLIMIT√â (fair use)
  maxDossiers: -1,           // ILLIMIT√â (fair use)
  maxClients: -1,            // ILLIMIT√â
  maxStorageGb: 500,         // 500 GB (ou custom)
  maxUsers: 50,              // 50 utilisateurs (ou custom)
  aiAutonomyLevel: 4,        // IA avanc√©e maximale
  humanValidation: false,    // Validation optionnelle (configurable)
  advancedAnalytics: true,   // Analytics + BI personnalis√©
  externalAiAccess: true,    // Acc√®s API externe (GPT-4, Claude)
  prioritySupport: true,     // Support d√©di√© (SLA < 4h)
  customBranding: true,      // White-label complet
  apiAccess: true,           // API REST compl√®te
  sso: true,                 // SSO Azure AD / SAML
  onPremise: optional,       // D√©ploiement on-premise si souhait√©
  sla: "99.9%",              // Garantie disponibilit√©
  dataLocalization: "EU"     // H√©bergement garanti UE
}
```

**Justification commerciale:**
> "Co√ªt d'une erreur juridique = plusieurs centaines de milliers d'euros. S√©curit√© + Conformit√© = Premium justifi√©."

**Valeur compar√©e:**
- √âquipe contentieux 5 personnes: 200 000‚Ç¨/an
- Risque contentieux mal g√©r√©: 500 000‚Ç¨+ (amendes, dommages)
- IA Poste Manager Enterprise: 14 400‚Ç¨/an
- **ROI: 15-35x**

**Co√ªt acquisition:** 5 000-20 000‚Ç¨ (vente consultative longue, POC)  
**LTV:** ~60 000‚Ç¨ sur 36 mois  
**Churn estim√©:** 3-5% (contrats pluriannuels, switching cost √©lev√©)

**ü¶Ñ C'est ICI que tu construis la licorne.**

---

## üìä PROJECTIONS FINANCI√àRES R√âALISTES

### Sc√©nario Conservateur (Solo ‚Üí Scale-up)

**Ann√©e 1:**
```
10 clients Cabinet @ 300‚Ç¨/mois  = 3 000‚Ç¨/mois
2 clients Solo @ 60‚Ç¨/mois       = 120‚Ç¨/mois
---------------------------------------------
TOTAL MENSUEL                   = 3 120‚Ç¨/mois
MRR (Monthly Recurring Revenue) = 3 120‚Ç¨
ARR (Annual Recurring Revenue)  = 37 440‚Ç¨

Co√ªts fixes:
- H√©bergement (Cloudflare):     50‚Ç¨/mois
- Ollama/AI compute:            100‚Ç¨/mois
- Outils dev/ops:               200‚Ç¨/mois
- Marketing:                    500‚Ç¨/mois
---------------------------------------------
TOTAL CO√õTS                     = 850‚Ç¨/mois

MARGE BRUTE                     = 2 270‚Ç¨/mois (73%)
```

**Ann√©e 2:**
```
50 clients Cabinet @ 350‚Ç¨/mois  = 17 500‚Ç¨/mois
10 clients Solo @ 65‚Ç¨/mois      = 650‚Ç¨/mois
5 clients Enterprise @ 1500‚Ç¨/mois = 7 500‚Ç¨/mois
---------------------------------------------
TOTAL MENSUEL                   = 25 650‚Ç¨/mois
MRR                             = 25 650‚Ç¨
ARR                             = 307 800‚Ç¨

Co√ªts:
- Infrastructure:               500‚Ç¨/mois
- √âquipe (1 dev):               4 000‚Ç¨/mois
- Marketing/Sales:              2 000‚Ç¨/mois
- Support:                      1 000‚Ç¨/mois
---------------------------------------------
TOTAL CO√õTS                     = 7 500‚Ç¨/mois

MARGE BRUTE                     = 18 150‚Ç¨/mois (71%)
```

**Ann√©e 3:**
```
300 clients Cabinet @ 350‚Ç¨/mois = 105 000‚Ç¨/mois
30 clients Solo @ 70‚Ç¨/mois      = 2 100‚Ç¨/mois
50 clients Enterprise @ 2000‚Ç¨/mois = 100 000‚Ç¨/mois
---------------------------------------------
TOTAL MENSUEL                   = 207 100‚Ç¨/mois
MRR                             = 207 100‚Ç¨
ARR                             = 2 485 200‚Ç¨

Co√ªts:
- Infrastructure:               3 000‚Ç¨/mois
- √âquipe (8 personnes):         40 000‚Ç¨/mois
- Marketing/Sales:              20 000‚Ç¨/mois
- Support/Ops:                  10 000‚Ç¨/mois
---------------------------------------------
TOTAL CO√õTS                     = 73 000‚Ç¨/mois

MARGE BRUTE                     = 134 100‚Ç¨/mois (65%)
EBITDA annuel                   = ~1 600 000‚Ç¨
```

**Valorisation potentielle (ARR √ó 8-12):**
- ARR Year 3: 2 485 200‚Ç¨
- Valorisation basse (√ó8): **19 881 600‚Ç¨**
- Valorisation haute (√ó12): **29 822 400‚Ç¨**

**ü¶Ñ Objectif licorne (valorisation > 1 milliard ‚Ç¨) = ARR > 83M‚Ç¨**

---

## üóÑÔ∏è ARCHITECTURE TECHNIQUE (SCH√âMA PRISMA)

### 1Ô∏è‚É£ Mod√®le Plan

```prisma
model Plan {
  id          String  @id @default(uuid())
  name        String  @unique // SOLO, CABINET, ENTERPRISE
  displayName String  // "Plan Cabinet"
  description String?

  // Tarification
  priceMonthly Float   // 249
  priceYearly  Float   // 2490
  currency     String  @default("EUR")

  // Limites quotas
  maxWorkspaces Int @default(1)   // 1, 10, -1 (illimit√©)
  maxDossiers  Int @default(50)   // 50, 300, -1
  maxClients   Int @default(20)   // 20, 100, -1
  maxStorageGb Int @default(5)    // 5, 50, 500
  maxUsers     Int @default(1)    // 1, 5, 50

  // Capacit√©s IA
  aiAutonomyLevel   Int     @default(1) // 1-4
  humanValidation   Boolean @default(true)
  advancedAnalytics Boolean @default(false)
  externalAiAccess  Boolean @default(false)

  // Services premium
  prioritySupport Boolean @default(false)
  customBranding  Boolean @default(false)
  apiAccess       Boolean @default(false)

  isActive  Boolean  @default(true)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  // Relations
  tenants       Tenant[]
  subscriptions Subscription[]
}
```

**Valeurs seed (√† cr√©er):**

```typescript
const plans = [
  {
    name: "SOLO",
    displayName: "Plan Solo",
    description: "Pour avocats ind√©pendants et petites structures",
    priceMonthly: 49,
    priceYearly: 490,
    maxWorkspaces: 1,
    maxDossiers: 50,
    maxClients: 20,
    maxStorageGb: 5,
    maxUsers: 1,
    aiAutonomyLevel: 1,
    humanValidation: true,
    advancedAnalytics: false,
    prioritySupport: false,
    customBranding: false,
    apiAccess: false
  },
  {
    name: "CABINET",
    displayName: "Plan Cabinet",
    description: "Pour cabinets d'avocats et structures moyennes",
    priceMonthly: 349,
    priceYearly: 3490,
    maxWorkspaces: 10,
    maxDossiers: 300,
    maxClients: 100,
    maxStorageGb: 50,
    maxUsers: 5,
    aiAutonomyLevel: 2,
    humanValidation: true,
    advancedAnalytics: true,
    prioritySupport: true,
    customBranding: false,
    apiAccess: false
  },
  {
    name: "ENTERPRISE",
    displayName: "Plan Enterprise",
    description: "Pour grandes structures et institutions",
    priceMonthly: 1990,
    priceYearly: 19900,
    maxWorkspaces: -1, // illimit√©
    maxDossiers: -1,
    maxClients: -1,
    maxStorageGb: 500,
    maxUsers: 50,
    aiAutonomyLevel: 4,
    humanValidation: false,
    advancedAnalytics: true,
    externalAiAccess: true,
    prioritySupport: true,
    customBranding: true,
    apiAccess: true
  }
];
```

---

### 2Ô∏è‚É£ Mod√®le Subscription (Abonnements actifs)

```prisma
model Subscription {
  id       String @id @default(uuid())
  tenantId String @unique
  tenant   Tenant @relation(...)

  planId String
  plan   Plan   @relation(...)

  // Statut
  status String @default("active") 
  // active, past_due, canceled, trialing

  // Facturation
  billingCycle String @default("monthly") // monthly, yearly
  
  currentPeriodStart DateTime
  currentPeriodEnd   DateTime
  trialEnd           DateTime? // 14 jours gratuits
  canceledAt         DateTime?
  endedAt            DateTime?

  // Pricing
  pricePerMonth Float
  currency      String @default("EUR")
  autoRenew     Boolean @default(true)

  // M√©tadonn√©es externes (Stripe, etc.)
  metadata String? // JSON

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  invoices     Invoice[]
  usageRecords UsageRecord[]
}
```

**Workflow abonnement:**

1. Tenant cr√©√© ‚Üí Subscription cr√©√©e en status "trialing"
2. Trial 14 jours ‚Üí Notification J-3, J-1
3. Trial fin ‚Üí Status "active" si paiement OK, sinon "past_due"
4. Chaque mois ‚Üí Invoice g√©n√©r√©e automatiquement
5. Paiement √©chou√© ‚Üí Status "past_due" ‚Üí 7 jours grace period ‚Üí "canceled"
6. Upgrade/Downgrade ‚Üí Nouvelle subscription cr√©√©e, ancienne canceledAt

---

### 3Ô∏è‚É£ Mod√®le Invoice (Factures)

```prisma
model Invoice {
  id             String @id @default(uuid())
  subscriptionId String
  subscription   Subscription @relation(...)

  tenantId String
  tenant   Tenant @relation(...)

  // Num√©rotation
  invoiceNumber String @unique // INV-2026-001

  // Montants
  subtotal Float  // Montant HT
  tax      Float  @default(0) // TVA 20%
  total    Float  // Montant TTC

  currency String @default("EUR")

  // Statut
  status String @default("draft")
  // draft, open, paid, void, uncollectible

  // Dates
  issueDate DateTime @default(now())
  dueDate   DateTime // +30 jours
  paidAt    DateTime?
  voidedAt  DateTime?

  // D√©tails client
  billingEmail   String?
  billingAddress String?
  vatNumber      String?

  // Lignes de facturation (JSON)
  lineItems String
  // [{description: "Plan Cabinet", quantity: 1, unitPrice: 349, total: 349}]

  // Int√©gration externe
  metadata String? // {stripe_invoice_id: "inv_xxx", pdf_url: "..."}

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
```

**G√©n√©ration automatique:**

```typescript
// Chaque d√©but de mois (cron job)
async function generateMonthlyInvoices() {
  const activeSubscriptions = await prisma.subscription.findMany({
    where: { 
      status: "active",
      currentPeriodEnd: { lte: new Date() }
    },
    include: { tenant: true, plan: true }
  });

  for (const sub of activeSubscriptions) {
    const invoice = await prisma.invoice.create({
      data: {
        subscriptionId: sub.id,
        tenantId: sub.tenantId,
        invoiceNumber: generateInvoiceNumber(), // INV-2026-XXX
        subtotal: sub.pricePerMonth,
        tax: sub.pricePerMonth * 0.20, // TVA 20%
        total: sub.pricePerMonth * 1.20,
        status: "open",
        issueDate: new Date(),
        dueDate: addDays(new Date(), 30),
        billingEmail: sub.tenant.billingEmail,
        billingAddress: sub.tenant.billingAddress,
        vatNumber: sub.tenant.vatNumber,
        lineItems: JSON.stringify([{
          description: sub.plan.displayName,
          quantity: 1,
          unitPrice: sub.pricePerMonth,
          total: sub.pricePerMonth
        }])
      }
    });

    // Envoyer email facture
    await sendInvoiceEmail(invoice);
    
    // Renouveler p√©riode
    await prisma.subscription.update({
      where: { id: sub.id },
      data: {
        currentPeriodStart: sub.currentPeriodEnd,
        currentPeriodEnd: addMonths(sub.currentPeriodEnd, 1)
      }
    });
  }
}
```

---

### 4Ô∏è‚É£ Mod√®le UsageRecord (Tracking usage)

```prisma
model UsageRecord {
  id             String @id @default(uuid())
  subscriptionId String
  subscription   Subscription @relation(...)

  tenantId String
  tenant   Tenant @relation(...)

  resourceType String 
  // workspace, dossier, client, storage_gb, ai_call

  quantity Float // Quantit√© consomm√©e

  periodStart DateTime
  periodEnd   DateTime

  metadata String? // JSON: {workspace_id: "...", ai_model: "..."}

  recordedAt DateTime @default(now())
}
```

**Exemple d'utilisation:**

```typescript
// Quand un workspace est cr√©√©
await prisma.usageRecord.create({
  data: {
    subscriptionId: tenant.subscription.id,
    tenantId: tenant.id,
    resourceType: "workspace",
    quantity: 1,
    periodStart: startOfMonth(new Date()),
    periodEnd: endOfMonth(new Date()),
    metadata: JSON.stringify({ workspace_id: workspace.id })
  }
});

// V√©rification quota
const currentUsage = await prisma.usageRecord.count({
  where: {
    tenantId: tenant.id,
    resourceType: "workspace",
    periodStart: { gte: startOfMonth(new Date()) }
  }
});

if (currentUsage >= tenant.plan.maxWorkspaces && tenant.plan.maxWorkspaces !== -1) {
  throw new Error("Quota workspaces d√©pass√©. Upgrade requis.");
}
```

---

### 5Ô∏è‚É£ Mod√®le TenantUsageMetrics (M√©triques agr√©g√©es)

```prisma
model TenantUsageMetrics {
  id       String @id @default(uuid())
  tenantId String
  tenant   Tenant @relation(...)

  period      String @unique // "2026-01"
  periodStart DateTime
  periodEnd   DateTime

  // Volumes
  workspacesCreated    Int @default(0)
  workspacesClosed     Int @default(0)
  workspacesActiveEOM  Int @default(0) // End of month
  dossiersCreated      Int @default(0)
  clientsCreated       Int @default(0)
  usersActive          Int @default(0)
  storageUsedGb        Float @default(0)

  // IA Usage
  aiCallsTotal          Int @default(0)
  aiCallsFactExtraction Int @default(0)
  aiCallsContextId      Int @default(0)
  aiCallsRiskEval       Int @default(0)
  aiCallsActionProposal Int @default(0)

  // Performance
  avgWorkspaceCompletionTime Float? // Heures moyennes READY_FOR_HUMAN
  uncertaintyReductionAvg    Float? // R√©duction incertitude moyenne

  // Quotas
  quotaWarnings Int @default(0) // Nombre fois proche limite
  quotaExceeded Int @default(0) // Nombre fois d√©pass√©

  // Co√ªts IA
  aiCostEur Float @default(0)

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
```

**Dashboard usage (pour tenant):**

```typescript
const metrics = await prisma.tenantUsageMetrics.findUnique({
  where: { 
    tenantId_period: { 
      tenantId: tenant.id, 
      period: "2026-01" 
    } 
  }
});

// Afficher:
// - Workspaces: 8 / 10 (80% utilis√©)
// - Dossiers: 245 / 300 (82%)
// - Clients: 67 / 100 (67%)
// - Appels IA: 1250 (co√ªt: 12.50‚Ç¨)
```

---

### 6Ô∏è‚É£ Mod√®le QuotaEvent (Alertes quotas)

```prisma
model QuotaEvent {
  id       String @id @default(uuid())
  tenantId String
  tenant   Tenant @relation(...)

  quotaType String // workspaces, dossiers, clients, storage, users

  currentValue Int
  limitValue   Int
  percentage   Float // % utilisation

  eventType String 
  // warning (>80%), exceeded (>100%), critical (>120%)

  actionTaken String?
  // notification_sent, upgrade_suggested, feature_blocked

  metadata String? // JSON

  occurredAt DateTime @default(now())
}
```

**Automatisation:**

```typescript
async function checkQuotas(tenantId: string) {
  const tenant = await prisma.tenant.findUnique({
    where: { id: tenantId },
    include: { plan: true }
  });

  const quotas = [
    { type: "workspaces", current: tenant.currentWorkspaces, limit: tenant.plan.maxWorkspaces },
    { type: "dossiers", current: tenant.currentDossiers, limit: tenant.plan.maxDossiers },
    // ...
  ];

  for (const quota of quotas) {
    if (quota.limit === -1) continue; // Illimit√©

    const percentage = (quota.current / quota.limit) * 100;

    if (percentage >= 80 && percentage < 100) {
      await prisma.quotaEvent.create({
        data: {
          tenantId,
          quotaType: quota.type,
          currentValue: quota.current,
          limitValue: quota.limit,
          percentage,
          eventType: "warning",
          actionTaken: "notification_sent"
        }
      });
      await sendQuotaWarningEmail(tenant, quota);
    }

    if (percentage >= 100) {
      await prisma.quotaEvent.create({
        data: {
          tenantId,
          quotaType: quota.type,
          currentValue: quota.current,
          limitValue: quota.limit,
          percentage,
          eventType: "exceeded",
          actionTaken: "upgrade_suggested"
        }
      });
      await sendUpgradeOfferEmail(tenant, quota);
    }
  }
}
```

---

### 7Ô∏è‚É£ Mod√®le AuditLogEntry (RGPD + Zero-Trust)

```prisma
model AuditLogEntry {
  id String @id @default(uuid())

  tenantId String?
  tenant   Tenant? @relation(...)

  userId   String?
  userRole String?

  action     String // CREATE, READ, UPDATE, DELETE, LOGIN, etc.
  objectType String // WorkspaceReasoning, Document, Plan, etc.
  objectId   String?

  metadata  String? // JSON: d√©tails action
  ipAddress String?
  userAgent String?

  success      Boolean @default(true)
  errorMessage String?

  hash String // SHA-256 pour int√©grit√©

  containsPersonalData Boolean @default(false)
  dataCategories       String? // JSON: ["nom", "email"]

  occurredAt DateTime @default(now())
}
```

**Immutabilit√© garantie:**

```typescript
// AUCUN UPDATE/DELETE autoris√© sur AuditLogEntry
// Append-only table

async function logAction(data: AuditLogData) {
  const entry = {
    ...data,
    occurredAt: new Date(),
    hash: calculateSHA256(JSON.stringify(data))
  };

  await prisma.auditLogEntry.create({ data: entry });
  
  // RGPD: si donn√©es personnelles, enregistrer
  if (entry.containsPersonalData) {
    await logPersonalDataAccess(entry);
  }
}
```

---

## üîê CONFORMIT√â RGPD

### ConsentRecord (Consentements clients)

```prisma
model ConsentRecord {
  id       String @id @default(uuid())
  tenantId String
  tenant   Tenant @relation(...)

  clientId String
  client   Client @relation(...)

  consentType String 
  // data_processing, marketing, analytics, ai_analysis

  granted   Boolean
  grantedAt DateTime?
  revokedAt DateTime?

  policyVersion String // V1.0, V2.0

  metadata String? // JSON: source, ip, user_agent

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
```

### DataSubjectRequest (Droits RGPD)

```prisma
model DataSubjectRequest {
  id       String @id @default(uuid())
  tenantId String
  tenant   Tenant @relation(...)

  clientId String?
  client   Client? @relation(...)

  requestType String 
  // access, rectification, erasure, portability, restriction

  status String @default("pending")
  // pending, in_progress, completed, rejected

  requestDetails String
  response       String?

  submittedAt DateTime @default(now())
  dueDate     DateTime // submittedAt + 30 jours (RGPD)
  completedAt DateTime?

  assignedTo String?
  priority   String @default("normal")

  metadata String?

  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
```

**Workflow automatique:**

```typescript
// Client demande export donn√©es (droit RGPD)
const request = await prisma.dataSubjectRequest.create({
  data: {
    tenantId,
    clientId,
    requestType: "access",
    status: "pending",
    requestDetails: "Export complet donn√©es personnelles",
    submittedAt: new Date(),
    dueDate: addDays(new Date(), 30) // Obligation RGPD: r√©ponse < 30j
  }
});

// Auto-assign √† DPO ou admin
await assignToDataProtectionOfficer(request);

// Rappel automatique J-7, J-3, J-1
scheduleRGPDReminders(request);
```

---

## üöÄ NEXT STEPS TECHNIQUES

### 1. Migration Prisma

```bash
npx prisma migrate dev --name add_billing_system
npx prisma generate
```

### 2. Seed plans initiaux

```bash
npx tsx prisma/seed-plans.ts
```

### 3. Cr√©er services facturation

```typescript
// src/lib/billing/subscription-service.ts
// src/lib/billing/invoice-service.ts
// src/lib/billing/quota-service.ts
```

### 4. Cron jobs

```typescript
// G√©n√©ration factures mensuelles
schedule("0 0 1 * *", generateMonthlyInvoices);

// V√©rification quotas quotidienne
schedule("0 8 * * *", checkAllTenantsQuotas);

// Rappels RGPD
schedule("0 9 * * *", checkRGPDDeadlines);
```

### 5. Dashboard admin

```typescript
// src/app/admin/billing/page.tsx
// - MRR/ARR en temps r√©el
// - Churn rate
// - Upgrade funnel
// - Quota usage heatmap
```

---

## üí∞ SCALABILIT√â √âCONOMIQUE

### Co√ªts variables par tenant

**Plan Solo (49‚Ç¨/mois):**
- H√©bergement: ~0.50‚Ç¨/mois
- Compute IA (Ollama local): 0‚Ç¨
- Storage (5GB): ~0.10‚Ç¨/mois
- Support: ~1‚Ç¨/mois
- **Co√ªt total: ~1.60‚Ç¨ ‚Üí Marge: 97%**

**Plan Cabinet (349‚Ç¨/mois):**
- H√©bergement: ~2‚Ç¨/mois
- Compute IA: ~5‚Ç¨/mois
- Storage (50GB): ~1‚Ç¨/mois
- Support: ~10‚Ç¨/mois
- **Co√ªt total: ~18‚Ç¨ ‚Üí Marge: 95%**

**Plan Enterprise (1990‚Ç¨/mois):**
- H√©bergement d√©di√©: ~50‚Ç¨/mois
- Compute IA externe (GPT-4): ~100‚Ç¨/mois
- Storage (500GB): ~10‚Ç¨/mois
- Support d√©di√©: ~200‚Ç¨/mois
- **Co√ªt total: ~360‚Ç¨ ‚Üí Marge: 82%**

**Marges exceptionnelles = Business SaaS mod√®le.**

---

## üéØ M√âTRIQUES CL√âS √Ä TRACKER

```typescript
interface BusinessMetrics {
  // Revenus
  mrr: number;           // Monthly Recurring Revenue
  arr: number;           // Annual Recurring Revenue
  
  // Clients
  activeSubscriptions: number;
  churnRate: number;     // % clients perdus/mois
  
  // Acquisition
  cac: number;           // Customer Acquisition Cost
  ltv: number;           // Lifetime Value
  ltvCacRatio: number;   // Id√©al: > 3
  
  // Engagement
  avgWorkspacesPerTenant: number;
  avgDossiersPerMonth: number;
  aiUsageRate: number;   // % workspaces utilisant IA
  
  // Quotas
  avgQuotaUsage: number; // % moyen utilisation quotas
  upgradeRate: number;   // % conversions Solo ‚Üí Cabinet
  
  // Sant√©
  nps: number;           // Net Promoter Score
  supportTickets: number;
  avgResolutionTime: number; // heures
}
```

---

## ü¶Ñ VISION LICORNE (EXIT STRATEGY)

### Leviers de croissance

1. **Datasets anonymis√©s (RGPD-compliant)**
   - Statistiques proc√©dures CESEDA
   - Taux succ√®s par type recours
   - D√©lais moyens par juridiction
   - **Valeur:** Vente donn√©es agr√©g√©es institutions

2. **Marketplace partenaires**
   - Int√©grations L√©gifrance
   - Connecteurs juridictions (RPVA)
   - API cabinets expertise (m√©decins, traducteurs)
   - **Mod√®le:** Commission 10-20% sur transactions

3. **IA-as-a-Service**
   - API publique reasoning engine
   - White-label pour √©diteurs legaltech
   - **Pricing:** 0.01‚Ç¨ / workspace analys√©

4. **International**
   - UK Immigration Law
   - DE Aufenthaltsrecht
   - ES Derecho de extranjer√≠a
   - **Croissance:** √ó5 march√© adressable

5. **Vertical expansion**
   - Droit du travail
   - Droit de la famille
   - Droit p√©nal
   - **Objectif:** Plateforme universelle raisonnement juridique

### Valorisation cible

**ARR > 10M‚Ç¨ = Valorisation 80-120M‚Ç¨** (√ó8-12)  
**ARR > 50M‚Ç¨ = Valorisation 400-600M‚Ç¨**  
**ARR > 100M‚Ç¨ = Licorne (1Md‚Ç¨+)**

**Path to licorn:**
- Year 1-2: Product-Market Fit (PMF) en France CESEDA
- Year 3-4: Domination march√© FR + expansion UK/DE
- Year 5-6: Plateforme multi-juridictions + marketplace
- Year 7+: Acquisition par legal giant (LexisNexis, Thomson Reuters) ou IPO

---

**Ce document technique est d√©sormais LA R√âF√âRENCE pour tout d√©veloppement billing/quotas/m√©triques.**

Prochaine √©tape logique:
1. **Migration Prisma** avec nouveaux mod√®les
2. **Seed plans** (Solo/Cabinet/Enterprise)
3. **Services facturation** (TypeScript)
4. **Dashboard billing** (Next.js)

Ou passer √†:
4Ô∏è‚É£ **Argumentaire commercial s√©curit√©/conformit√©** (pour vendre aux cabinets)
