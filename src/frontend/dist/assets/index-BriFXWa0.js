import{j as e,C as t,a as s,L as r,P as n,b as a,B as i,A as o,p as l,c,d,i as u,e as m,f as h,g as p}from"./chart-vendor-C8XZxRnS.js";import{b as x,g as f,r as g,a as b,R as y,u as j,N as v,O as N,B as w,c as E,d as C,e as k}from"./react-vendor-CB5cfN93.js";import{r as S,u as T,i as _,a as O}from"./i18n-vendor-BY4DJZ__.js";import{m as A,F as R,A as D,a as I,S as P,b as L,c as F,E as M,P as B,M as U,T as z,U as q,d as V,e as $,K as J,C as H,f as K,g as W,h as G,L as X,i as Y,j as Q,k as Z,l as ee,n as te,o as se,D as re,p as ne,q as ae,Z as ie,r as oe,s as le,t as ce,B as de,X as ue,u as me,v as he,w as pe,R as xe,x as fe,y as ge,z as be,G as ye,H as je,I as ve,W as Ne,J as we,N as Ee,O as Ce,Q as ke,V as Se,Y as Te,_ as _e,$ as Oe,a0 as Ae,a1 as Re,a2 as De,a3 as Ie,a4 as Pe,a5 as Le,a6 as Fe,a7 as Me,a8 as Be,a9 as Ue,aa as ze,ab as qe,ac as Ve,ad as $e,ae as Je,af as He,ag as Ke}from"./ui-vendor-wpM9wc1i.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var We,Ge={};const Xe=f(function(){if(We)return Ge;We=1;var e=x();return Ge.createRoot=e.createRoot,Ge.hydrateRoot=e.hydrateRoot,Ge}());let Ye,Qe,Ze,et={data:""},tt=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,st=/\/\*[^]*?\*\/|  +/g,rt=/\n+/g,nt=(e,t)=>{let s="",r="",n="";for(let a in e){let i=e[a];"@"==a[0]?"i"==a[1]?s=a+" "+i+";":r+="f"==a[1]?nt(i,a):a+"{"+nt(i,"k"==a[1]?"":t)+"}":"object"==typeof i?r+=nt(i,t?t.replace(/([^,])+/g,e=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):a):null!=i&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),n+=nt.p?nt.p(a,i):a+":"+i+";")}return s+(t&&n?t+"{"+n+"}":n)+r},at={},it=e=>{if("object"==typeof e){let t="";for(let s in e)t+=s+it(e[s]);return t}return e};function ot(e){let t=this||{},s=e.call?e(t.p):e;return((e,t,s,r,n)=>{let a=it(e),i=at[a]||(at[a]=(e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"go"+s})(a));if(!at[i]){let t=a!==e?e:(e=>{let t,s,r=[{}];for(;t=tt.exec(e.replace(st,""));)t[4]?r.shift():t[3]?(s=t[3].replace(rt," ").trim(),r.unshift(r[0][s]=r[0][s]||{})):r[0][t[1]]=t[2].replace(rt," ").trim();return r[0]})(e);at[i]=nt(n?{["@keyframes "+i]:t}:t,s?"":"."+i)}let o=s&&at.g?at.g:null;return s&&(at.g=at[i]),l=at[i],c=t,d=r,(u=o)?c.data=c.data.replace(u,l):-1===c.data.indexOf(l)&&(c.data=d?l+c.data:c.data+l),i;var l,c,d,u})(s.unshift?s.raw?((e,t,s)=>e.reduce((e,r,n)=>{let a=t[n];if(a&&a.call){let e=a(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;a=t?"."+t:e&&"object"==typeof e?e.props?"":nt(e,""):!1===e?"":e}return e+r+(null==a?"":a)},""))(s,[].slice.call(arguments,1),t.p):s.reduce((e,s)=>Object.assign(e,s&&s.call?s(t.p):s),{}):s,(e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||et})(t.target),t.g,t.o,t.k)}ot.bind({g:1});let lt=ot.bind({k:1});function ct(e,t){let s=this||{};return function(){let t=arguments;return function r(n,a){let i=Object.assign({},n),o=i.className||r.className;s.p=Object.assign({theme:Qe&&Qe()},i),s.o=/ *go\d+/.test(o),i.className=ot.apply(s,t)+(o?" "+o:"");let l=e;return e[0]&&(l=i.as||e,delete i.as),Ze&&l[0]&&Ze(i),Ye(l,i)}}}var dt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,ut=(()=>{let e=0;return()=>(++e).toString()})(),mt=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),ht="default",pt=(e,t)=>{let{toastLimit:s}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,s)};case 1:return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case 2:let{toast:r}=t;return pt(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,dismissed:!0,visible:!1}:e)};case 4:return void 0===t.toastId?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(e=>({...e,pauseDuration:e.pauseDuration+a}))}}},xt=[],ft={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},gt={},bt=(e,t=ht)=>{gt[t]=pt(gt[t]||ft,e),xt.forEach(([e,s])=>{e===t&&s(gt[t])})},yt=e=>Object.keys(gt).forEach(t=>bt(e,t)),jt=(e=ht)=>t=>{bt(t,e)},vt={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Nt=e=>(t,s)=>{let r=((e,t="blank",s)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...s,id:(null==s?void 0:s.id)||ut()}))(t,e,s);return jt(r.toasterId||(e=>Object.keys(gt).find(t=>gt[t].toasts.some(t=>t.id===e)))(r.id))({type:2,toast:r}),r.id},wt=(e,t)=>Nt("blank")(e,t);wt.error=Nt("error"),wt.success=Nt("success"),wt.loading=Nt("loading"),wt.custom=Nt("custom"),wt.dismiss=(e,t)=>{let s={type:3,toastId:e};t?jt(t)(s):yt(s)},wt.dismissAll=e=>wt.dismiss(void 0,e),wt.remove=(e,t)=>{let s={type:4,toastId:e};t?jt(t)(s):yt(s)},wt.removeAll=e=>wt.remove(void 0,e),wt.promise=(e,t,s)=>{let r=wt.loading(t.loading,{...s,...null==s?void 0:s.loading});return"function"==typeof e&&(e=e()),e.then(e=>{let n=t.success?dt(t.success,e):void 0;return n?wt.success(n,{id:r,...s,...null==s?void 0:s.success}):wt.dismiss(r),e}).catch(e=>{let n=t.error?dt(t.error,e):void 0;n?wt.error(n,{id:r,...s,...null==s?void 0:s.error}):wt.dismiss(r)}),e};var Et,Ct,kt,St,Tt=(e,t="default")=>{let{toasts:s,pausedAt:r}=((e={},t=ht)=>{let[s,r]=g.useState(gt[t]||ft),n=g.useRef(gt[t]);g.useEffect(()=>(n.current!==gt[t]&&r(gt[t]),xt.push([t,r]),()=>{let e=xt.findIndex(([e])=>e===t);e>-1&&xt.splice(e,1)}),[t]);let a=s.toasts.map(t=>{var s,r,n;return{...e,...e[t.type],...t,removeDelay:t.removeDelay||(null==(s=e[t.type])?void 0:s.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||vt[t.type],style:{...e.style,...null==(n=e[t.type])?void 0:n.style,...t.style}}});return{...s,toasts:a}})(e,t),n=g.useRef(new Map).current,a=g.useCallback((e,t=1e3)=>{if(n.has(e))return;let s=setTimeout(()=>{n.delete(e),i({type:4,toastId:e})},t);n.set(e,s)},[]);g.useEffect(()=>{if(r)return;let e=Date.now(),n=s.map(s=>{if(s.duration===1/0)return;let r=(s.duration||0)+s.pauseDuration-(e-s.createdAt);if(!(r<0))return setTimeout(()=>wt.dismiss(s.id,t),r);s.visible&&wt.dismiss(s.id)});return()=>{n.forEach(e=>e&&clearTimeout(e))}},[s,r,t]);let i=g.useCallback(jt(t),[t]),o=g.useCallback(()=>{i({type:5,time:Date.now()})},[i]),l=g.useCallback((e,t)=>{i({type:1,toast:{id:e,height:t}})},[i]),c=g.useCallback(()=>{r&&i({type:6,time:Date.now()})},[r,i]),d=g.useCallback((e,t)=>{let{reverseOrder:r=!1,gutter:n=8,defaultPosition:a}=t||{},i=s.filter(t=>(t.position||a)===(e.position||a)&&t.height),o=i.findIndex(t=>t.id===e.id),l=i.filter((e,t)=>t<o&&e.visible).length;return i.filter(e=>e.visible).slice(...r?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+n,0)},[s]);return g.useEffect(()=>{s.forEach(e=>{if(e.dismissed)a(e.id,e.removeDelay);else{let t=n.get(e.id);t&&(clearTimeout(t),n.delete(e.id))}})},[s,a]),{toasts:s,handlers:{updateHeight:l,startPause:o,endPause:c,calculateOffset:d}}},_t=lt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Ot=lt`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,At=lt`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Rt=ct("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${_t} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Ot} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${At} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Dt=lt`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,It=ct("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Dt} 1s linear infinite;
`,Pt=lt`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Lt=lt`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Ft=ct("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Pt} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Lt} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Mt=ct("div")`
  position: absolute;
`,Bt=ct("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Ut=lt`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,zt=ct("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Ut} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,qt=({toast:e})=>{let{icon:t,type:s,iconTheme:r}=e;return void 0!==t?"string"==typeof t?g.createElement(zt,null,t):t:"blank"===s?null:g.createElement(Bt,null,g.createElement(It,{...r}),"loading"!==s&&g.createElement(Mt,null,"error"===s?g.createElement(Rt,{...r}):g.createElement(Ft,{...r})))},Vt=e=>`\n0% {transform: translate3d(0,${-200*e}%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n`,$t=e=>`\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,${-150*e}%,-1px) scale(.6); opacity:0;}\n`,Jt=ct("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,Ht=ct("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Kt=g.memo(({toast:e,position:t,style:s,children:r})=>{let n=e.height?((e,t)=>{let s=e.includes("top")?1:-1,[r,n]=mt()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Vt(s),$t(s)];return{animation:t?`${lt(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${lt(n)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}})(e.position||t||"top-center",e.visible):{opacity:0},a=g.createElement(qt,{toast:e}),i=g.createElement(Ht,{...e.ariaProps},dt(e.message,e));return g.createElement(Jt,{className:e.className,style:{...n,...s,...e.style}},"function"==typeof r?r({icon:a,message:i}):g.createElement(g.Fragment,null,a,i))});Et=g.createElement,nt.p=Ct,Ye=Et,Qe=kt,Ze=St;var Wt=({id:e,className:t,style:s,onHeightUpdate:r,children:n})=>{let a=g.useCallback(t=>{if(t){let s=()=>{let s=t.getBoundingClientRect().height;r(e,s)};s(),new MutationObserver(s).observe(t,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return g.createElement("div",{ref:a,className:t,style:s},n)},Gt=ot`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Xt=({reverseOrder:e,position:t="top-center",toastOptions:s,gutter:r,children:n,toasterId:a,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:c}=Tt(s,a);return g.createElement("div",{"data-rht-toaster":a||"",style:{position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(s=>{let a=s.position||t,i=((e,t)=>{let s=e.includes("top"),r=s?{top:0}:{bottom:0},n=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:mt()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(s?1:-1)}px)`,...r,...n}})(a,c.calculateOffset(s,{reverseOrder:e,gutter:r,defaultPosition:t}));return g.createElement(Wt,{id:s.id,key:s.id,onHeightUpdate:c.updateHeight,className:s.visible?Gt:"",style:i},"custom"===s.type?dt(s.message,s):n?n(s):g.createElement(Kt,{toast:s,position:a}))}))},Yt=wt;const Qt=e=>{let t;const s=new Set,r=(e,r)=>{const n="function"==typeof e?e(t):e;if(!Object.is(n,t)){const e=t;t=(null!=r?r:"object"!=typeof n||null===n)?n:Object.assign({},t,n),s.forEach(s=>s(t,e))}},n=()=>t,a={setState:r,getState:n,getInitialState:()=>i,subscribe:e=>(s.add(e),()=>s.delete(e)),destroy:()=>{s.clear()}},i=t=e(r,n,a);return a};var Zt,es,ts={exports:{}},ss={};const rs=f((es||(es=1,ts.exports=function(){if(Zt)return ss;Zt=1;var e=b(),t=S(),s="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=t.useSyncExternalStore,n=e.useRef,a=e.useEffect,i=e.useMemo,o=e.useDebugValue;return ss.useSyncExternalStoreWithSelector=function(e,t,l,c,d){var u=n(null);if(null===u.current){var m={hasValue:!1,value:null};u.current=m}else m=u.current;u=i(function(){function e(e){if(!a){if(a=!0,r=e,e=c(e),void 0!==d&&m.hasValue){var t=m.value;if(d(t,e))return n=t}return n=e}if(t=n,s(r,e))return t;var i=c(e);return void 0!==d&&d(t,i)?(r=e,t):(r=e,n=i)}var r,n,a=!1,i=void 0===l?null:l;return[function(){return e(t())},null===i?void 0:function(){return e(i())}]},[t,l,c,d]);var h=r(e,u[0],u[1]);return a(function(){m.hasValue=!0,m.value=h},[h]),o(h),h},ss}()),ts.exports)),ns={},{useDebugValue:as}=y,{useSyncExternalStoreWithSelector:is}=rs;let os=!1;const ls=e=>e;const cs=e=>{const t="function"==typeof e?(e=>e?Qt(e):Qt)(e):e,s=(e,s)=>function(e,t=ls,s){"production"!==(ns?"production":void 0)&&s&&!os&&(os=!0);const r=is(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,s);return as(r),r}(t,e,s);return Object.assign(s,t),s},ds=e=>e?cs(e):cs;function us(e,t){let s;try{s=e()}catch(r){return}return{getItem:e=>{var t;const r=e=>null===e?null:JSON.parse(e,void 0),n=null!=(t=s.getItem(e))?t:null;return n instanceof Promise?n.then(r):r(n)},setItem:(e,t)=>s.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>s.removeItem(e)}}const ms=e=>t=>{try{const s=e(t);return s instanceof Promise?s:{then:e=>ms(e)(s),catch(e){return this}}}catch(Et){return{then(e){return this},catch:t=>ms(t)(Et)}}},hs=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((e,t)=>(s,r,n)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1;const o=new Set,l=new Set;let c;try{c=a.getStorage()}catch(f){}if(!c)return e((...e)=>{s(...e)},r,n);const d=ms(a.serialize),u=()=>{const e=a.partialize({...r()});let t;const s=d({state:e,version:a.version}).then(e=>c.setItem(a.name,e)).catch(e=>{t=e});if(t)throw t;return s},m=n.setState;n.setState=(e,t)=>{m(e,t),u()};const h=e((...e)=>{s(...e),u()},r,n);let p;const x=()=>{var e;if(!c)return;i=!1,o.forEach(e=>e(r()));const t=(null==(e=a.onRehydrateStorage)?void 0:e.call(a,r()))||void 0;return ms(c.getItem.bind(c))(a.name).then(e=>{if(e)return a.deserialize(e)}).then(e=>{if(e){if("number"!=typeof e.version||e.version===a.version)return e.state;if(a.migrate)return a.migrate(e.state,e.version)}}).then(e=>{var t;return p=a.merge(e,null!=(t=r())?t:h),s(p,!0),u()}).then(()=>{null==t||t(p,void 0),i=!0,l.forEach(e=>e(p))}).catch(e=>{null==t||t(void 0,e)})};return n.persist={setOptions:e=>{a={...a,...e},e.getStorage&&(c=e.getStorage())},clearStorage:()=>{null==c||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>x(),hasHydrated:()=>i,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},x(),p||h})(e,t):((e,t)=>(s,r,n)=>{let a={storage:us(()=>localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...t},i=!1;const o=new Set,l=new Set;let c=a.storage;if(!c)return e((...e)=>{s(...e)},r,n);const d=()=>{const e=a.partialize({...r()});return c.setItem(a.name,{state:e,version:a.version})},u=n.setState;n.setState=(e,t)=>{u(e,t),d()};const m=e((...e)=>{s(...e),d()},r,n);let h;n.getInitialState=()=>m;const p=()=>{var e,t;if(!c)return;i=!1,o.forEach(e=>{var t;return e(null!=(t=r())?t:m)});const n=(null==(t=a.onRehydrateStorage)?void 0:t.call(a,null!=(e=r())?e:m))||void 0;return ms(c.getItem.bind(c))(a.name).then(e=>{if(e){if("number"!=typeof e.version||e.version===a.version)return[!1,e.state];if(a.migrate)return[!0,a.migrate(e.state,e.version)]}return[!1,void 0]}).then(e=>{var t;const[n,i]=e;if(h=a.merge(i,null!=(t=r())?t:m),s(h,!0),n)return d()}).then(()=>{null==n||n(h,void 0),h=r(),i=!0,l.forEach(e=>e(h))}).catch(e=>{null==n||n(void 0,e)})};return n.persist={setOptions:e=>{a={...a,...e},e.storage&&(c=e.storage)},clearStorage:()=>{null==c||c.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>p(),hasHydrated:()=>i,onHydrate:e=>(o.add(e),()=>{o.delete(e)}),onFinishHydration:e=>(l.add(e),()=>{l.delete(e)})},a.skipHydration||p(),h||m})(e,t),ps=ds(hs(e=>({isAuthenticated:!1,hasCredentials:!1,needsPassword:!1,setAuthenticated:t=>e({isAuthenticated:t}),setHasCredentials:t=>e({hasCredentials:t}),setNeedsPassword:t=>e({needsPassword:t}),logout:()=>e({isAuthenticated:!1,needsPassword:!1})}),{name:"auth-storage"}));ds(e=>({emails:[],loading:!1,error:null,setEmails:t=>e({emails:t}),setLoading:t=>e({loading:t}),setError:t=>e({error:t}),addEmail:t=>e(e=>({emails:[t,...e.emails]}))})),ds(e=>({gmailConfigured:!1,openaiConfigured:!1,setGmailConfigured:t=>e({gmailConfigured:t}),setOpenaiConfigured:t=>e({openaiConfigured:t})}));const xs="/api",fs=new Map,gs=3e5,bs=async(e,t={})=>{const s=`${e}_${JSON.stringify(t)}`,r=fs.get(s);if((!t.method||"GET"===t.method)&&r&&Date.now()-r.timestamp<gs)return r.data;const n="undefined"!=typeof window&&"undefined"!=typeof AbortController?new AbortController:null,a=n?setTimeout(()=>n.abort(),1e4):null;try{const r=await fetch(e,{...t,...n&&{signal:n.signal},headers:{"Content-Type":"application/json",...t.headers}});if(!r.ok)throw new Error(`HTTP ${r.status}: ${r.statusText}`);const a=await r.json();return t.method&&"GET"!==t.method||fs.set(s,{data:a,timestamp:Date.now()}),a}catch(i){if("AbortError"===i.name)throw new Error("Requ√™te expir√©e - V√©rifiez votre connexion");throw i}finally{a&&clearTimeout(a)}},ys={send:async e=>bs(`${xs}/send-email`,{method:"POST",body:JSON.stringify(e)}),getHistory:async(e=50)=>bs(`${xs}/email-history?limit=${e}`),sendBatch:async e=>bs(`${xs}/email/send-batch`,{method:"POST",body:JSON.stringify({emails:e})}),generateContent:async(e,t={})=>js.generateContent(e,t)},js={generate:async(e,t="professional")=>bs(`${xs}/ai/generate`,{method:"POST",body:JSON.stringify({prompt:e,tone:t})}),quickGenerate:async(e,t={})=>bs(`${xs}/ai/quick-generate`,{method:"POST",body:JSON.stringify({template:e,variables:t})}),improveText:async(e,t={})=>{const{tone:s="professional",context:r="email",language:n="fr"}=t;return bs(`${xs}/ai/improve-text`,{method:"POST",body:JSON.stringify({text:e,tone:s,context:r,language:n})})},generateContent:async(e,t={})=>{const{tone:s="professional",type:r="email",context:n=""}=t;return bs(`${xs}/generate-email`,{method:"POST",body:JSON.stringify({context:e,tone:s,email_type:r})})}},vs={transcribe:async e=>bs(`${xs}/voice/transcribe`,{method:"POST",body:JSON.stringify(e)}),speak:async(e,t={})=>bs(`${xs}/voice/speak`,{method:"POST",body:JSON.stringify({text:e,...t})}),startRecording:async()=>bs(`${xs}/voice/start-recording`,{method:"POST"}),stopRecording:async()=>bs(`${xs}/voice/stop-recording`,{method:"POST"}),transcribeChunk:async e=>bs(`${xs}/voice/transcribe-chunk`,{method:"POST",body:JSON.stringify({audio:e})})},Ns={getSettings:async()=>bs(`${xs}/accessibility/settings`),updateSettings:async e=>bs(`${xs}/accessibility/settings`,{method:"POST",body:JSON.stringify(e)}),getShortcuts:async()=>bs(`${xs}/accessibility/shortcuts`),getUserStats:async()=>Ns.getSettings(),getPreferences:async()=>Ns.getSettings()},ws={login:async e=>bs(`${xs}/auth/login`,{method:"POST",body:JSON.stringify(e)}),logout:async()=>bs(`${xs}/auth/logout`,{method:"POST"})},Es={getSettings:async()=>bs(`${xs}/config/settings`),updateSettings:async e=>bs(`${xs}/config/settings`,{method:"POST",body:JSON.stringify(e)})},Cs={getAll:async()=>bs(`${xs}/templates`),create:async e=>bs(`${xs}/templates`,{method:"POST",body:JSON.stringify(e)})},ks={getStats:async()=>bs(`${xs}/dashboard/stats`)},Ss={parallel:async e=>Promise.all(e.map(e=>bs(e.url,e.options))),preload:async()=>{const e=[{url:`${xs}/config/settings`,options:{}},{url:`${xs}/templates`,options:{}},{url:`${xs}/dashboard/stats`,options:{}}];try{await Ss.parallel(e)}catch(t){}},clearCache:()=>{fs.clear()}};"undefined"!=typeof window&&(window.addEventListener("load",()=>{setTimeout(()=>Ss.preload(),100)}),setInterval(()=>{const e=Date.now();for(const[t,s]of fs.entries())e-s.timestamp>gs&&fs.delete(t)},gs));const Ts=ws,_s={email:ys,ai:js,voice:vs,accessibility:Ns,auth:ws,config:Es,template:Cs,dashboard:ks,batch:Ss};function Os(){const[t,s]=g.useState(""),[r,n]=g.useState(!1),[a,i]=g.useState(!0),o=j(),l=ps(e=>e.setAuthenticated);return e.jsx("div",{className:"login-page",children:e.jsxs("div",{className:"login-container",children:[e.jsx("h1",{children:"üîê IAPosteManager"}),e.jsx("p",{children:"Interface unifi√©e pour l'envoi d'emails"}),e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),t){n(!0);try{const e=await Ts.login({password:t,isNewUser:a});e.success?(localStorage.setItem("auth_token",e.token),localStorage.setItem("isAuthenticated","true"),l(!0),o("/")):alert("Erreur de connexion")}catch(s){alert("Erreur technique")}finally{n(!1)}}},className:"login-form",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Mode :"}),e.jsxs("div",{className:"mode-toggle",children:[e.jsx("button",{type:"button",className:a?"active":"",onClick:()=>i(!0),children:"Nouveau compte"}),e.jsx("button",{type:"button",className:a?"":"active",onClick:()=>i(!1),children:"Compte existant"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Mot de passe ma√Ætre :"}),e.jsx("input",{type:"password",value:t,onChange:e=>s(e.target.value),placeholder:"Votre mot de passe s√©curis√©",required:!0})]}),e.jsx("button",{type:"submit",disabled:r,className:"login-button",children:r?"‚è≥ Connexion...":"üöÄ Se connecter"})]}),e.jsxs("div",{className:"login-features",children:[e.jsx("h3",{children:"‚ú® Fonctionnalit√©s disponibles :"}),e.jsxs("ul",{children:[e.jsx("li",{children:"üìß Envoi d'emails avec IA"}),e.jsx("li",{children:"üé§ Interface vocale"}),e.jsx("li",{children:"‚ôø Mode accessible"}),e.jsx("li",{children:"üìä Dashboard unifi√©"})]})]})]})})}function As({title:e,titleId:t,...s},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75"}))}const Rs=g.forwardRef(As);function Ds({title:e,titleId:t,...s},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))}const Is=g.forwardRef(Ds);function Ps({title:e,titleId:t,...s},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"}))}const Ls=g.forwardRef(Ps);function Fs({title:e,titleId:t,...s},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Ms=g.forwardRef(Fs);function Bs({title:e,titleId:t,...s},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Us=g.forwardRef(Bs);function zs({title:e,titleId:t,...s},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const qs=g.forwardRef(zs);function Vs({title:e,titleId:t,...s},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const $s=g.forwardRef(Vs);function Js({title:e,titleId:t,...s},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"}))}const Hs=g.forwardRef(Js);function Ks({title:e,titleId:t,...s},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18.75a6 6 0 0 0 6-6v-1.5m-6 7.5a6 6 0 0 1-6-6v-1.5m6 7.5v3.75m-3.75 0h7.5M12 15.75a3 3 0 0 1-3-3V4.5a3 3 0 1 1 6 0v8.25a3 3 0 0 1-3 3Z"}))}const Ws=g.forwardRef(Ks);function Gs({title:e,titleId:t,...s},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456ZM16.894 20.567 16.5 21.75l-.394-1.183a2.25 2.25 0 0 0-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 0 0 1.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 0 0 1.423 1.423l1.183.394-1.183.394a2.25 2.25 0 0 0-1.423 1.423Z"}))}const Xs=g.forwardRef(Gs);function Ys({title:e,titleId:t,...s},r){return g.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},s),e?g.createElement("title",{id:t},e):null,g.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Qs=g.forwardRef(Ys);function Zs(){const t=j(),[s,r]=g.useState({total_emails:0,ai_generations:0,accessibility_users:0,templates_count:0,success_rate:0,today_emails:0,week_trend:0}),[n,a]=g.useState([]),[i,o]=g.useState(!0),[l,c]=g.useState(null);g.useEffect(()=>{d();const e=setInterval(d,3e4);return()=>clearInterval(e)},[]);const d=async()=>{try{const[e,t]=await Promise.all([ks.getStats().catch(e=>{var t;return null==(t=e.message)||t.includes("401"),{total_emails:0,ai_generations:0,accessibility_users:0,templates_count:0,success_rate:95,today_emails:0,week_trend:5.2}}),ys.getHistory(5).catch(e=>{var t;return null==(t=e.message)||t.includes("401"),{emails:[]}})]);r(e),a(t.emails||t||[]),c(null)}catch(e){c("Impossible de charger les donn√©es")}finally{o(!1)}},u=({title:t,value:s,icon:r,trend:n,color:a,subtitle:i})=>e.jsxs("div",{className:`bg-gradient-to-br ${a} rounded-2xl p-6 shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:scale-105`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white/80 text-sm font-medium mb-1",children:t}),e.jsx("h3",{className:"text-4xl font-bold text-white mb-2",children:s.toLocaleString()}),i&&e.jsx("p",{className:"text-white/70 text-xs",children:i})]}),e.jsx("div",{className:"bg-white/20 p-3 rounded-xl backdrop-blur-sm",children:e.jsx(r,{className:"w-8 h-8 text-white"})})]}),void 0!==n&&e.jsxs("div",{className:"flex items-center gap-2",children:[n>=0?e.jsx(Ls,{className:"w-4 h-4 text-white"}):e.jsx(Is,{className:"w-4 h-4 text-white"}),e.jsxs("span",{className:"text-white/90 text-sm font-semibold",children:[n>=0?"+":"",n,"% cette semaine"]})]})]}),m=({title:t,description:s,icon:r,onClick:n,color:a})=>e.jsx("button",{onClick:n,className:`group bg-white rounded-xl p-6 shadow-md hover:shadow-xl transition-all duration-300 transform hover:scale-105 border-2 border-transparent hover:border-${a}-500 text-left w-full`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`bg-gradient-to-br ${a} p-3 rounded-xl group-hover:scale-110 transition-transform duration-300`,children:e.jsx(r,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1 group-hover:text-primary-600 transition-colors",children:t}),e.jsx("p",{className:"text-sm text-gray-600",children:s})]})]})}),h=({email:t,index:s})=>{const r="sent"===t.status?"green":"failed"===t.status?"red":"yellow",n="sent"===t.status?Us:Qs;return e.jsxs("div",{className:"flex items-center gap-4 p-4 hover:bg-gray-50 rounded-lg transition-colors duration-200 border-b border-gray-100 last:border-0",style:{animationDelay:50*s+"ms"},children:[e.jsx("div",{className:`bg-${r}-100 p-2 rounded-lg`,children:e.jsx(n,{className:`w-5 h-5 text-${r}-600`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:t.subject||"Sans objet"}),e.jsx("p",{className:"text-xs text-gray-500 truncate",children:t.recipient||t.to})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs text-gray-500",children:p(t.timestamp||t.date)})})]})},p=e=>{if(!e)return"Date inconnue";const t=new Date(e),s=new Date-t,r=Math.floor(s/6e4),n=Math.floor(s/36e5),a=Math.floor(s/864e5);return r<1?"√Ä l'instant":r<60?`Il y a ${r}min`:n<24?`Il y a ${n}h`:a<7?`Il y a ${a}j`:t.toLocaleDateString("fr-FR")};return i?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-primary-600 border-t-transparent mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600 font-medium",children:"Chargement du tableau de bord..."})]})}):l?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center bg-red-50 p-8 rounded-2xl border-2 border-red-200",children:[e.jsx(Qs,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-red-800 mb-2",children:"Erreur de chargement"}),e.jsx("p",{className:"text-red-600 mb-4",children:l}),e.jsx("button",{onClick:d,className:"btn btn-primary",children:"R√©essayer"})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-purple-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-primary-600 to-purple-600 bg-clip-text text-transparent mb-2",children:"Tableau de bord"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Bienvenue sur IAPosteManager - G√©rez vos communications intelligemment"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Derni√®re mise √† jour"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(new Date).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(u,{title:"Emails envoy√©s",value:s.total_emails,icon:Hs,trend:s.week_trend,color:"from-blue-500 to-blue-600",subtitle:`${s.today_emails||0} aujourd'hui`}),e.jsx(u,{title:"G√©n√©rations IA",value:s.ai_generations,icon:Xs,trend:8.3,color:"from-purple-500 to-purple-600",subtitle:"Contenu automatis√©"}),e.jsx(u,{title:"Taux de succ√®s",value:`${s.success_rate}%`,icon:Us,color:"from-green-500 to-green-600",subtitle:"Emails d√©livr√©s"}),e.jsx(u,{title:"Templates actifs",value:s.templates_count||0,icon:$s,color:"from-orange-500 to-orange-600",subtitle:"Pr√™ts √† l'emploi"})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-3",children:[e.jsx(Ms,{className:"w-8 h-8 text-primary-600"}),"Actions rapides"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsx(m,{title:"Envoyer un email",description:"Composez et envoyez un nouvel email",icon:Hs,onClick:()=>t("/send"),color:"from-blue-500 to-blue-600"}),e.jsx(m,{title:"G√©n√©rer avec IA",description:"Cr√©ez du contenu automatiquement",icon:Xs,onClick:()=>t("/ai-multimodal"),color:"from-purple-500 to-purple-600"}),e.jsx(m,{title:"Analyse vocale",description:"Dictez vos emails par la voix",icon:Ws,onClick:()=>t("/voice-transcription"),color:"from-green-500 to-green-600"}),e.jsx(m,{title:"Mes templates",description:"G√©rez vos mod√®les d'emails",icon:$s,onClick:()=>t("/templates"),color:"from-orange-500 to-orange-600"}),e.jsx(m,{title:"Historique",description:"Consultez vos emails envoy√©s",icon:qs,onClick:()=>t("/history"),color:"from-pink-500 to-pink-600"}),e.jsx(m,{title:"Configuration",description:"Param√©trez votre compte",icon:Rs,onClick:()=>t("/config"),color:"from-indigo-500 to-indigo-600"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl p-8 shadow-lg border border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(qs,{className:"w-8 h-8 text-primary-600"}),"Activit√© r√©cente"]}),e.jsx("button",{onClick:()=>t("/history"),className:"text-primary-600 hover:text-primary-700 font-semibold text-sm hover:underline",children:"Voir tout ‚Üí"})]}),e.jsx("div",{className:"space-y-2",children:n.length>0?n.map((t,s)=>e.jsx(h,{email:t,index:s},s)):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(Hs,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("p",{className:"text-lg font-medium",children:"Aucune activit√© r√©cente"}),e.jsx("p",{className:"text-sm mt-2",children:"Commencez par envoyer votre premier email !"}),e.jsx("button",{onClick:()=>t("/send"),className:"btn btn-primary mt-4",children:"Envoyer un email"})]})})]})]})})}function er(){const t=j(),[s,r]=g.useState(1),[n,a]=g.useState(!1),[i,o]=g.useState({to:"",subject:"",recipient:"",context:"",tone:"professionnel",length:"moyen",generatedBody:"",contextFiles:[],attachment:null,scheduledDate:"",scheduledTime:"",isScheduled:!1}),l=[{value:"professionnel",label:"Professionnel",description:"Formel et courtois",icon:"üíº"},{value:"amical",label:"Amical",description:"Chaleureux et d√©contract√©",icon:"üòä"},{value:"formel",label:"Formel",description:"Tr√®s structur√©",icon:"üé©"},{value:"concis",label:"Concis",description:"Direct et court",icon:"‚ö°"}],c=[{value:"court",label:"Court",description:"2-3 phrases",icon:"üìù"},{value:"moyen",label:"Moyen",description:"1 paragraphe",icon:"üìÑ"},{value:"long",label:"Long",description:"Plusieurs paragraphes",icon:"üìÉ"}];g.useEffect(()=>{const e=localStorage.getItem("selectedTemplate");if(e)try{const t=JSON.parse(e);o(e=>({...e,subject:t.subject||"",context:t.body||"",generatedBody:t.body||""})),Yt.success("Template charg√© !"),localStorage.removeItem("selectedTemplate")}catch(Et){}const t=localStorage.getItem("emailDraft");if(t&&!e)try{const e=JSON.parse(t);e.timestamp&&Date.now()-e.timestamp<864e5&&(o(e.data),r(e.step||1),Yt("Brouillon restaur√©",{icon:"üìù"}))}catch(Et){}},[]),g.useEffect(()=>{const e=setTimeout(()=>{(i.to||i.context)&&localStorage.setItem("emailDraft",JSON.stringify({data:i,step:s,timestamp:Date.now()}))},2e3);return()=>clearTimeout(e)},[i,s]);const d=()=>{localStorage.removeItem("emailDraft")},u=()=>{switch(s){case 1:return i.to&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.to);case 2:return i.subject&&i.context;case 3:return!0;case 4:return i.generatedBody;default:return!1}};return e.jsxs("div",{className:"max-w-3xl mx-auto",children:[localStorage.getItem("emailDraft")&&e.jsxs(A.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"bg-amber-100 border border-amber-300 rounded-lg p-3 mb-4 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(R,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"text-sm text-amber-800",children:"Brouillon en cours (auto-sauvegard√©)"})]}),e.jsx("button",{onClick:()=>{d(),window.location.reload()},className:"text-sm text-amber-600 hover:text-amber-800 underline",children:"Nouveau d√©part"})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["√âtape ",s," sur 4"]}),e.jsxs("span",{className:"text-sm font-medium text-primary-600",children:[Math.round(s/4*100),"%"]})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx(A.div,{className:"h-full bg-gradient-to-r from-primary-500 to-secondary-500",initial:{width:0},animate:{width:s/4*100+"%"},transition:{duration:.3}})})]}),e.jsxs("div",{className:"card",children:[e.jsx(D,{mode:"wait",children:(()=>{switch(s){case 1:return e.jsxs(A.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(q,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"√Ä qui envoyez-vous cet email ?"}),e.jsx("p",{className:"text-gray-500",children:"Commen√ßons par les informations de base"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Adresse email du destinataire *"}),e.jsx("input",{type:"email",value:i.to,onChange:e=>o({...i,to:e.target.value}),placeholder:"exemple@email.com",className:"input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Qui est cette personne ?"}),e.jsx("input",{type:"text",value:i.recipient,onChange:e=>o({...i,recipient:e.target.value}),placeholder:"Ex: Mon manager, Un client, Un coll√®gue...",className:"input"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Cela aide l'IA √† adapter le ton"})]})]})]},"step1");case 2:return e.jsxs(A.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(z,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Pourquoi envoyez-vous cet email ?"}),e.jsx("p",{className:"text-gray-500",children:"Expliquez le contexte et l'objectif"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sujet de l'email *"}),e.jsx("input",{type:"text",value:i.subject,onChange:e=>o({...i,subject:e.target.value}),placeholder:"Objet de votre email",className:"input",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contexte et objectif *"}),e.jsx("textarea",{value:i.context,onChange:e=>o({...i,context:e.target.value}),placeholder:"Ex: Je veux demander une r√©union pour discuter du nouveau projet. Il s'agit d'un projet important qui n√©cessite une collaboration √©troite...",className:"input min-h-[120px]",required:!0}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Plus vous donnez de d√©tails, meilleur sera le r√©sultat"})]}),e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 border-dashed rounded-xl p-6",children:[e.jsx("label",{className:"block text-sm font-medium text-blue-900 mb-3",children:"üìé Fichiers contextuels (optionnel)"}),e.jsx("p",{className:"text-xs text-blue-700 mb-3",children:"Uploadez des documents pour aider l'IA √† mieux comprendre le contexte (contrats, rapports, etc.)"}),e.jsx("input",{type:"file",multiple:!0,accept:".pdf,.doc,.docx,.txt,.jpg,.jpeg,.png",onChange:e=>{const t=Array.from(e.target.files);o({...i,contextFiles:t}),Yt.success(`${t.length} fichier(s) ajout√©(s)`)},className:"input bg-white"}),i.contextFiles.length>0&&e.jsx("div",{className:"mt-3 space-y-2",children:i.contextFiles.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between bg-white rounded-lg p-2 text-sm",children:[e.jsxs("span",{className:"text-gray-700 truncate",children:["üìÑ ",t.name]}),e.jsx("button",{onClick:()=>{const e=i.contextFiles.filter((e,t)=>t!==s);o({...i,contextFiles:e})},className:"text-red-600 hover:text-red-800 text-xs px-2",children:"Supprimer"})]},s))})]})]})]},"step2");case 3:return e.jsxs(A.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(U,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Comment voulez-vous le dire ?"}),e.jsx("p",{className:"text-gray-500",children:"Choisissez le ton et la longueur"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Ton de l'email *"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:l.map(t=>e.jsx("button",{onClick:()=>o({...i,tone:t.value}),className:"p-4 rounded-xl border-2 text-left transition-all "+(i.tone===t.value?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"),children:e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-2xl",children:t.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-800",children:t.label}),e.jsx("div",{className:"text-xs text-gray-500",children:t.description})]})]})},t.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Longueur souhait√©e *"}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:c.map(t=>e.jsxs("button",{onClick:()=>o({...i,length:t.value}),className:"p-4 rounded-xl border-2 text-center transition-all "+(i.length===t.value?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"text-2xl mb-2",children:t.icon}),e.jsx("div",{className:"font-semibold text-gray-800 text-sm",children:t.label}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t.description})]},t.value))})]})]})]},"step3");case 4:return e.jsxs(A.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(M,{className:"w-8 h-8 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"‚úÖ Validez votre email"}),e.jsx("p",{className:"text-gray-500",children:"Relisez attentivement avant d'envoyer"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border-2 border-blue-200 overflow-hidden",children:[e.jsx("div",{className:"bg-white border-b-2 border-blue-200 p-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 w-20",children:"De:"}),e.jsx("span",{className:"text-sm text-gray-800 font-medium",children:"Vous"})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 w-20",children:"√Ä:"}),e.jsx("span",{className:"text-sm text-gray-800 font-medium",children:i.to})]}),e.jsxs("div",{className:"flex items-start",children:[e.jsx("span",{className:"text-xs font-semibold text-gray-500 w-20",children:"Sujet:"}),e.jsx("input",{type:"text",value:i.subject,onChange:e=>o({...i,subject:e.target.value}),className:"flex-1 text-sm font-semibold text-gray-900 bg-transparent border-b border-dashed border-gray-300 focus:border-blue-500 outline-none px-2 py-1",placeholder:"Sujet de l'email"})]})]})}),e.jsxs("div",{className:"p-6",children:[e.jsx("label",{className:"block text-xs font-semibold text-blue-900 mb-3",children:"üìù Contenu du message (modifiable)"}),e.jsx("div",{className:"bg-white rounded-xl border-2 border-blue-200 p-4",children:e.jsx("textarea",{value:i.generatedBody,onChange:e=>o({...i,generatedBody:e.target.value}),className:"w-full min-h-[300px] text-gray-800 bg-transparent outline-none resize-none font-sans leading-relaxed",placeholder:"Le contenu de votre email appara√Ætra ici..."})}),e.jsxs("div",{className:"flex justify-between items-center mt-2 text-xs text-gray-500",children:[e.jsx("span",{children:"Vous pouvez modifier le texte directement"}),e.jsxs("span",{children:[i.generatedBody.length," caract√®res"]})]})]}),e.jsxs("div",{className:"p-6 pt-0",children:[e.jsx("label",{className:"block text-xs font-semibold text-blue-900 mb-3",children:"üìé Pi√®ce jointe (optionnel)"}),e.jsx("input",{type:"file",onChange:e=>{o({...i,attachment:e.target.files[0]}),Yt.success("Fichier joint ajout√©")},className:"input bg-white"}),i.attachment&&e.jsxs("div",{className:"mt-3 bg-white rounded-lg p-3 flex items-center justify-between border border-green-200",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:["üìé ",i.attachment.name]}),e.jsx("button",{onClick:()=>o({...i,attachment:null}),className:"text-red-600 hover:text-red-800 text-xs",children:"Supprimer"})]})]})]}),e.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-start space-x-3",children:[e.jsx("div",{className:"text-amber-600 mt-0.5",children:"‚ö†Ô∏è"}),e.jsxs("div",{className:"flex-1 text-sm text-amber-800",children:[e.jsx("p",{className:"font-semibold mb-1",children:"V√©rifiez avant d'envoyer:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"L'adresse email du destinataire est correcte"}),e.jsx("li",{children:"Le sujet est clair et pertinent"}),e.jsx("li",{children:"Le contenu est adapt√© et sans erreurs"}),e.jsx("li",{children:"La pi√®ce jointe est bien celle souhait√©e"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-200 rounded-xl p-4",children:[e.jsx("div",{className:"flex items-center justify-between mb-3",children:e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:i.isScheduled,onChange:e=>o({...i,isScheduled:e.target.checked}),className:"w-4 h-4 text-purple-600 rounded focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-semibold text-purple-900",children:"‚è∞ Programmer l'envoi"})]})}),i.isScheduled&&e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-purple-700 mb-1",children:"Date"}),e.jsx("input",{type:"date",value:i.scheduledDate,onChange:e=>o({...i,scheduledDate:e.target.value}),min:(new Date).toISOString().split("T")[0],className:"input text-sm w-full"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-purple-700 mb-1",children:"Heure"}),e.jsx("input",{type:"time",value:i.scheduledTime,onChange:e=>o({...i,scheduledTime:e.target.value}),className:"input text-sm w-full"})]})]}),i.isScheduled&&i.scheduledDate&&i.scheduledTime&&e.jsxs("div",{className:"mt-3 text-xs text-purple-700 bg-white rounded-lg p-2 border border-purple-200",children:["üìÖ Envoi programm√© le ",new Date(i.scheduledDate).toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," √† ",i.scheduledTime]})]}),e.jsx("div",{className:"flex space-x-3",children:e.jsxs("button",{onClick:()=>r(3),className:"flex-1 btn btn-secondary flex items-center justify-center space-x-2",children:[e.jsx(B,{className:"w-4 h-4"}),e.jsx("span",{children:"R√©g√©n√©rer"})]})})]},"step4");default:return null}})()}),e.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-200",children:[e.jsxs("button",{onClick:()=>s>1?r(s-1):t("/dashboard"),className:"btn btn-secondary flex items-center space-x-2",disabled:n,children:[e.jsx(I,{className:"w-4 h-4"}),e.jsx("span",{children:s>1?"Pr√©c√©dent":"Annuler"})]}),s<4?e.jsx("button",{onClick:()=>{3===s?(async()=>{a(!0);try{let t=i.context;if(i.contextFiles.length>0){Yt.info("Analyse des fichiers en cours...");const s=new FormData;i.contextFiles.forEach(e=>{s.append("files",e)});try{const e=await ys.analyzeDocument(s);e.data.analysis&&(t+=`\n\nInformations des documents fournis:\n${e.data.analysis}`)}catch(e){Yt.warning("Impossible d'analyser certains fichiers, g√©n√©ration sans analyse")}}const s=`Destinataire: ${i.recipient}\nContexte: ${t}\nTon: ${i.tone}\nLongueur: ${i.length}\n\nG√©n√®re un email ${i.tone} ${"court"===i.length?"court et direct":"moyen"===i.length?"de longueur moyenne":"d√©taill√©"}.`,n=await ys.generateContent({context:s,tone:i.tone,type:"general",recipient_email:i.to});if(!n.success)throw new Error(n.error||"Erreur de g√©n√©ration");o(e=>({...e,generatedBody:n.body,subject:n.subject||i.subject})),r(4),Yt.success("Email g√©n√©r√© avec succ√®s !")}catch(t){Yt.error("Erreur lors de la g√©n√©ration")}finally{a(!1)}})():r(s+1)},disabled:!u()||n,className:"btn btn-primary flex items-center space-x-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"G√©n√©ration..."})]}):3===s?e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-4 h-4"}),e.jsx("span",{children:"G√©n√©rer l'email"})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Suivant"}),e.jsx(L,{className:"w-4 h-4"})]})}):e.jsx("button",{onClick:async()=>{a(!0);try{const e=new FormData;if(e.append("to",i.to),e.append("subject",i.subject),e.append("body",i.generatedBody),i.attachment&&e.append("attachment",i.attachment),i.isScheduled&&i.scheduledDate&&i.scheduledTime){const t=new Date(`${i.scheduledDate}T${i.scheduledTime}`);e.append("scheduled_at",t.toISOString())}await ys.send(e),d(),i.isScheduled?Yt.success("Email programm√© avec succ√®s !"):Yt.success("Email envoy√© avec succ√®s !"),t("/history")}catch(e){Yt.error("Erreur lors de l'envoi")}finally{a(!1)}},disabled:!u()||n,className:"btn btn-primary flex items-center space-x-2",children:n?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{children:"Envoi..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(F,{className:"w-4 h-4"}),e.jsx("span",{children:"Envoyer l'email"})]})})]})]})]})}function tr(){const[t,s]=g.useState(1),[r,n]=g.useState(!1),[a,i]=g.useState(!1),[o,l]=g.useState({email:"",appPassword:""}),[c,d]=g.useState(!1),[u,m]=g.useState(!1),[h,p]=g.useState({apiKey:""}),[x,f]=g.useState(!1),[b,y]=g.useState(!1),[j,v]=g.useState({language:"fr",signature:"",defaultTone:"professionnel",autoSave:!0}),N=[{number:1,title:"Configuration Gmail",description:"Connectez votre compte Gmail",icon:$,color:"from-blue-500 to-blue-600"},{number:2,title:"Cl√© OpenAI",description:"Configurez l'intelligence artificielle",icon:J,color:"from-purple-500 to-purple-600"},{number:3,title:"Pr√©f√©rences",description:"Personnalisez votre exp√©rience",icon:V,color:"from-green-500 to-green-600"}],w=()=>1===t?u:2!==t||b;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 p-6",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-br from-blue-600 to-purple-600 rounded-2xl mb-4",children:e.jsx(V,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Assistant de Configuration"}),e.jsx("p",{className:"text-gray-600 text-lg",children:"Configurez votre application en 3 √©tapes simples"})]}),e.jsx("div",{className:"mb-12",children:e.jsx("div",{className:"flex items-center justify-between max-w-2xl mx-auto",children:N.map((s,r)=>{const n=s.icon,a=t===s.number,i=t>s.number;return e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex flex-col items-center flex-1",children:[e.jsx(A.div,{className:"w-16 h-16 rounded-full flex items-center justify-center mb-2 "+(i?"bg-green-500 text-white":a?`bg-gradient-to-br ${s.color} text-white shadow-lg`:"bg-gray-200 text-gray-400"),animate:{scale:a?1.1:1,rotate:i?360:0},transition:{duration:.3},children:i?e.jsx(H,{className:"w-8 h-8"}):e.jsx(n,{className:"w-8 h-8"})}),e.jsx("p",{className:"text-sm font-semibold text-center "+(a?"text-gray-900":"text-gray-500"),children:s.title})]}),r<N.length-1&&e.jsx("div",{className:"flex-1 mx-4",children:e.jsx("div",{className:"h-1 rounded-full "+(i?"bg-green-500":"bg-gray-200")})})]},s.number)})})}),e.jsx(D,{mode:"wait",children:e.jsxs(A.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},className:"card p-8 max-w-2xl mx-auto",children:[1===t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`inline-flex p-4 rounded-2xl bg-gradient-to-br ${N[0].color} mb-4`,children:e.jsx($,{className:"w-12 h-12 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Configuration Gmail"}),e.jsx("p",{className:"text-gray-600",children:"Connectez votre compte Gmail pour envoyer des emails"})]}),e.jsxs("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-xl p-4 flex items-start space-x-3",children:[e.jsx(K,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-blue-900 mb-1",children:"Comment obtenir un mot de passe d'application ?"}),e.jsxs("a",{href:"https://support.google.com/accounts/answer/185833",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800 text-sm flex items-center space-x-1",children:[e.jsx("span",{children:"Voir le guide Google"}),e.jsx(W,{className:"w-4 h-4"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse Gmail"}),e.jsx("input",{type:"email",value:o.email,onChange:e=>l({...o,email:e.target.value}),placeholder:"votre.email@gmail.com",className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de passe d'application"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:c?"text":"password",value:o.appPassword,onChange:e=>l({...o,appPassword:e.target.value}),placeholder:"xxxx xxxx xxxx xxxx",className:"input pr-12"}),e.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:c?e.jsx(G,{className:"w-5 h-5"}):e.jsx(M,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"‚ö†Ô∏è N'utilisez jamais votre mot de passe Gmail principal"})]}),e.jsx("button",{onClick:async()=>{if(o.email&&o.appPassword){i(!0);try{const e=await Es.saveGmail(o);e.data.success?(m(!0),Yt.success("‚úÖ Connexion Gmail r√©ussie !")):Yt.error(e.data.error||"√âchec de la connexion")}catch(e){Yt.error("Erreur lors du test de connexion")}finally{i(!1)}}else Yt.error("Veuillez remplir tous les champs")},disabled:a||u,className:"btn w-full "+(u?"bg-green-600 hover:bg-green-700":"btn-primary"),children:a?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-5 h-5 mr-2 animate-spin"}),"Test en cours..."]}):u?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),"Connexion r√©ussie !"]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-5 h-5 mr-2"}),"Tester la connexion"]})})]}),2===t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`inline-flex p-4 rounded-2xl bg-gradient-to-br ${N[1].color} mb-4`,children:e.jsx(J,{className:"w-12 h-12 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Configuration OpenAI"}),e.jsx("p",{className:"text-gray-600",children:"Ajoutez votre cl√© API pour activer l'IA"})]}),e.jsxs("div",{className:"bg-purple-50 border-2 border-purple-200 rounded-xl p-4 flex items-start space-x-3",children:[e.jsx(Q,{className:"w-6 h-6 text-purple-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-purple-900 mb-1",children:"O√π trouver ma cl√© API ?"}),e.jsxs("a",{href:"https://platform.openai.com/api-keys",target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:text-purple-800 text-sm flex items-center space-x-1",children:[e.jsx("span",{children:"Cr√©er une cl√© sur OpenAI Platform"}),e.jsx(W,{className:"w-4 h-4"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Cl√© API OpenAI"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x?"text":"password",value:h.apiKey,onChange:e=>p({...h,apiKey:e.target.value}),placeholder:"sk-proj-...",className:"input pr-12 font-mono text-sm"}),e.jsx("button",{type:"button",onClick:()=>f(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:x?e.jsx(G,{className:"w-5 h-5"}):e.jsx(M,{className:"w-5 h-5"})})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"üîí Votre cl√© est stock√©e de mani√®re s√©curis√©e"})]}),e.jsx("button",{onClick:async()=>{if(h.apiKey){i(!0);try{const e=await Es.saveOpenAI(h);e.data.success?(y(!0),Yt.success("‚úÖ Cl√© OpenAI valid√©e !")):Yt.error(e.data.error||"Cl√© API invalide")}catch(e){Yt.error("Erreur lors de la validation")}finally{i(!1)}}else Yt.error("Veuillez entrer une cl√© API")},disabled:a||b,className:"btn w-full "+(b?"bg-green-600 hover:bg-green-700":"btn-primary"),children:a?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-5 h-5 mr-2 animate-spin"}),"Validation..."]}):b?e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-5 h-5 mr-2"}),"Cl√© valid√©e !"]}):e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"w-5 h-5 mr-2"}),"Valider la cl√©"]})})]}),3===t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`inline-flex p-4 rounded-2xl bg-gradient-to-br ${N[2].color} mb-4`,children:e.jsx(V,{className:"w-12 h-12 text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Pr√©f√©rences"}),e.jsx("p",{className:"text-gray-600",children:"Personnalisez votre exp√©rience"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Langue"}),e.jsxs("select",{value:j.language,onChange:e=>v({...j,language:e.target.value}),className:"input",children:[e.jsx("option",{value:"fr",children:"üá´üá∑ Fran√ßais"}),e.jsx("option",{value:"en",children:"üá¨üáß English"}),e.jsx("option",{value:"es",children:"üá™üá∏ Espa√±ol"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ton par d√©faut"}),e.jsxs("select",{value:j.defaultTone,onChange:e=>v({...j,defaultTone:e.target.value}),className:"input",children:[e.jsx("option",{value:"professionnel",children:"üíº Professionnel"}),e.jsx("option",{value:"amical",children:"üòä Amical"}),e.jsx("option",{value:"formel",children:"üé© Formel"}),e.jsx("option",{value:"concis",children:"‚ö° Concis"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Signature (optionnelle)"}),e.jsx("textarea",{value:j.signature,onChange:e=>v({...j,signature:e.target.value}),placeholder:"Cordialement,\nVotre nom\nVotre fonction",className:"input min-h-[100px]"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"Sauvegarde automatique"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Sauvegarder automatiquement les brouillons"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:j.autoSave,onChange:e=>v({...j,autoSave:e.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-green-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-green-600"})]})]}),e.jsx("button",{onClick:async()=>{n(!0);try{Yt.success("‚úÖ Configuration termin√©e avec succ√®s !"),setTimeout(()=>{window.location.href="/"},1500)}catch(e){Yt.error("Erreur lors de la sauvegarde")}finally{n(!1)}},disabled:r,className:"btn btn-primary w-full bg-gradient-to-r from-green-600 to-green-700 hover:from-green-700 hover:to-green-800",children:r?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-5 h-5 mr-2 animate-spin"}),"Enregistrement..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"w-5 h-5 mr-2"}),"Terminer la configuration"]})})]})]},t)}),e.jsxs("div",{className:"flex justify-between items-center max-w-2xl mx-auto mt-6",children:[e.jsxs("button",{onClick:()=>{t>1&&s(t-1)},disabled:1===t,className:"btn btn-secondary "+(1===t?"opacity-0 pointer-events-none":""),children:[e.jsx(ee,{className:"w-5 h-5 mr-2"}),"Pr√©c√©dent"]}),t<3&&e.jsxs("button",{onClick:()=>{w()&&t<3&&s(t+1)},disabled:!w(),className:"btn "+(w()?"btn-primary":"bg-gray-300 text-gray-500 cursor-not-allowed"),children:["Suivant",e.jsx(te,{className:"w-5 h-5 ml-2"})]})]})]})})}function sr({emails:t,currentMonth:s,setCurrentMonth:r,onSelectEmail:n}){const a=new Date(s.getFullYear(),s.getMonth()+1,0).getDate(),i=new Date(s.getFullYear(),s.getMonth(),1).getDay();return e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("button",{onClick:()=>{r(new Date(s.getFullYear(),s.getMonth()-1))},className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(ee,{className:"w-5 h-5"})}),e.jsxs("h2",{className:"text-xl font-bold text-gray-800",children:[["Janvier","F√©vrier","Mars","Avril","Mai","Juin","Juillet","Ao√ªt","Septembre","Octobre","Novembre","D√©cembre"][s.getMonth()]," ",s.getFullYear()]}),e.jsx("button",{onClick:()=>{r(new Date(s.getFullYear(),s.getMonth()+1))},className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(te,{className:"w-5 h-5"})})]}),e.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"].map(t=>e.jsx("div",{className:"text-center text-sm font-semibold text-gray-600 py-2",children:t},t))}),e.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[Array.from({length:i}).map((t,s)=>e.jsx("div",{className:"aspect-square"},`empty-${s}`)),Array.from({length:a}).map((r,a)=>{const i=a+1,o=(e=>{const r=new Date(s.getFullYear(),s.getMonth(),e);return t.filter(e=>new Date(e.timestamp).toDateString()===r.toDateString())})(i),l=o.length>0,c=(new Date).toDateString()===new Date(s.getFullYear(),s.getMonth(),i).toDateString();return e.jsxs(A.div,{whileHover:{scale:1.05},className:`aspect-square border rounded-lg p-2 cursor-pointer transition-all ${c?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-blue-300"} ${l?"bg-green-50":"bg-white"}`,onClick:()=>l&&n(o[0]),children:[e.jsx("div",{className:"text-sm font-medium text-gray-700",children:i}),l&&e.jsxs("div",{className:"mt-1",children:[e.jsxs("div",{className:"text-xs text-green-600 font-semibold",children:[o.length," email",o.length>1?"s":""]}),e.jsx("div",{className:"flex items-center gap-1 mt-1",children:o.slice(0,3).map((t,s)=>e.jsx("div",{className:"w-2 h-2 rounded-full "+("sent"===t.status?"bg-green-500":"bg-red-500")},s))})]})]},i)})]}),e.jsxs("div",{className:"flex items-center justify-center gap-6 mt-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-gray-600",children:"Envoy√©"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-gray-600",children:"√âchec"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-500 rounded"}),e.jsx("span",{className:"text-gray-600",children:"Aujourd'hui"})]})]})]})}function rr({emails:t}){const s=(()=>{const e=[],s={},r=new Date;for(let t=29;t>=0;t--){const n=new Date(r);n.setDate(n.getDate()-t);const a=n.toISOString().split("T")[0];e.push(a),s[a]=0}return t.forEach(e=>{const t=new Date(e.timestamp).toISOString().split("T")[0];s.hasOwnProperty(t)&&s[t]++}),{labels:e.map(e=>new Date(e).toLocaleDateString("fr-FR",{day:"2-digit",month:"2-digit"})),data:e.map(e=>s[e])}})(),r=(()=>{const e=t.filter(e=>"sent"===e.status).length,s=t.filter(e=>"failed"===e.status||"sent"!==e.status).length;return{sent:e,failed:s}})(),n=(()=>{const e={};return t.forEach(t=>{e[t.to]=(e[t.to]||0)+1}),Object.entries(e).sort((e,t)=>t[1]-e[1]).slice(0,10)})(),a={labels:s.labels,datasets:[{label:"Emails envoy√©s",data:s.data,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4}]},i={labels:n.map(([e])=>e.length>20?e.substring(0,20)+"...":e),datasets:[{label:"Nombre d'emails",data:n.map(([,e])=>e),backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgb(59, 130, 246)",borderWidth:1}]},o={labels:["Envoy√©s","√âchecs"],datasets:[{data:[r.sent,r.failed],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(239, 68, 68, 0.8)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)"],borderWidth:1}]},l={responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"top"}},scales:{y:{beginAtZero:!0,ticks:{stepSize:1}}}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Total Emails"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:t.length})]}),e.jsx($,{className:"w-12 h-12 text-blue-500 opacity-20"})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Taux de Succ√®s"}),e.jsxs("h3",{className:"text-3xl font-bold text-green-600",children:[t.length>0?Math.round(r.sent/t.length*100):0,"%"]})]}),e.jsx(H,{className:"w-12 h-12 text-green-500 opacity-20"})]})}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Destinataires Uniques"}),e.jsx("h3",{className:"text-3xl font-bold text-gray-900",children:n.length})]}),e.jsx(ae,{className:"w-12 h-12 text-purple-500 opacity-20"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(ne,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{children:"Tendance des 30 derniers jours"})]}),e.jsx("div",{style:{height:"300px"},children:e.jsx(m,{data:a,options:l})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(de,{className:"w-5 h-5 text-green-500"}),e.jsx("span",{children:"Statut des Emails"})]}),e.jsx("div",{style:{height:"300px"},className:"flex items-center justify-center",children:e.jsx("div",{style:{width:"250px",height:"250px"},children:e.jsx(h,{data:o,options:{responsive:!0,maintainAspectRatio:!0,plugins:{legend:{position:"top"}}}})})})]}),e.jsxs("div",{className:"card p-6 lg:col-span-2",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(ae,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{children:"Top 10 Destinataires"})]}),e.jsx("div",{style:{height:"300px"},children:e.jsx(p,{data:i,options:l})})]})]}),e.jsxs("div",{className:"card p-6 bg-gradient-to-r from-blue-50 to-cyan-50",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center space-x-2",children:[e.jsx(ie,{className:"w-5 h-5 text-yellow-500"}),e.jsx("span",{children:"Insights"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:["üìä Vous avez envoy√© ",e.jsx("strong",{children:t.length})," emails au total"]}),e.jsxs("p",{className:"text-sm text-gray-700",children:["‚úÖ Taux de succ√®s : ",e.jsxs("strong",{children:[t.length>0?Math.round(r.sent/t.length*100):0,"%"]})]}),n.length>0&&e.jsxs("p",{className:"text-sm text-gray-700",children:["üë§ Destinataire le plus fr√©quent : ",e.jsx("strong",{children:n[0][0]})," (",n[0][1]," emails)"]}),e.jsxs("p",{className:"text-sm text-gray-700",children:["üìà Moyenne : ",e.jsx("strong",{children:t.length>0?(t.length/30).toFixed(1):0})," emails par jour sur 30 jours"]})]})]})]})}function nr(){const[t,s]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState({}),[o,l]=g.useState(!0),[c,d]=g.useState("timeline"),[u,m]=g.useState("day"),[h,p]=g.useState(""),[x,f]=g.useState("all"),[b,y]=g.useState(null),[j,v]=g.useState(new Date),[N,w]=g.useState(null);g.useEffect(()=>{E(),C()},[]),g.useEffect(()=>{k()},[t,h,x]);const E=async()=>{l(!0);try{const e=await ys.getHistory(500);s(e.data.emails||[])}catch(e){Yt.error("Erreur lors du chargement de l'historique")}finally{l(!1)}},C=async()=>{try{const e=await ys.getStats();i(e.data||{})}catch(e){}},k=()=>{let e=[...t];if(h){const t=h.toLowerCase();e=e.filter(e=>{var s,r,n;return(null==(s=e.to)?void 0:s.toLowerCase().includes(t))||(null==(r=e.subject)?void 0:r.toLowerCase().includes(t))||(null==(n=e.body)?void 0:n.toLowerCase().includes(t))})}const s=new Date;if("today"===x)e=e.filter(e=>new Date(e.timestamp).toDateString()===s.toDateString());else if("week"===x){const t=new Date(s.getTime()-6048e5);e=e.filter(e=>new Date(e.timestamp)>=t)}else if("month"===x){const t=new Date(s.getTime()-2592e6);e=e.filter(e=>new Date(e.timestamp)>=t)}n(e)},S=t=>{switch(t){case"sent":return e.jsx(H,{className:"w-4 h-4 text-green-500"});case"failed":return e.jsx(ue,{className:"w-4 h-4 text-red-500"});default:return e.jsx($,{className:"w-4 h-4 text-gray-400"})}},T=e=>{switch(e){case"sent":return"bg-green-100 text-green-700 border-green-200";case"failed":return"bg-red-100 text-red-700 border-red-200";default:return"bg-gray-100 text-gray-700 border-gray-200"}},_=(()=>{const e={};return r.forEach(t=>{const s=new Date(t.timestamp);let r;if("day"===u)r=s.toLocaleDateString("fr-FR",{weekday:"long",year:"numeric",month:"long",day:"numeric"});else if("week"===u){const e=new Date(s);e.setDate(s.getDate()-s.getDay()),r=`Semaine du ${e.toLocaleDateString("fr-FR")}`}else"month"===u?r=s.toLocaleDateString("fr-FR",{year:"numeric",month:"long"}):"conversation"===u&&(r=t.to||"Inconnu");e[r]||(e[r]=[]),e[r].push(t)}),e})();return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 rounded-2xl p-8 text-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-4 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(se,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Historique & Timeline"}),e.jsx("p",{className:"text-indigo-100 mt-2",children:"Navigation intelligente dans vos emails envoy√©s"})]})]}),e.jsxs("button",{onClick:()=>{const e=[["Date","Destinataire","Sujet","Statut"].join(","),...r.map(e=>[new Date(e.timestamp).toLocaleString("fr-FR"),e.to,`"${e.subject}"`,e.status].join(","))].join("\n"),t=new Blob([e],{type:"text/csv"}),s=URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download=`historique-emails-${(new Date).toISOString().split("T")[0]}.csv`,n.click(),URL.revokeObjectURL(s),Yt.success("Historique export√© !")},className:"bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg flex items-center space-x-2 transition-all",children:[e.jsx(re,{className:"w-4 h-4"}),e.jsx("span",{children:"Exporter"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(A.div,{className:"card p-6 bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",whileHover:{scale:1.02},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Total envoy√©"}),e.jsx("p",{className:"text-3xl font-bold text-blue-900",children:a.totalSent||0})]}),e.jsx(F,{className:"w-10 h-10 text-blue-500"})]})}),e.jsx(A.div,{className:"card p-6 bg-gradient-to-br from-green-50 to-green-100 border-green-200",whileHover:{scale:1.02},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-600 font-medium",children:"Taux de succ√®s"}),e.jsxs("p",{className:"text-3xl font-bold text-green-900",children:[a.successRate||0,"%"]})]}),e.jsx(ne,{className:"w-10 h-10 text-green-500"})]})}),e.jsx(A.div,{className:"card p-6 bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",whileHover:{scale:1.02},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Destinataires"}),e.jsx("p",{className:"text-3xl font-bold text-purple-900",children:a.uniqueRecipients||0})]}),e.jsx(ae,{className:"w-10 h-10 text-purple-500"})]})}),e.jsx(A.div,{className:"card p-6 bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",whileHover:{scale:1.02},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-600 font-medium",children:"Cette semaine"}),e.jsx("p",{className:"text-3xl font-bold text-orange-900",children:a.thisWeek||0})]}),e.jsx(ie,{className:"w-10 h-10 text-orange-500"})]})})]}),e.jsxs("div",{className:"card p-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:h,onChange:e=>p(e.target.value),placeholder:"Rechercher dans l'historique (destinataire, sujet, contenu)...",className:"input pl-12"})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Vue:"}),e.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[e.jsxs("button",{onClick:()=>d("timeline"),className:"px-3 py-1.5 rounded-md flex items-center space-x-2 transition-all "+("timeline"===c?"bg-white shadow-sm text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[e.jsx(le,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Timeline"})]}),e.jsxs("button",{onClick:()=>d("calendar"),className:"px-3 py-1.5 rounded-md flex items-center space-x-2 transition-all "+("calendar"===c?"bg-white shadow-sm text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[e.jsx(ce,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Calendrier"})]}),e.jsxs("button",{onClick:()=>d("stats"),className:"px-3 py-1.5 rounded-md flex items-center space-x-2 transition-all "+("stats"===c?"bg-white shadow-sm text-indigo-600":"text-gray-600 hover:text-gray-800"),children:[e.jsx(de,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Graphiques"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Grouper par:"}),e.jsxs("select",{value:u,onChange:e=>m(e.target.value),className:"input py-2 text-sm",children:[e.jsx("option",{value:"day",children:"Jour"}),e.jsx("option",{value:"week",children:"Semaine"}),e.jsx("option",{value:"month",children:"Mois"}),e.jsx("option",{value:"conversation",children:"Conversation"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"P√©riode:"}),e.jsxs("select",{value:x,onChange:e=>f(e.target.value),className:"input py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Tout"}),e.jsx("option",{value:"today",children:"Aujourd'hui"}),e.jsx("option",{value:"week",children:"7 derniers jours"}),e.jsx("option",{value:"month",children:"30 derniers jours"})]})]})]})]}),"timeline"===c&&e.jsxs("div",{className:"space-y-8",children:[Object.entries(_).map(([t,s],r)=>e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*r},children:[e.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[e.jsx("div",{className:"flex-shrink-0 w-3 h-3 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-full"}),e.jsx("h2",{className:"text-xl font-bold text-gray-800 capitalize",children:t}),e.jsx("div",{className:"flex-1 h-px bg-gradient-to-r from-gray-300 to-transparent"}),e.jsxs("span",{className:"text-sm text-gray-500 font-medium",children:[s.length," email",s.length>1?"s":""]})]}),e.jsx("div",{className:"space-y-3 ml-8 border-l-2 border-gray-200 pl-6",children:s.map((t,s)=>{var n;return e.jsx(A.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*r+.05*s},className:"card p-4 hover:shadow-lg transition-all cursor-pointer border-l-4 "+("sent"===t.status?"border-l-green-500":"failed"===t.status?"border-l-red-500":"border-l-gray-400"),onClick:()=>y(t),children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(se,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(t.timestamp).toLocaleTimeString("fr-FR",{hour:"2-digit",minute:"2-digit"})}),S(t.status)]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:"√Ä:"}),e.jsx("span",{className:"font-semibold text-gray-800",children:t.to})]}),e.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:t.subject}),e.jsxs("p",{className:"text-sm text-gray-600 line-clamp-2",children:[null==(n=t.body)?void 0:n.substring(0,150),"..."]})]}),e.jsx("div",{className:`ml-4 px-3 py-1 rounded-full text-xs font-medium border ${T(t.status)}`,children:"sent"===t.status?"Envoy√©":"√âchec"})]})},t.id||s)})})]},t)),0===r.length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(se,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Aucun email trouv√©"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Modifiez vos filtres pour voir plus de r√©sultats"})]})]}),"calendar"===c&&e.jsx(sr,{emails:r,currentMonth:j,setCurrentMonth:v,onSelectEmail:y}),"stats"===c&&e.jsx(rr,{emails:r}),b&&e.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>y(null),children:e.jsxs(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-white rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto p-6",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:b.subject}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-600",children:[e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx($,{className:"w-4 h-4"}),e.jsx("span",{children:b.to})]}),e.jsxs("span",{className:"flex items-center space-x-1",children:[e.jsx(se,{className:"w-4 h-4"}),e.jsx("span",{children:new Date(b.timestamp).toLocaleString("fr-FR")})]})]})]}),e.jsx("button",{onClick:()=>y(null),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(ue,{className:"w-6 h-6 text-gray-400"})})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-6",children:e.jsx("pre",{className:"whitespace-pre-wrap text-gray-800 font-sans",children:b.body})})]})})]})}function ar({template:t,onComplete:s,onCancel:r}){const[n,a]=g.useState({}),[i,o]=g.useState({});g.useEffect(()=>{const e=/\[([^\]]+)\]/g,s={};let r;const n=`${t.subject} ${t.body}`;for(;null!==(r=e.exec(n));){const e=r[1];s[e]||(s[e]="")}a(s)},[t]);const l=Object.keys(n);return 0===l.length?(s(t),null):e.jsx(D,{children:e.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:r,children:e.jsxs(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl max-w-2xl w-full max-h-[80vh] overflow-y-auto p-6",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Personnaliser le template"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Remplissez les variables pour personnaliser votre email"})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(me,{className:"w-6 h-6 text-gray-400"})})]}),e.jsxs("form",{onSubmit:e=>{if(e.preventDefault(),(()=>{const e={};return Object.keys(n).forEach(t=>{n[t].trim()||(e[t]="Ce champ est requis")}),o(e),0===Object.keys(e).length})()){let e=t.subject,r=t.body;Object.entries(n).forEach(([t,s])=>{const n=`[${t}]`;e=e.replace(new RegExp(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),s),r=r.replace(new RegExp(n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),s)}),s({...t,subject:e,body:r})}},className:"space-y-4",children:[l.map(t=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t.replace(/_/g," "),e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),e.jsx("input",{type:"text",value:n[t],onChange:e=>((e,t)=>{a(s=>({...s,[e]:t})),i[e]&&o(t=>{const s={...t};return delete s[e],s})})(t,e.target.value),placeholder:`Entrez ${t.toLowerCase().replace(/_/g," ")}`,className:"input w-full "+(i[t]?"border-red-500 focus:ring-red-500":"")}),i[t]&&e.jsxs("div",{className:"flex items-center space-x-1 mt-1 text-red-600 text-sm",children:[e.jsx(he,{className:"w-4 h-4"}),e.jsx("span",{children:i[t]})]})]},t)),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Aper√ßu :"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Sujet :"}),e.jsx("p",{className:"text-sm text-gray-900",children:Object.entries(n).reduce((e,[t,s])=>e.replace(new RegExp(`\\[${t}\\]`,"g"),s||`[${t}]`),t.subject)})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs text-gray-500",children:"Corps (extrait) :"}),e.jsxs("p",{className:"text-sm text-gray-900 line-clamp-3",children:[Object.entries(n).reduce((e,[t,s])=>e.replace(new RegExp(`\\[${t}\\]`,"g"),s||`[${t}]`),t.body.substring(0,200)),"..."]})]})]}),l.some(e=>!n[e])&&e.jsxs("div",{className:"mt-3 flex items-start space-x-2 text-amber-600 text-sm",children:[e.jsx(he,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"Les variables non remplies appara√Ætront en rouge dans l'aper√ßu"})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Annuler"}),e.jsx("button",{type:"submit",className:"btn btn-primary",children:"Continuer avec ce template"})]})]})]})})})}function ir(){const t=j(),[s,r]=g.useState(""),[n,a]=g.useState("all"),[i,o]=g.useState(!1),[l,c]=g.useState(null),d=[{id:1,name:"Candidature / Lettre de motivation",category:"emploi",icon:pe,color:"from-blue-500 to-blue-600",subject:"Candidature pour le poste de [POSTE]",body:"Madame, Monsieur,\n\nJe me permets de vous adresser ma candidature pour le poste de [POSTE] au sein de votre entreprise [NOM_ENTREPRISE].\n\nActuellement [SITUATION_ACTUELLE], je suis vivement int√©ress√©(e) par cette opportunit√© qui correspond parfaitement √† mon profil et √† mes aspirations professionnelles.\n\nMon parcours m'a permis de d√©velopper des comp√©tences en [COMP√âTENCES_CL√âS]. Je suis particuli√®rement motiv√©(e) par [MOTIVATION_SP√âCIFIQUE].\n\nJe serais ravi(e) de vous rencontrer pour discuter plus en d√©tail de ma candidature et de la fa√ßon dont je pourrais contribuer au d√©veloppement de [NOM_ENTREPRISE].\n\nVous trouverez ci-joint mon CV d√©taillant mon parcours et mes r√©alisations.\n\nDans l'attente de votre retour, je vous prie d'agr√©er, Madame, Monsieur, l'expression de mes salutations distingu√©es.\n\nCordialement,\n[VOTRE_NOM]",variables:["POSTE","NOM_ENTREPRISE","SITUATION_ACTUELLE","COMP√âTENCES_CL√âS","MOTIVATION_SP√âCIFIQUE","VOTRE_NOM"]},{id:2,name:"Email de relance / Follow-up",category:"suivi",icon:xe,color:"from-orange-500 to-orange-600",subject:"Relance : [SUJET_INITIAL]",body:"Bonjour [NOM],\n\nJe me permets de revenir vers vous concernant [SUJET].\n\nJe vous avais contact√©(e) le [DATE] et n'ayant pas eu de retour de votre part, je souhaitais m'assurer que mon message vous est bien parvenu.\n\n[RAPPEL_CONTEXTE]\n\nPourriez-vous me confirmer la r√©ception de ma demande et me donner une estimation du d√©lai de traitement ?\n\nJe reste √† votre disposition pour tout compl√©ment d'information.\n\nMerci d'avance pour votre retour.\n\nCordialement,\n[VOTRE_NOM]",variables:["NOM","SUJET","DATE","RAPPEL_CONTEXTE","VOTRE_NOM"]},{id:3,name:"Email de remerciement",category:"relationnel",icon:fe,color:"from-green-500 to-green-600",subject:"Merci pour [RAISON]",body:"Bonjour [NOM],\n\nJe tenais √† vous remercier sinc√®rement pour [RAISON_D√âTAILL√âE].\n\n[IMPACT_POSITIF]\n\nVotre [AIDE/CONTRIBUTION/TEMPS] a √©t√© extr√™mement pr√©cieux(se) et m'a permis de [R√âSULTAT_OBTENU].\n\nJ'esp√®re avoir l'occasion de vous rendre la pareille √† l'avenir.\n\nEncore merci pour votre g√©n√©rosit√© et votre professionnalisme.\n\nBien cordialement,\n[VOTRE_NOM]",variables:["NOM","RAISON_D√âTAILL√âE","IMPACT_POSITIF","R√âSULTAT_OBTENU","VOTRE_NOM"]},{id:4,name:"Demande de rendez-vous / R√©union",category:"organisation",icon:ce,color:"from-purple-500 to-purple-600",subject:"Demande de rendez-vous - [OBJET]",body:"Bonjour [NOM],\n\nJ'aimerais organiser une rencontre avec vous afin de discuter de [SUJET].\n\n[CONTEXTE_ET_OBJECTIF]\n\nSeriez-vous disponible pour un rendez-vous [MODALIT√â: en personne/en visioconf√©rence/t√©l√©phonique] ?\n\nVoici quelques cr√©neaux qui me conviennent :\n- [DATE_1] √† [HEURE_1]\n- [DATE_2] √† [HEURE_2]\n- [DATE_3] √† [HEURE_3]\n\nN'h√©sitez pas √† me proposer d'autres horaires si ceux-ci ne vous conviennent pas.\n\nLa r√©union devrait durer environ [DUR√âE].\n\nDans l'attente de votre retour.\n\nCordialement,\n[VOTRE_NOM]",variables:["NOM","SUJET","CONTEXTE_ET_OBJECTIF","MODALIT√â","DATE_1","HEURE_1","DATE_2","HEURE_2","DATE_3","HEURE_3","DUR√âE","VOTRE_NOM"]},{id:5,name:"Facture / Demande de paiement",category:"finance",icon:ge,color:"from-teal-500 to-teal-600",subject:"Facture N¬∞[NUM√âRO_FACTURE] - [DESCRIPTION]",body:"Bonjour [NOM],\n\nVeuillez trouver ci-joint la facture N¬∞[NUM√âRO_FACTURE] d'un montant de [MONTANT] ‚Ç¨ relative √† [DESCRIPTION_PRESTATION].\n\nD√©tails de la facture :\n- Date d'√©mission : [DATE_√âMISSION]\n- Date d'√©ch√©ance : [DATE_√âCH√âANCE]\n- Montant HT : [MONTANT_HT] ‚Ç¨\n- TVA : [TVA] ‚Ç¨\n- Montant TTC : [MONTANT_TTC] ‚Ç¨\n\nModalit√©s de paiement :\n[COORDONN√âES_BANCAIRES]\n\nPour toute question concernant cette facture, n'h√©sitez pas √† me contacter.\n\nJe vous remercie de votre confiance et reste √† votre disposition.\n\nCordialement,\n[VOTRE_NOM]\n[ENTREPRISE]",variables:["NOM","NUM√âRO_FACTURE","DESCRIPTION","MONTANT","DESCRIPTION_PRESTATION","DATE_√âMISSION","DATE_√âCH√âANCE","MONTANT_HT","TVA","MONTANT_TTC","COORDONN√âES_BANCAIRES","VOTRE_NOM","ENTREPRISE"]},{id:6,name:"R√©clamation / Signalement de probl√®me",category:"support",icon:he,color:"from-red-500 to-red-600",subject:"R√©clamation concernant [PROBL√àME]",body:"Madame, Monsieur,\n\nJe me permets de vous contacter pour vous faire part d'un probl√®me rencontr√© avec [PRODUIT/SERVICE].\n\nDescription du probl√®me :\n[DESCRIPTION_D√âTAILL√âE_PROBL√àME]\n\nCirconstances :\n- Date : [DATE_PROBL√àME]\n- R√©f√©rence de commande : [R√âF√âRENCE]\n- [AUTRES_D√âTAILS]\n\n[IMPACT_DU_PROBL√àME]\n\nJe souhaiterais obtenir [SOLUTION_SOUHAIT√âE : remboursement/remplacement/r√©paration/autre].\n\nVous trouverez ci-joint [PI√àCES_JUSTIFICATIVES].\n\nJe vous remercie de bien vouloir traiter ma demande dans les meilleurs d√©lais et reste √† votre disposition pour tout compl√©ment d'information.\n\nDans l'attente de votre r√©ponse.\n\nCordialement,\n[VOTRE_NOM]\n[COORDONN√âES]",variables:["PROBL√àME","PRODUIT/SERVICE","DESCRIPTION_D√âTAILL√âE_PROBL√àME","DATE_PROBL√àME","R√âF√âRENCE","IMPACT_DU_PROBL√àME","SOLUTION_SOUHAIT√âE","PI√àCES_JUSTIFICATIVES","VOTRE_NOM","COORDONN√âES"]},{id:7,name:"Email d'introduction / Premier contact",category:"relationnel",icon:be,color:"from-indigo-500 to-indigo-600",subject:"Introduction - [VOTRE_NOM] / [VOTRE_ENTREPRISE]",body:"Bonjour [NOM],\n\nJe me pr√©sente, [VOTRE_NOM], [VOTRE_FONCTION] chez [VOTRE_ENTREPRISE].\n\n[CONTEXTE_PRISE_CONTACT : J'ai obtenu vos coordonn√©es par.../J'ai d√©couvert votre profil.../Nous avons un contact commun...]\n\nJe vous contacte car [RAISON_CONTACT].\n\n[BR√àVE_PR√âSENTATION_VOUS_OU_ENTREPRISE]\n\nJe serais ravi(e) d'√©changer avec vous sur [SUJET_DISCUSSION] et d'explorer d'√©ventuelles synergies entre nos activit√©s.\n\nSeriez-vous disponible pour un bref √©change t√©l√©phonique ou un caf√© dans les prochaines semaines ?\n\nAu plaisir de vous lire.\n\nCordialement,\n[VOTRE_NOM]\n[FONCTION]\n[ENTREPRISE]\n[T√âL√âPHONE]",variables:["NOM","VOTRE_NOM","VOTRE_FONCTION","VOTRE_ENTREPRISE","CONTEXTE_PRISE_CONTACT","RAISON_CONTACT","BR√àVE_PR√âSENTATION","SUJET_DISCUSSION","T√âL√âPHONE"]},{id:8,name:"Mise √† jour de projet / Compte-rendu",category:"gestion_projet",icon:ye,color:"from-cyan-500 to-cyan-600",subject:"Point d'avancement - [NOM_PROJET]",body:"Bonjour √† tous,\n\nVoici le point d'avancement du projet [NOM_PROJET] pour la p√©riode du [DATE_D√âBUT] au [DATE_FIN].\n\n‚úÖ T√¢ches accomplies :\n- [T√ÇCHE_1]\n- [T√ÇCHE_2]\n- [T√ÇCHE_3]\n\nüöß En cours :\n- [T√ÇCHE_EN_COURS_1]\n- [T√ÇCHE_EN_COURS_2]\n\nüìÖ √Ä venir :\n- [T√ÇCHE_PR√âVUE_1]\n- [T√ÇCHE_PR√âVUE_2]\n\n‚ö†Ô∏è Points d'attention / Risques :\n[POINTS_ATTENTION]\n\nüìä Indicateurs :\n- Avancement global : [POURCENTAGE]%\n- Respect du budget : [OUI/NON - D√âTAILS]\n- Respect des d√©lais : [OUI/NON - D√âTAILS]\n\nProchaine r√©union : [DATE_PROCHAINE_R√âUNION]\n\nN'h√©sitez pas si vous avez des questions.\n\nCordialement,\n[VOTRE_NOM]\nChef de projet",variables:["NOM_PROJET","DATE_D√âBUT","DATE_FIN","T√ÇCHE_1","T√ÇCHE_2","T√ÇCHE_3","POINTS_ATTENTION","POURCENTAGE","DATE_PROCHAINE_R√âUNION","VOTRE_NOM"]},{id:9,name:"Message d'absence / Out of Office",category:"organisation",icon:je,color:"from-amber-500 to-amber-600",subject:"Absence du [DATE_D√âBUT] au [DATE_FIN]",body:"Bonjour,\n\nJe serai absent(e) du bureau du [DATE_D√âBUT] au [DATE_FIN] inclus.\n\nDurant cette p√©riode, je n'aurai pas acc√®s √† mes emails de mani√®re r√©guli√®re.\n\nEn cas d'urgence, vous pouvez contacter :\n- [NOM_CONTACT_1] : [EMAIL_1] / [T√âL√âPHONE_1]\n- [NOM_CONTACT_2] : [EMAIL_2] / [T√âL√âPHONE_2]\n\nPour les demandes non urgentes, je traiterai votre message d√®s mon retour le [DATE_RETOUR].\n\nJe vous remercie de votre compr√©hension.\n\nCordialement,\n[VOTRE_NOM]",variables:["DATE_D√âBUT","DATE_FIN","NOM_CONTACT_1","EMAIL_1","T√âL√âPHONE_1","NOM_CONTACT_2","EMAIL_2","T√âL√âPHONE_2","DATE_RETOUR","VOTRE_NOM"]},{id:10,name:"Networking / Demande de connexion LinkedIn",category:"relationnel",icon:ae,color:"from-blue-600 to-blue-700",subject:"Demande de connexion - [CONTEXTE]",body:"Bonjour [NOM],\n\nJ'ai d√©couvert votre profil sur LinkedIn et je serais ravi(e) de faire partie de votre r√©seau.\n\n[CONTEXTE_COMMUN : Nous avons tous deux particip√© √†.../Nous travaillons dans le m√™me secteur.../J'ai lu votre article sur...]\n\nJe suis [VOTRE_FONCTION] chez [VOTRE_ENTREPRISE], sp√©cialis√©(e) en [SP√âCIALIT√â].\n\nVotre parcours et votre expertise en [DOMAINE] m'int√©ressent particuli√®rement, notamment [√âL√âMENT_SP√âCIFIQUE].\n\nJe serais honor√©(e) de pouvoir √©changer avec vous et partager nos exp√©riences professionnelles.\n\nAu plaisir de se connecter !\n\nCordialement,\n[VOTRE_NOM]\n[FONCTION]\n[LIEN_LINKEDIN]",variables:["NOM","CONTEXTE_COMMUN","VOTRE_FONCTION","VOTRE_ENTREPRISE","SP√âCIALIT√â","DOMAINE","√âL√âMENT_SP√âCIFIQUE","VOTRE_NOM","FONCTION","LIEN_LINKEDIN"]}],u=[{id:"all",name:"Tous",icon:R,count:d.length},{id:"emploi",name:"Emploi",icon:pe,count:d.filter(e=>"emploi"===e.category).length},{id:"suivi",name:"Suivi",icon:xe,count:d.filter(e=>"suivi"===e.category).length},{id:"relationnel",name:"Relationnel",icon:ae,count:d.filter(e=>"relationnel"===e.category).length},{id:"organisation",name:"Organisation",icon:ce,count:d.filter(e=>"organisation"===e.category).length},{id:"finance",name:"Finance",icon:ge,count:d.filter(e=>"finance"===e.category).length},{id:"support",name:"Support",icon:he,count:d.filter(e=>"support"===e.category).length},{id:"gestion_projet",name:"Projet",icon:ye,count:d.filter(e=>"gestion_projet"===e.category).length}],m=d.filter(e=>{const t=e.name.toLowerCase().includes(s.toLowerCase())||e.subject.toLowerCase().includes(s.toLowerCase()),r="all"===n||e.category===n;return t&&r});return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 rounded-2xl p-8 text-white",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-4 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(P,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Templates Professionnels"}),e.jsx("p",{className:"text-blue-100 mt-2",children:"Les 10 emails professionnels les plus utilis√©s au monde - pr√™ts √† l'emploi"})]})]})}),e.jsxs("div",{className:"card p-6 space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),e.jsx("input",{type:"text",value:s,onChange:e=>r(e.target.value),placeholder:"Rechercher un template...",className:"input pl-12"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:u.map(t=>{const s=t.icon;return e.jsxs("button",{onClick:()=>a(t.id),className:"px-4 py-2 rounded-lg font-medium transition-all flex items-center space-x-2 "+(n===t.id?"bg-blue-600 text-white shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[e.jsx(s,{className:"w-4 h-4"}),e.jsx("span",{children:t.name}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full "+(n===t.id?"bg-white/20":"bg-gray-300"),children:t.count})]},t.id)})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:m.map((s,r)=>{const n=s.icon;return e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*r},className:"card p-6 hover:shadow-xl transition-all group",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{className:"flex items-start space-x-4",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-br ${s.color} flex-shrink-0`,children:e.jsx(n,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-1",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600 font-medium",children:["üìß ",s.subject]})]})]})}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4 max-h-48 overflow-y-auto",children:e.jsxs("pre",{className:"text-xs text-gray-700 whitespace-pre-wrap font-sans",children:[s.body.substring(0,300),s.body.length>300&&"..."]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 mb-2",children:"Variables √† personnaliser:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[s.variables.slice(0,5).map((t,s)=>e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full",children:t},s)),s.variables.length>5&&e.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-200 text-gray-600 rounded-full",children:["+",s.variables.length-5," autres"]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("button",{onClick:()=>(e=>{e.variables&&e.variables.length>0?(c(e),o(!0)):(localStorage.setItem("selectedTemplate",JSON.stringify(e)),t("/send"),Yt.success(`Template "${e.name}" s√©lectionn√© !`))})(s),className:"btn btn-primary flex-1 group-hover:shadow-md",children:[e.jsx("span",{children:"Utiliser"}),e.jsx(L,{className:"w-4 h-4 ml-2"})]}),e.jsx("button",{onClick:()=>{return e=s.body,navigator.clipboard.writeText(e),void Yt.success("Copi√© dans le presse-papier");var e},className:"btn btn-secondary p-3",title:"Copier le contenu",children:e.jsx(ve,{className:"w-4 h-4"})})]})]},s.id)})}),0===m.length&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(R,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500 text-lg",children:"Aucun template trouv√©"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Essayez de modifier vos crit√®res de recherche"})]}),i&&l&&e.jsx(ar,{template:l,onComplete:e=>{localStorage.setItem("selectedTemplate",JSON.stringify(e)),o(!1),t("/send")},onCancel:()=>{o(!1),c(null)}})]})}function or(){const t=j(),[s,r]=g.useState({context:"",tone:"professional"}),[n,a]=g.useState(null),[i,o]=g.useState(!1),l=e=>{navigator.clipboard.writeText(e),Yt.success("Copi√© dans le presse-papier!")};return e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-800 mb-2 flex items-center",children:[e.jsx(P,{className:"w-8 h-8 mr-3 text-purple-600"}),"G√©n√©ration d'email avec IA"]}),e.jsx("p",{className:"text-gray-600",children:"Laissez l'IA g√©n√©rer un email professionnel pour vous"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"üìù D√©crivez votre besoin"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contexte de l'email"}),e.jsx("textarea",{value:s.context,onChange:e=>r({...s,context:e.target.value}),rows:6,className:"input resize-none",placeholder:"Ex: Je veux remercier un client pour sa commande r√©cente et lui proposer une r√©duction pour son prochain achat..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Ton de l'email"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{value:"professional",label:"üíº Professionnel",description:"Formel et courtois"},{value:"friendly",label:"üòä Amical",description:"Chaleureux et d√©contract√©"},{value:"formal",label:"üé© Formel",description:"Tr√®s professionnel"},{value:"casual",label:"üëã D√©contract√©",description:"Informel et l√©ger"}].map(t=>e.jsxs("button",{onClick:()=>r({...s,tone:t.value}),className:"p-3 rounded-lg border-2 transition-all text-left "+(s.tone===t.value?"border-primary-500 bg-primary-50":"border-gray-200 hover:border-gray-300"),children:[e.jsx("div",{className:"font-medium text-sm",children:t.label}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t.description})]},t.value))})]}),e.jsx("button",{onClick:async()=>{var e,r,n;if(s.context.trim()){o(!0);try{const e=await js.generate(s);e.data.success?(a({subject:e.data.subject,body:e.data.body}),Yt.success("‚ú® Email g√©n√©r√© avec succ√®s!")):Yt.error(e.data.error||"Erreur lors de la g√©n√©ration")}catch(i){(null==(n=null==(r=null==(e=i.response)?void 0:e.data)?void 0:r.error)?void 0:n.includes("OpenAI"))?(Yt.error("Configuration OpenAI requise"),setTimeout(()=>t("/config"),2e3)):Yt.error("Erreur lors de la g√©n√©ration")}finally{o(!1)}}else Yt.error("Veuillez d√©crire le contexte de l'email")},disabled:i,className:"btn btn-primary w-full flex items-center justify-center",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"G√©n√©ration en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-5 h-5 mr-2"}),"G√©n√©rer avec IA"]})})]})]}),e.jsxs("div",{className:"card",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"‚ú® R√©sultat g√©n√©r√©"}),n?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Objet"}),e.jsxs("button",{onClick:()=>l(n.subject),className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:[e.jsx(ve,{className:"w-4 h-4 mr-1"}),"Copier"]})]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:e.jsx("p",{className:"text-gray-800",children:n.subject})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Corps du message"}),e.jsxs("button",{onClick:()=>l(n.body),className:"text-sm text-primary-600 hover:text-primary-700 flex items-center",children:[e.jsx(ve,{className:"w-4 h-4 mr-1"}),"Copier"]})]}),e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200 max-h-96 overflow-y-auto",children:e.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:n.body})})]}),e.jsxs("button",{onClick:()=>{localStorage.setItem("generatedEmail",JSON.stringify(n)),t("/send")},className:"btn btn-primary w-full flex items-center justify-center",children:[e.jsx(F,{className:"w-5 h-5 mr-2"}),"Utiliser cet email"]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-gray-400",children:[e.jsx(P,{className:"w-16 h-16 mb-4"}),e.jsx("p",{className:"text-center",children:"Le r√©sultat g√©n√©r√© appara√Ætra ici"})]})]})]}),e.jsx("div",{className:"card mt-6 bg-gradient-to-r from-purple-50 to-pink-50 border-purple-100",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(P,{className:"w-6 h-6 text-purple-600 mt-1 mr-3 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-purple-900 mb-2",children:"√Ä propos de la g√©n√©ration IA"}),e.jsxs("ul",{className:"text-sm text-purple-700 space-y-1",children:[e.jsx("li",{children:"‚úì Propuls√© par OpenAI GPT-3.5-Turbo"}),e.jsx("li",{children:"‚úì G√©n√©ration en fran√ßais naturel"}),e.jsx("li",{children:"‚úì Adaptation automatique au ton choisi"}),e.jsx("li",{children:"‚úì Relecture recommand√©e avant envoi"})]})]})]})})]})})}function lr(){const[t,s]=g.useState("text"),[r,n]=g.useState(!1),[a,i]=g.useState(""),[o,l]=g.useState(""),[c,d]=g.useState(null),[u,m]=g.useState(""),[h,p]=g.useState(!1),[x,f]=g.useState(null),[b,y]=g.useState(""),j=g.useRef(null),v=g.useRef([]),[N,w]=g.useState(null),[E,C]=g.useState(""),k=[{id:"text",name:"Texte",icon:U,description:"G√©n√©ration de contenu",color:"from-blue-500 to-cyan-500"},{id:"document",name:"Document",icon:R,description:"Analyse de fichiers",color:"from-purple-500 to-pink-500"},{id:"voice",name:"Audio",icon:we,description:"Transcription vocale",color:"from-green-500 to-emerald-500"},{id:"image",name:"Image",icon:Ee,description:"Analyse visuelle",color:"from-orange-500 to-amber-500"}],S=()=>{j.current&&h&&(j.current.stop(),p(!1),wt.success("Enregistrement arr√™t√©"))},T=e=>{navigator.clipboard.writeText(e),wt.success("Copi√© dans le presse-papier")},_=(e,t)=>{const s=new Blob([e],{type:"text/plain"}),r=URL.createObjectURL(s),n=document.createElement("a");n.href=r,n.download=t,n.click(),URL.revokeObjectURL(r),wt.success("Fichier t√©l√©charg√©")},O=()=>{switch(t){case"text":i(""),l("");break;case"document":d(null),m("");break;case"voice":f(null),y(""),h&&S();break;case"image":w(null),C("")}wt.success("R√©initialis√©")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 rounded-2xl p-8 text-white",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"p-4 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(Ne,{className:"w-8 h-8"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Assistant IA Multimodal"}),e.jsx("p",{className:"text-purple-100 mt-2",children:"Analysez du texte, des documents, des images et de l'audio avec l'intelligence artificielle"})]})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:k.map(r=>{const n=r.icon,a=t===r.id;return e.jsxs(A.button,{onClick:()=>s(r.id),className:"relative p-6 rounded-xl border-2 transition-all "+(a?"border-primary-500 bg-primary-50 shadow-lg":"border-gray-200 bg-white hover:border-gray-300 hover:shadow-md"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[e.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[e.jsx("div",{className:`p-3 rounded-lg bg-gradient-to-br ${r.color}`,children:e.jsx(n,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold "+(a?"text-primary-600":"text-gray-700"),children:r.name}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.description})]})]}),a&&e.jsx(A.div,{layoutId:"activeTab",className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-primary-500 to-secondary-500 rounded-b-xl",initial:!1,transition:{type:"spring",stiffness:500,damping:30}})]},r.id)})}),e.jsx(D,{mode:"wait",children:e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},className:"card p-6",children:["text"===t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"G√©n√©ration de Contenu"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"D√©crivez ce que vous souhaitez g√©n√©rer et l'IA cr√©era du contenu pour vous."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Votre prompt"}),e.jsx("textarea",{value:a,onChange:e=>i(e.target.value),placeholder:"Ex: √âcris un email de remerciement professionnel pour une entrevue d'embauche...",className:"input min-h-[150px] resize-none",disabled:r})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("button",{onClick:O,className:"btn btn-secondary",disabled:r||!a&&!o,children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Effacer"]}),e.jsx("button",{onClick:async()=>{if(a.trim()){n(!0);try{const e=await js.generateContent(a);if(!e.success)throw new Error(e.error||"Erreur de g√©n√©ration");{const t=`Sujet: ${e.subject}\n\n${e.body}`;l(t),wt.success("Contenu g√©n√©r√© avec succ√®s")}}catch(e){wt.error(e.message||"Erreur lors de la g√©n√©ration du contenu")}finally{n(!1)}}else wt.error("Veuillez entrer un prompt")},className:"btn btn-primary",disabled:r||!a.trim(),children:r?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4 mr-2 animate-spin"}),"G√©n√©ration..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ne,{className:"w-4 h-4 mr-2"}),"G√©n√©rer"]})})]}),o&&e.jsxs(A.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-gradient-to-br from-blue-50 to-cyan-50 rounded-xl p-6 border-2 border-blue-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"w-5 h-5 text-blue-600"}),e.jsx("h3",{className:"font-semibold text-blue-900",children:"Contenu g√©n√©r√©"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>T(o),className:"p-2 bg-white rounded-lg hover:bg-blue-100 transition-colors",title:"Copier",children:e.jsx(ve,{className:"w-4 h-4 text-blue-600"})}),e.jsx("button",{onClick:()=>_(o,"generated-content.txt"),className:"p-2 bg-white rounded-lg hover:bg-blue-100 transition-colors",title:"T√©l√©charger",children:e.jsx(re,{className:"w-4 h-4 text-blue-600"})})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-4",children:e.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:o})})]})]}),"document"===t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Analyse de Document"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"T√©l√©chargez un document (PDF, DOCX, TXT) pour en extraire le contenu et l'analyser."})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-purple-400 transition-colors",children:[e.jsx("input",{type:"file",id:"document-upload",accept:".pdf,.doc,.docx,.txt",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>10485760)return void wt.error("Le fichier est trop volumineux (max 10MB)");d(t),wt.success(`Document "${t.name}" charg√©`)}},className:"hidden",disabled:r}),e.jsxs("label",{htmlFor:"document-upload",className:"cursor-pointer flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-purple-100 to-pink-100 rounded-full",children:e.jsx(Ce,{className:"w-8 h-8 text-purple-600"})}),c?e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-semibold text-gray-800",children:c.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(c.size/1024/1024).toFixed(2)," MB"]})]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Cliquez pour s√©lectionner un document"}),e.jsx("p",{className:"text-sm text-gray-500",children:"PDF, DOCX, TXT (max 10MB)"})]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("button",{onClick:O,className:"btn btn-secondary",disabled:r||!c&&!u,children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Effacer"]}),e.jsx("button",{onClick:async()=>{if(!c)return void wt.error("Veuillez s√©lectionner un document");n(!0);const e=new FormData;e.append("file",c);try{const t=await emailAPI.analyzeDocument(e);m(t.data.analysis),wt.success("Document analys√© avec succ√®s")}catch(t){wt.error("Erreur lors de l'analyse du document")}finally{n(!1)}},className:"btn btn-primary",disabled:r||!c,children:r?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4 mr-2 animate-spin"}),"Analyse..."]}):e.jsxs(e.Fragment,{children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Analyser"]})})]}),u&&e.jsxs(A.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-gradient-to-br from-purple-50 to-pink-50 rounded-xl p-6 border-2 border-purple-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"w-5 h-5 text-purple-600"}),e.jsx("h3",{className:"font-semibold text-purple-900",children:"Analyse du document"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>T(u),className:"p-2 bg-white rounded-lg hover:bg-purple-100 transition-colors",title:"Copier",children:e.jsx(ve,{className:"w-4 h-4 text-purple-600"})}),e.jsx("button",{onClick:()=>_(u,"document-analysis.txt"),className:"p-2 bg-white rounded-lg hover:bg-purple-100 transition-colors",title:"T√©l√©charger",children:e.jsx(re,{className:"w-4 h-4 text-purple-600"})})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-4",children:e.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:u})})]})]}),"voice"===t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Transcription Audio"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Enregistrez votre voix ou t√©l√©chargez un fichier audio pour le transcrire en texte."})]}),e.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border-2 border-green-100",children:e.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[e.jsx("button",{onClick:h?S:async()=>{try{const e=await navigator.mediaDevices.getUserMedia({audio:!0}),t=new MediaRecorder(e);j.current=t,v.current=[],t.ondataavailable=e=>{e.data.size>0&&v.current.push(e.data)},t.onstop=()=>{const t=new Blob(v.current,{type:"audio/webm"}),s=new File([t],"recording.webm",{type:"audio/webm"});f(s),e.getTracks().forEach(e=>e.stop())},t.start(),p(!0),wt.success("Enregistrement d√©marr√©")}catch(e){wt.error("Impossible d'acc√©der au microphone")}},className:"w-20 h-20 rounded-full flex items-center justify-center transition-all "+(h?"bg-red-500 hover:bg-red-600 animate-pulse":"bg-gradient-to-br from-green-500 to-emerald-500 hover:shadow-lg"),disabled:r,children:h?e.jsx(ke,{className:"w-8 h-8 text-white"}):e.jsx(K,{className:"w-8 h-8 text-white ml-1"})}),e.jsx("p",{className:"font-medium text-gray-700",children:h?"Cliquez pour arr√™ter":"Cliquez pour enregistrer"}),x&&!h&&e.jsxs("p",{className:"text-sm text-green-600 flex items-center space-x-2",children:[e.jsx(H,{className:"w-4 h-4"}),e.jsxs("span",{children:["Audio enregistr√©: ",x.name]})]})]})}),e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"text-gray-400 font-medium",children:"OU"})}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-green-400 transition-colors",children:[e.jsx("input",{type:"file",id:"audio-upload",accept:"audio/*",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>26214400)return void wt.error("Le fichier audio est trop volumineux (max 25MB)");f(t),wt.success(`Audio "${t.name}" charg√©`)}},className:"hidden",disabled:r||h}),e.jsxs("label",{htmlFor:"audio-upload",className:"cursor-pointer flex flex-col items-center space-y-3",children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-green-100 to-emerald-100 rounded-full",children:e.jsx(Ce,{className:"w-8 h-8 text-green-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium text-gray-700",children:"T√©l√©charger un fichier audio"}),e.jsx("p",{className:"text-sm text-gray-500",children:"MP3, WAV, M4A (max 25MB)"})]})]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("button",{onClick:O,className:"btn btn-secondary",disabled:r||h||!x&&!b,children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Effacer"]}),e.jsx("button",{onClick:async()=>{if(!x)return void wt.error("Veuillez enregistrer ou charger un fichier audio");n(!0);const e=new FormData;e.append("audio",x);try{const t=await emailAPI.transcribeAudio(e);y(t.data.transcription),wt.success("Audio transcrit avec succ√®s")}catch(t){wt.error("Erreur lors de la transcription")}finally{n(!1)}},className:"btn btn-primary",disabled:r||h||!x,children:r?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4 mr-2 animate-spin"}),"Transcription..."]}):e.jsxs(e.Fragment,{children:[e.jsx(we,{className:"w-4 h-4 mr-2"}),"Transcrire"]})})]}),b&&e.jsxs(A.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-xl p-6 border-2 border-green-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"w-5 h-5 text-green-600"}),e.jsx("h3",{className:"font-semibold text-green-900",children:"Transcription"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>T(b),className:"p-2 bg-white rounded-lg hover:bg-green-100 transition-colors",title:"Copier",children:e.jsx(ve,{className:"w-4 h-4 text-green-600"})}),e.jsx("button",{onClick:()=>_(b,"transcription.txt"),className:"p-2 bg-white rounded-lg hover:bg-green-100 transition-colors",title:"T√©l√©charger",children:e.jsx(re,{className:"w-4 h-4 text-green-600"})})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-4",children:e.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:b})})]})]}),"image"===t&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"Analyse d'Image"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"T√©l√©chargez une image pour en extraire des informations et obtenir une description."})]}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-orange-400 transition-colors",children:[e.jsx("input",{type:"file",id:"image-upload",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>10485760)return void wt.error("L'image est trop volumineuse (max 10MB)");if(!t.type.startsWith("image/"))return void wt.error("Veuillez s√©lectionner une image valide");w(t),wt.success(`Image "${t.name}" charg√©e`)}},className:"hidden",disabled:r}),e.jsx("label",{htmlFor:"image-upload",className:"cursor-pointer flex flex-col items-center space-y-3",children:N?e.jsxs("div",{className:"space-y-4",children:[e.jsx("img",{src:URL.createObjectURL(N),alt:"Preview",className:"max-h-48 rounded-lg shadow-lg"}),e.jsx("p",{className:"font-semibold text-gray-800",children:N.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:[(N.size/1024/1024).toFixed(2)," MB"]})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-4 bg-gradient-to-br from-orange-100 to-amber-100 rounded-full",children:e.jsx(Ce,{className:"w-8 h-8 text-orange-600"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"font-medium text-gray-700",children:"Cliquez pour s√©lectionner une image"}),e.jsx("p",{className:"text-sm text-gray-500",children:"JPG, PNG, GIF (max 10MB)"})]})]})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("button",{onClick:O,className:"btn btn-secondary",disabled:r||!N&&!E,children:[e.jsx(me,{className:"w-4 h-4 mr-2"}),"Effacer"]}),e.jsx("button",{onClick:async()=>{var e,t;if(!N)return void wt.error("Veuillez s√©lectionner une image");n(!0);const s=new FormData;s.append("images",N),s.append("type","general");try{const e=await emailAPI.analyzeImage(s);if(e.data.success&&e.data.analyses){const t=e.data.analyses[0].analysis;C(t),wt.success("Image analys√©e avec succ√®s")}else wt.error("Erreur lors de l'analyse de l'image")}catch(r){wt.error((null==(t=null==(e=r.response)?void 0:e.data)?void 0:t.error)||"Erreur lors de l'analyse de l'image")}finally{n(!1)}},className:"btn btn-primary",disabled:r||!N,children:r?e.jsxs(e.Fragment,{children:[e.jsx(X,{className:"w-4 h-4 mr-2 animate-spin"}),"Analyse..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ee,{className:"w-4 h-4 mr-2"}),"Analyser"]})})]}),E&&e.jsxs(A.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"bg-gradient-to-br from-orange-50 to-amber-50 rounded-xl p-6 border-2 border-orange-100",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"w-5 h-5 text-orange-600"}),e.jsx("h3",{className:"font-semibold text-orange-900",children:"Analyse de l'image"})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx("button",{onClick:()=>T(E),className:"p-2 bg-white rounded-lg hover:bg-orange-100 transition-colors",title:"Copier",children:e.jsx(ve,{className:"w-4 h-4 text-orange-600"})}),e.jsx("button",{onClick:()=>_(E,"image-analysis.txt"),className:"p-2 bg-white rounded-lg hover:bg-orange-100 transition-colors",title:"T√©l√©charger",children:e.jsx(re,{className:"w-4 h-4 text-orange-600"})})]})]}),e.jsx("div",{className:"bg-white rounded-lg p-4",children:e.jsx("p",{className:"text-gray-800 whitespace-pre-wrap",children:E})})]})]})]},t)})]})}function cr(){const[t,s]=g.useState(1),[r,n]=g.useState(null),[a,i]=g.useState(""),[o,l]=g.useState(null),[c,d]=g.useState([]),[u,m]=g.useState(null),[h,p]=g.useState(null),[x,f]=g.useState(!1);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"üìÑ Analyse de Documents"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"Uploadez un document (PDF, image, texte) et l'IA analysera et proposera un email adapt√©"})]}),e.jsx("div",{className:"flex items-center justify-between max-w-3xl mx-auto",children:[{num:1,label:"Upload",icon:Ce},{num:2,label:"Analyse",icon:P},{num:3,label:"Destinataire",icon:ae},{num:4,label:"Email",icon:$}].map((s,r)=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"w-12 h-12 rounded-full flex items-center justify-center "+(t>=s.num?"bg-primary-600 text-white":"bg-gray-200 text-gray-400"),children:e.jsx(s.icon,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-xs mt-2 font-medium",children:s.label})]}),r<3&&e.jsx("div",{className:"flex-1 h-1 mx-2 "+(t>s.num?"bg-primary-600":"bg-gray-200")})]},s.num))}),e.jsxs(D,{mode:"wait",children:[1===t&&e.jsxs(A.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"card max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"1Ô∏è‚É£ T√©l√©chargez votre document"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center hover:border-primary-500 transition-colors cursor-pointer",children:[e.jsx("input",{type:"file",id:"file-upload",className:"hidden",accept:".pdf,.docx,.txt,.png,.jpg,.jpeg",onChange:e=>{const t=e.target.files[0];t&&(n(t),Yt.success(`üìÑ Fichier charg√©: ${t.name}`))}}),e.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[e.jsx(Ce,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-lg font-medium text-gray-700",children:"Cliquez pour s√©lectionner un fichier"}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"PDF, DOCX, TXT, PNG, JPG (max 10MB)"}),r&&e.jsxs("div",{className:"mt-4 inline-flex items-center gap-2 px-4 py-2 bg-green-50 border border-green-200 rounded-lg",children:[e.jsx(R,{className:"w-5 h-5 text-green-600"}),e.jsx("span",{className:"text-green-800 font-medium",children:r.name})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contexte additionnel (optionnel)"}),e.jsx("textarea",{value:a,onChange:e=>i(e.target.value),className:"input min-h-[100px]",placeholder:"Ex: C'est une facture non pay√©e, je veux contester le montant..."})]}),e.jsx("button",{onClick:async()=>{if(r){f(!0);try{const e=new FormData;e.append("file",r),e.append("context",a);const t=await fetch("/api/analyze-document",{method:"POST",body:e}),n=await t.json();n.success?(l(n.analysis),d(n.suggested_recipients||[]),s(2),Yt.success("‚úÖ Document analys√© avec succ√®s!")):Yt.error(n.error||"Erreur lors de l'analyse")}catch(e){Yt.error("Erreur lors de l'analyse du document")}finally{f(!1)}}else Yt.error("Veuillez s√©lectionner un fichier")},disabled:!r||x,className:"btn btn-primary w-full",children:x?e.jsxs("span",{className:"flex items-center justify-center",children:[e.jsxs("svg",{className:"animate-spin h-5 w-5 mr-3",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Analyse en cours..."]}):e.jsxs(e.Fragment,{children:[e.jsx(P,{className:"w-5 h-5 mr-2"}),"Analyser avec l'IA"]})})]})]},"upload"),(2===t||3===t)&&o&&e.jsxs(A.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"space-y-6",children:[e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(P,{className:"w-6 h-6 text-primary-600"}),"2Ô∏è‚É£ R√©sultats de l'analyse"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:"Type de document"}),e.jsx("p",{className:"text-lg font-bold text-blue-900",children:o.type_document})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-purple-600 font-medium",children:"Urgence"}),e.jsx("p",{className:"text-lg font-bold text-purple-900",children:o.urgence||"Moyenne"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg md:col-span-2",children:[e.jsx("p",{className:"text-sm text-green-600 font-medium mb-2",children:"Sujet principal"}),e.jsx("p",{className:"text-gray-800",children:o.sujet_principal})]}),o.action_requise&&e.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg md:col-span-2",children:[e.jsx("p",{className:"text-sm text-orange-600 font-medium mb-2",children:"Action recommand√©e"}),e.jsx("p",{className:"text-gray-800",children:o.action_requise})]})]}),e.jsx("button",{onClick:()=>s(3),className:"btn btn-primary w-full mt-4",children:"Continuer ‚Üí Choisir le destinataire"})]}),3===t&&e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(ae,{className:"w-6 h-6 text-primary-600"}),"3Ô∏è‚É£ Destinataires sugg√©r√©s"]}),c.length>0?e.jsx("div",{className:"space-y-3",children:c.map((t,r)=>e.jsx(A.button,{onClick:()=>(async e=>{m(e),f(!0);try{const t=await fetch("/api/generate-email-from-analysis",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({analysis:o,recipient:e})}),r=await t.json();r.success&&(p(r.email),s(4),Yt.success("‚úâÔ∏è Email g√©n√©r√©!"))}catch(t){Yt.error("Erreur lors de la g√©n√©ration")}finally{f(!1)}})(t),whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full p-4 bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl text-left hover:border-blue-400 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Se,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-1"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-bold text-gray-900",children:t.name}),t.email&&e.jsx("p",{className:"text-sm text-gray-600",children:t.email}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full",children:t.category}),e.jsxs("span",{className:"text-xs px-2 py-1 bg-purple-100 text-purple-700 rounded-full",children:["Ton: ",t.tone_recommende]})]})]}),e.jsx(H,{className:"w-6 h-6 text-blue-600"})]})},r))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx(he,{className:"w-12 h-12 mx-auto mb-3 text-gray-400"}),e.jsx("p",{children:"Aucun destinataire sugg√©r√©"}),e.jsx("p",{className:"text-sm mt-2",children:"Vous pourrez saisir manuellement l'adresse"})]}),e.jsx("div",{className:"mt-4 pt-4 border-t",children:e.jsxs("button",{className:"btn btn-secondary w-full",children:[e.jsx(oe,{className:"w-5 h-5 mr-2"}),"Rechercher un autre destinataire"]})})]})]},"analysis"),4===t&&h&&e.jsxs(A.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},className:"card max-w-3xl mx-auto",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx($,{className:"w-6 h-6 text-primary-600"}),"4Ô∏è‚É£ Email g√©n√©r√© par l'IA"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Destinataire"}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("p",{className:"font-medium",children:null==u?void 0:u.name}),(null==u?void 0:u.email)&&e.jsx("p",{className:"text-sm text-gray-600",children:u.email})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sujet"}),e.jsx("input",{type:"text",value:h.sujet,className:"input",readOnly:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Corps de l'email"}),e.jsx("textarea",{value:h.corps,className:"input min-h-[300px]",readOnly:!0})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:async()=>{const e=new URLSearchParams({recipient:u.email||"",subject:h.sujet||"",body:h.corps||""});window.location.href=`/send?${e.toString()}`},className:"btn btn-primary flex-1",children:[e.jsx($,{className:"w-5 h-5 mr-2"}),"Envoyer cet email"]}),e.jsx("button",{onClick:()=>{s(1),n(null),l(null),d([]),p(null)},className:"btn btn-secondary",children:"Nouveau document"})]})]})]},"email")]})]})}function dr(){const[t,s]=g.useState({custom:[],frequent:[],institutions:{}}),[r,n]=g.useState(""),[a,i]=g.useState(!1),[o,l]=g.useState({name:"",email:"",organization:"",category:"custom"}),[c,d]=g.useState(!1);g.useEffect(()=>{u()},[]);const u=async()=>{try{const e=await fetch("/api/contacts"),t=await e.json();t.success&&s(t.contacts)}catch(e){Yt.error("Erreur lors du chargement des contacts")}},m=[...t.custom,...t.frequent],h=r?m.filter(e=>e.name.toLowerCase().includes(r.toLowerCase())||e.email.toLowerCase().includes(r.toLowerCase())):m;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"üë• R√©pertoire de Contacts"}),e.jsx("p",{className:"text-gray-600 mt-2",children:"G√©rez vos destinataires et trouvez automatiquement les emails d'institutions"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Contacts sauvegard√©s"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.custom.length})]}),e.jsx(ae,{className:"w-10 h-10 text-blue-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Contacts fr√©quents"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.frequent.length})]}),e.jsx($,{className:"w-10 h-10 text-green-500"})]})}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Institutions"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Object.keys(t.institutions).length})]}),e.jsx(Se,{className:"w-10 h-10 text-purple-500"})]})})]}),e.jsx("div",{className:"card",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",value:r,onChange:e=>n(e.target.value),className:"input pl-10 w-full",placeholder:"Rechercher un contact ou une institution..."})]}),e.jsxs("button",{onClick:async()=>{if(r.trim()){d(!0);try{const e=await fetch("/api/contacts/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:r})}),t=await e.json();t.success&&t.results.length>0?Yt.success(`${t.results.length} r√©sultat(s) trouv√©(s)!`):Yt.error("Aucun r√©sultat trouv√©")}catch(e){Yt.error("Erreur lors de la recherche")}finally{d(!1)}}else Yt.error("Entrez un nom d'institution")},disabled:c,className:"btn btn-secondary",children:[e.jsx(oe,{className:"w-5 h-5 mr-2"}),"Rechercher institution"]}),e.jsxs("button",{onClick:()=>i(!0),className:"btn btn-primary",children:[e.jsx(Te,{className:"w-5 h-5 mr-2"}),"Ajouter"]})]})}),e.jsxs("div",{className:"card",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4",children:["Mes contacts (",h.length,")"]}),h.length>0?e.jsx("div",{className:"space-y-2",children:h.map((t,s)=>{var r;return e.jsx(A.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.05*s},className:"p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-full flex items-center justify-center text-white font-bold",children:t.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:t.name}),e.jsx("p",{className:"text-sm text-gray-600",children:t.email}),(null==(r=t.metadata)?void 0:r.organization)&&e.jsx("p",{className:"text-xs text-gray-500",children:t.metadata.organization})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.email_count>0&&e.jsxs("span",{className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-full",children:[t.email_count," email",t.email_count>1?"s":""]}),e.jsx("button",{onClick:()=>(async e=>{if(confirm("Supprimer ce contact ?"))try{(await fetch(`/api/contacts/${encodeURIComponent(e)}`,{method:"DELETE"})).ok&&(Yt.success("Contact supprim√©"),u())}catch(t){Yt.error("Erreur lors de la suppression")}})(t.email),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx(_e,{className:"w-4 h-4"})})]})]})},s)})}):e.jsxs("div",{className:"text-center py-12 text-gray-500",children:[e.jsx(ae,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{children:"Aucun contact trouv√©"}),e.jsxs("button",{onClick:()=>i(!0),className:"btn btn-primary mt-4",children:[e.jsx(Te,{className:"w-5 h-5 mr-2"}),"Ajouter votre premier contact"]})]})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(A.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"card max-w-md w-full",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Ajouter un contact"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nom *"}),e.jsx("input",{type:"text",value:o.name,onChange:e=>l({...o,name:e.target.value}),className:"input",placeholder:"Nom du contact"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",value:o.email,onChange:e=>l({...o,email:e.target.value}),className:"input",placeholder:"email@example.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Organisation"}),e.jsx("input",{type:"text",value:o.organization,onChange:e=>l({...o,organization:e.target.value}),className:"input",placeholder:"Nom de l'organisation (optionnel)"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:async()=>{if(o.name&&o.email){d(!0);try{const e=await fetch("/api/contacts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),t=await e.json();t.success?(Yt.success("‚úÖ Contact ajout√©!"),i(!1),l({name:"",email:"",organization:"",category:"custom"}),u()):Yt.error(t.error)}catch(e){Yt.error("Erreur lors de l'ajout")}finally{d(!1)}}else Yt.error("Nom et email requis")},disabled:c,className:"btn btn-primary flex-1",children:c?"Ajout...":"Ajouter"}),e.jsx("button",{onClick:()=>{i(!1),l({name:"",email:"",organization:"",category:"custom"})},className:"btn btn-secondary",children:"Annuler"})]})]})]})})]})}function ur(){const[t,s]=g.useState([]),[r,n]=g.useState([]),[a,i]=g.useState(null),[o,l]=g.useState({}),[c,d]=g.useState(null),[u,m]=g.useState(!1),[h,p]=g.useState(!1),[x,f]=g.useState(new Set),[b,y]=g.useState({search:"",dateFrom:"",dateTo:"",domain:"",type:"",isImportant:null,isReplied:null,deadlinePassed:!1,hasAttachments:null,showUnreadOnly:!1}),[j,v]=g.useState(!1),[N,w]=g.useState("list");g.useEffect(()=>{E(),C()},[]),g.useEffect(()=>{k()},[t,b]);const E=async()=>{m(!0);try{const e=await fetch("/api/inbox",{credentials:"include"}),t=await e.json();t.success&&(s(t.emails||[]),l(t.threads||{}))}catch(e){}finally{m(!1)}},C=async()=>{try{const e=await fetch("/api/inbox/statistics",{credentials:"include"}),t=await e.json();t.success&&d(t.statistics)}catch(e){}},k=()=>{let e=[...t];if(b.search){const t=b.search.toLowerCase();e=e.filter(e=>e.subject.toLowerCase().includes(t)||e.from.toLowerCase().includes(t)||e.body.toLowerCase().includes(t))}if(b.dateFrom){const t=new Date(b.dateFrom);e=e.filter(e=>new Date(e.date)>=t)}if(b.dateTo){const t=new Date(b.dateTo);e=e.filter(e=>new Date(e.date)<=t)}if(b.domain&&(e=e.filter(e=>e.domain.toLowerCase().includes(b.domain.toLowerCase()))),b.type&&(e=e.filter(e=>e.type===b.type)),null!==b.isImportant&&(e=e.filter(e=>e.is_important===b.isImportant)),null!==b.isReplied&&(e=e.filter(e=>e.is_replied===b.isReplied)),b.deadlinePassed){const t=new Date;e=e.filter(e=>new Date(e.response_deadline)<t&&!e.is_replied)}null!==b.hasAttachments&&(e=e.filter(e=>e.has_attachments===b.hasAttachments)),b.showUnreadOnly&&(e=e.filter(e=>!e.is_read)),n(e)},S=async e=>{try{await fetch(`http://127.0.0.1:5000/api/inbox/${e}/read`,{method:"POST",credentials:"include"}),s(t=>t.map(t=>t.message_id===e?{...t,is_read:!0}:t))}catch(t){}},T=async e=>{try{await fetch(`http://127.0.0.1:5000/api/inbox/${e}/replied`,{method:"POST",credentials:"include"}),s(t=>t.map(t=>t.message_id===e?{...t,is_replied:!0}:t))}catch(t){}},_=e=>{const t={urgent:"bg-red-100 text-red-700",facture:"bg-blue-100 text-blue-700",reponse:"bg-green-100 text-green-700",administratif:"bg-purple-100 text-purple-700",newsletter:"bg-gray-100 text-gray-700",confirmation:"bg-teal-100 text-teal-700",general:"bg-slate-100 text-slate-700"};return t[e]||t.general},O=e=>{const t=new Date(e),s=new Date,r=s-t,n=Math.floor(r/36e5);return n<1?"√Ä l'instant":n<24?`Il y a ${n}h`:n<48?"Hier":t.toLocaleDateString("fr-FR",{day:"numeric",month:"short",year:t.getFullYear()!==s.getFullYear()?"numeric":void 0})},R=({email:t,isInThread:s=!1})=>{return e.jsx(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:`bg-white rounded-lg border ${t.is_read?"border-gray-200":"border-blue-300 bg-blue-50/30"} p-4 hover:shadow-md transition-all cursor-pointer ${s?"ml-8":""}`,onClick:()=>{i(t),t.is_read||S(t.message_id)},children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(q,{className:"w-4 h-4 text-gray-400 flex-shrink-0"}),e.jsx("span",{className:`text-sm ${t.is_read?"font-medium":"font-semibold"} truncate`,children:t.from}),e.jsx("span",{className:"text-xs text-gray-400 flex-shrink-0",children:t.domain})]}),e.jsx("h3",{className:"text-base mb-2 truncate "+(t.is_read?"font-medium text-gray-700":"font-bold text-gray-900"),children:t.subject}),e.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:t.body}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${_(t.type)}`,children:t.type}),t.is_important&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-orange-100 text-orange-700 rounded text-xs font-medium",children:[e.jsx(Ae,{className:"w-3 h-3"}),"Important"]}),t.has_attachments&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs font-medium",children:[e.jsx(De,{className:"w-3 h-3"}),"PJ"]}),t.is_replied&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:[e.jsx(H,{className:"w-3 h-3"}),"R√©pondu"]}),(r=t.response_deadline,new Date(r)<new Date&&!t.is_replied&&e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-red-100 text-red-700 rounded text-xs font-medium",children:[e.jsx(he,{className:"w-3 h-3"}),"En retard"]})),t.tags&&t.tags.map(t=>e.jsxs("span",{className:"flex items-center gap-1 px-2 py-1 bg-gray-100 text-gray-700 rounded text-xs",children:[e.jsx(Ie,{className:"w-3 h-3"}),t]},t))]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2 flex-shrink-0",children:[e.jsx("span",{className:"text-xs text-gray-500",children:O(t.date)}),e.jsxs("div",{className:"flex gap-1",children:[!t.is_read&&e.jsx("button",{onClick:e=>{e.stopPropagation(),S(t.message_id)},className:"p-1 hover:bg-blue-100 rounded",title:"Marquer comme lu",children:e.jsx(M,{className:"w-4 h-4 text-blue-600"})}),!t.is_replied&&e.jsx("button",{onClick:e=>{e.stopPropagation(),T(t.message_id)},className:"p-1 hover:bg-green-100 rounded",title:"Marquer comme r√©pondu",children:e.jsx(H,{className:"w-4 h-4 text-green-600"})})]})]})]})});var r};return e.jsxs("div",{className:"p-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl",children:e.jsx(Oe,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bo√Æte de r√©ception"}),e.jsx("p",{className:"text-gray-600",children:"G√©rez tous vos emails re√ßus"})]})]}),e.jsx("div",{className:"flex gap-3",children:e.jsxs("button",{onClick:async()=>{p(!0);try{const e=await fetch("/api/inbox/sync",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({days_back:30})}),t=await e.json();t.success&&(await E(),await C(),alert(`${t.fetched_count} nouveaux emails synchronis√©s`))}catch(e){alert("Erreur lors de la synchronisation")}finally{p(!1)}},disabled:h,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[e.jsx(xe,{className:"w-4 h-4 "+(h?"animate-spin":"")}),h?"Synchronisation...":"Synchroniser"]})})]}),c&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Total"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.total_emails})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-blue-300 bg-blue-50/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Non lus"})]}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:c.unread})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(U,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Sans r√©ponse"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.unreplied})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-orange-300 bg-orange-50/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ae,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Importants"})]}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:c.important})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-red-300 bg-red-50/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(he,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"En retard"})]}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:c.overdue})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(U,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Discussions"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.total_threads})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(se,{className:"w-4 h-4 text-gray-600"}),e.jsx("span",{className:"text-xs text-gray-600",children:"Temps moy."})]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Math.round(c.avg_response_time),"h"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg p-4 mb-6 border border-gray-200",children:[e.jsxs("div",{className:"flex gap-3 mb-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(oe,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),e.jsx("input",{type:"text",placeholder:"Rechercher dans les emails...",value:b.search,onChange:e=>y(t=>({...t,search:e.target.value})),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("button",{onClick:()=>v(!j),className:"flex items-center gap-2 px-4 py-2 rounded-lg border "+(j?"bg-blue-50 border-blue-300 text-blue-700":"border-gray-300 text-gray-700"),children:[e.jsx(Re,{className:"w-4 h-4"}),"Filtres"]}),e.jsxs("div",{className:"flex gap-2 border-l pl-3",children:[e.jsx("button",{onClick:()=>w("list"),className:"px-3 py-2 rounded "+("list"===N?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:"Liste"}),e.jsx("button",{onClick:()=>w("threads"),className:"px-3 py-2 rounded "+("threads"===N?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100"),children:"Discussions"})]})]}),e.jsx(D,{children:j&&e.jsxs(A.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date d√©but"}),e.jsx("input",{type:"date",value:b.dateFrom,onChange:e=>y(t=>({...t,dateFrom:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date fin"}),e.jsx("input",{type:"date",value:b.dateTo,onChange:e=>y(t=>({...t,dateTo:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Domaine"}),e.jsx("input",{type:"text",placeholder:"exemple.com",value:b.domain,onChange:e=>y(t=>({...t,domain:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Type"}),e.jsxs("select",{value:b.type,onChange:e=>y(t=>({...t,type:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm",children:[e.jsx("option",{value:"",children:"Tous"}),e.jsx("option",{value:"urgent",children:"Urgent"}),e.jsx("option",{value:"facture",children:"Facture"}),e.jsx("option",{value:"reponse",children:"R√©ponse"}),e.jsx("option",{value:"administratif",children:"Administratif"}),e.jsx("option",{value:"newsletter",children:"Newsletter"}),e.jsx("option",{value:"confirmation",children:"Confirmation"}),e.jsx("option",{value:"general",children:"G√©n√©ral"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"important",checked:!0===b.isImportant,onChange:e=>y(t=>({...t,isImportant:!!e.target.checked||null})),className:"w-4 h-4 text-blue-600"}),e.jsx("label",{htmlFor:"important",className:"text-sm text-gray-700",children:"Importants uniquement"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"unreplied",checked:!1===b.isReplied,onChange:e=>y(t=>({...t,isReplied:!e.target.checked&&null})),className:"w-4 h-4 text-blue-600"}),e.jsx("label",{htmlFor:"unreplied",className:"text-sm text-gray-700",children:"Sans r√©ponse"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"overdue",checked:b.deadlinePassed,onChange:e=>y(t=>({...t,deadlinePassed:e.target.checked})),className:"w-4 h-4 text-blue-600"}),e.jsx("label",{htmlFor:"overdue",className:"text-sm text-gray-700",children:"Deadline pass√©e"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"unread",checked:b.showUnreadOnly,onChange:e=>y(t=>({...t,showUnreadOnly:e.target.checked})),className:"w-4 h-4 text-blue-600"}),e.jsx("label",{htmlFor:"unread",className:"text-sm text-gray-700",children:"Non lus uniquement"})]})]})})]}),e.jsx("div",{className:"space-y-3",children:u?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xe,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Chargement des emails..."})]}):0===r.length?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[e.jsx($,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Aucun email trouv√©"})]}):r.map(t=>e.jsx(R,{email:t},t.message_id))}),e.jsx(D,{children:a&&e.jsx(A.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",onClick:()=>i(null),children:e.jsx(A.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:a.subject}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["De: ",a.from]}),e.jsx("span",{children:"‚Ä¢"}),e.jsx("span",{children:new Date(a.date).toLocaleString("fr-FR")})]})]}),e.jsx("button",{onClick:()=>i(null),className:"text-gray-400 hover:text-gray-600",children:"‚úï"})]}),e.jsx("div",{className:"prose max-w-none mb-6",children:e.jsx("div",{className:"whitespace-pre-wrap text-gray-700",children:a.body})}),e.jsxs("div",{className:"flex gap-3 pt-6 border-t",children:[e.jsxs("button",{onClick:()=>{window.location.href=`/send?reply_to=${a.message_id}`},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(U,{className:"w-4 h-4"}),"R√©pondre"]}),!a.is_replied&&e.jsxs("button",{onClick:()=>T(a.message_id),className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(H,{className:"w-4 h-4"}),"Marquer comme r√©pondu"]})]})]})})})})]})}t.register(s,r,n,a,i,o,l,c,d,u);const mr=Object.create(null);mr.open="0",mr.close="1",mr.ping="2",mr.pong="3",mr.message="4",mr.upgrade="5",mr.noop="6";const hr=Object.create(null);Object.keys(mr).forEach(e=>{hr[mr[e]]=e});const pr={type:"error",data:"parser error"},xr="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),fr="function"==typeof ArrayBuffer,gr=e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,br=({type:e,data:t},s,r)=>xr&&t instanceof Blob?s?r(t):yr(t,r):fr&&(t instanceof ArrayBuffer||gr(t))?s?r(t):yr(new Blob([t]),r):r(mr[e]+(t||"")),yr=(e,t)=>{const s=new FileReader;return s.onload=function(){const e=s.result.split(",")[1];t("b"+(e||""))},s.readAsDataURL(e)};function jr(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let vr;const Nr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",wr="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let Mo=0;Mo<64;Mo++)wr[Nr.charCodeAt(Mo)]=Mo;const Er="function"==typeof ArrayBuffer,Cr=(e,t)=>{if("string"!=typeof e)return{type:"message",data:Sr(e,t)};const s=e.charAt(0);if("b"===s)return{type:"message",data:kr(e.substring(1),t)};return hr[s]?e.length>1?{type:hr[s],data:e.substring(1)}:{type:hr[s]}:pr},kr=(e,t)=>{if(Er){const s=(e=>{let t,s,r,n,a,i=.75*e.length,o=e.length,l=0;"="===e[e.length-1]&&(i--,"="===e[e.length-2]&&i--);const c=new ArrayBuffer(i),d=new Uint8Array(c);for(t=0;t<o;t+=4)s=wr[e.charCodeAt(t)],r=wr[e.charCodeAt(t+1)],n=wr[e.charCodeAt(t+2)],a=wr[e.charCodeAt(t+3)],d[l++]=s<<2|r>>4,d[l++]=(15&r)<<4|n>>2,d[l++]=(3&n)<<6|63&a;return c})(e);return Sr(s,t)}return{base64:!0,data:e}},Sr=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Tr=String.fromCharCode(30);function _r(){return new TransformStream({transform(e,t){!function(e,t){xr&&e.data instanceof Blob?e.data.arrayBuffer().then(jr).then(t):fr&&(e.data instanceof ArrayBuffer||gr(e.data))?t(jr(e.data)):br(e,!1,e=>{vr||(vr=new TextEncoder),t(vr.encode(e))})}(e,s=>{const r=s.length;let n;if(r<126)n=new Uint8Array(1),new DataView(n.buffer).setUint8(0,r);else if(r<65536){n=new Uint8Array(3);const e=new DataView(n.buffer);e.setUint8(0,126),e.setUint16(1,r)}else{n=new Uint8Array(9);const e=new DataView(n.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(r))}e.data&&"string"!=typeof e.data&&(n[0]|=128),t.enqueue(n),t.enqueue(s)})}})}let Or;function Ar(e){return e.reduce((e,t)=>e+t.length,0)}function Rr(e,t){if(e[0].length===t)return e.shift();const s=new Uint8Array(t);let r=0;for(let n=0;n<t;n++)s[n]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),s}function Dr(e){if(e)return function(e){for(var t in Dr.prototype)e[t]=Dr.prototype[t];return e}(e)}Dr.prototype.on=Dr.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},Dr.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this},Dr.prototype.off=Dr.prototype.removeListener=Dr.prototype.removeAllListeners=Dr.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,r=this._callbacks["$"+e];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var n=0;n<r.length;n++)if((s=r[n])===t||s.fn===t){r.splice(n,1);break}return 0===r.length&&delete this._callbacks["$"+e],this},Dr.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(s){r=0;for(var n=(s=s.slice(0)).length;r<n;++r)s[r].apply(this,t)}return this},Dr.prototype.emitReserved=Dr.prototype.emit,Dr.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},Dr.prototype.hasListeners=function(e){return!!this.listeners(e).length};const Ir="function"==typeof Promise&&"function"==typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),Pr="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")();function Lr(e,...t){return t.reduce((t,s)=>(e.hasOwnProperty(s)&&(t[s]=e[s]),t),{})}const Fr=Pr.setTimeout,Mr=Pr.clearTimeout;function Br(e,t){t.useNativeTimers?(e.setTimeoutFn=Fr.bind(Pr),e.clearTimeoutFn=Mr.bind(Pr)):(e.setTimeoutFn=Pr.setTimeout.bind(Pr),e.clearTimeoutFn=Pr.clearTimeout.bind(Pr))}function Ur(e){return"string"==typeof e?function(e){let t=0,s=0;for(let r=0,n=e.length;r<n;r++)t=e.charCodeAt(r),t<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(r++,s+=4);return s}(e):Math.ceil(1.33*(e.byteLength||e.size))}function zr(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class qr extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class Vr extends Dr{constructor(e){super(),this.writable=!1,Br(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new qr(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Cr(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(443!==this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t}(e);return t.length?"?"+t:""}}class $r extends Vr{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const s=e.split(Tr),r=[];for(let n=0;n<s.length;n++){const e=Cr(s[n],t);if(r.push(e),"error"===e.type)break}return r})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const s=e.length,r=new Array(s);let n=0;e.forEach((e,a)=>{br(e,!1,e=>{r[a]=e,++n===s&&t(r.join(Tr))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=zr()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let Jr=!1;try{Jr="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(Fo){}const Hr=Jr;function Kr(){}class Wr extends $r{constructor(e){if(super(e),"undefined"!=typeof location){const t="https:"===location.protocol;let s=location.port;s||(s=t?"443":"80"),this.xd="undefined"!=typeof location&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class Gr extends Dr{constructor(e,t,s){super(),this.createRequest=e,Br(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=void 0!==s.data?s.data:null,this._create()}_create(){var e;const t=Lr(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&s.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(Et){}if("POST"===this._method)try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(Et){}try{s.setRequestHeader("Accept","*/*")}catch(Et){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var e;3===s.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(s.getResponseHeader("set-cookie"))),4===s.readyState&&(200===s.status||1223===s.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"==typeof s.status?s.status:0)},0))},s.send(this._data)}catch(Et){return void this.setTimeoutFn(()=>{this._onError(Et)},0)}"undefined"!=typeof document&&(this._index=Gr.requestsCount++,Gr.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(void 0!==this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=Kr,e)try{this._xhr.abort()}catch(Et){}"undefined"!=typeof document&&delete Gr.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(Gr.requestsCount=0,Gr.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",Xr);else if("function"==typeof addEventListener){addEventListener("onpagehide"in Pr?"pagehide":"unload",Xr,!1)}function Xr(){for(let e in Gr.requests)Gr.requests.hasOwnProperty(e)&&Gr.requests[e].abort()}const Yr=function(){const e=Qr({xdomain:!1});return e&&null!==e.responseType}();function Qr(e){const t=e.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!t||Hr))return new XMLHttpRequest}catch(Et){}if(!t)try{return new(Pr[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(Et){}}const Zr="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class en extends Vr{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=Zr?{}:Lr(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(Fo){return this.emitReserved("error",Fo)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;br(s,this.supportsBinary,e=>{try{this.doWrite(s,e)}catch(Et){}r&&Ir(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=zr()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const tn=Pr.WebSocket||Pr.MozWebSocket;const sn={websocket:class extends en{createSocket(e,t,s){return Zr?new tn(e,t,s):t?new tn(e,t):new tn(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends Vr{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(Fo){return this.emitReserved("error",Fo)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=function(e,t){Or||(Or=new TextDecoder);const s=[];let r=0,n=-1,a=!1;return new TransformStream({transform(i,o){for(s.push(i);;){if(0===r){if(Ar(s)<1)break;const e=Rr(s,1);a=!(128&~e[0]),n=127&e[0],r=n<126?3:126===n?1:2}else if(1===r){if(Ar(s)<2)break;const e=Rr(s,2);n=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),r=3}else if(2===r){if(Ar(s)<8)break;const e=Rr(s,8),t=new DataView(e.buffer,e.byteOffset,e.length),a=t.getUint32(0);if(a>Math.pow(2,21)-1){o.enqueue(pr);break}n=a*Math.pow(2,32)+t.getUint32(4),r=3}else{if(Ar(s)<n)break;const e=Rr(s,n);o.enqueue(Cr(a?e:Or.decode(e),t)),r=0}if(0===n||n>e){o.enqueue(pr);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),r=_r();r.readable.pipeTo(e.writable),this._writer=r.writable.getWriter();const n=()=>{s.read().then(({done:e,value:t})=>{e||(this.onPacket(t),n())}).catch(e=>{})};n();const a={type:"open"};this.query.sid&&(a.data=`{"sid":"${this.query.sid}"}`),this._writer.write(a).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],r=t===e.length-1;this._writer.write(s).then(()=>{r&&Ir(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends Wr{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Yr&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new Gr(Qr,this.uri(),e)}}},rn=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,nn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function an(e){if(e.length>8e3)throw"URI too long";const t=e,s=e.indexOf("["),r=e.indexOf("]");-1!=s&&-1!=r&&(e=e.substring(0,s)+e.substring(s,r).replace(/:/g,";")+e.substring(r,e.length));let n=rn.exec(e||""),a={},i=14;for(;i--;)a[nn[i]]=n[i]||"";return-1!=s&&-1!=r&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=function(e,t){const s=/\/{2,9}/g,r=t.replace(s,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||r.splice(0,1);"/"==t.slice(-1)&&r.splice(r.length-1,1);return r}(0,a.path),a.queryKey=function(e,t){const s={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,r){t&&(s[t]=r)}),s}(0,a.query),a}const on="function"==typeof addEventListener&&"function"==typeof removeEventListener,ln=[];on&&addEventListener("offline",()=>{ln.forEach(e=>e())},!1);class cn extends Dr{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"==typeof e&&(t=e,e=null),e){const s=an(e);t.hostname=s.host,t.secure="https"===s.protocol||"wss"===s.protocol,t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=an(t.host).host);Br(this,t),this.secure=null!=t.secure?t.secure:"undefined"!=typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"==typeof this.opts.query&&(this.opts.query=function(e){let t={},s=e.split("&");for(let r=0,n=s.length;r<n;r++){let e=s[r].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),on&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},ln.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&cn.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",cn.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const s=this.writeBuffer[t].data;if(s&&(e+=Ur(s)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Ir(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,r){if("function"==typeof t&&(r=t,t=void 0),"function"==typeof s&&(r=s,s=null),"closing"===this.readyState||"closed"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;const n={type:e,data:t,options:s};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),r&&this.once("flush",r),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(cn.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),on&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=ln.indexOf(this._offlineEventListener);-1!==e&&ln.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}cn.protocol=4;class dn extends cn{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;cn.priorWebsocketSuccess=!1;const r=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!s)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;cn.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{s||"closed"!==this.readyState&&(c(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function n(){s||(s=!0,c(),t.close(),t=null)}const a=e=>{const s=new Error("probe error: "+e);s.transport=t.name,n(),this.emitReserved("upgradeError",s)};function i(){a("transport closed")}function o(){a("socket closed")}function l(e){t&&e.name!==t.name&&n()}const c=()=>{t.removeListener("open",r),t.removeListener("error",a),t.removeListener("close",i),this.off("close",o),this.off("upgrading",l)};t.once("open",r),t.once("error",a),t.once("close",i),this.once("close",o),this.once("upgrading",l),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}let un=class extends dn{constructor(e,t={}){const s="object"==typeof e?e:t;(!s.transports||s.transports&&"string"==typeof s.transports[0])&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(e=>sn[e]).filter(e=>!!e)),super(e,s)}};const mn="function"==typeof ArrayBuffer,hn=Object.prototype.toString,pn="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===hn.call(Blob),xn="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===hn.call(File);function fn(e){return mn&&(e instanceof ArrayBuffer||(e=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||pn&&e instanceof Blob||xn&&e instanceof File}function gn(e,t){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let t=0,s=e.length;t<s;t++)if(gn(e[t]))return!0;return!1}if(fn(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return gn(e.toJSON(),!0);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&gn(e[s]))return!0;return!1}function bn(e){const t=[],s=e.data,r=e;return r.data=yn(s,t),r.attachments=t.length,{packet:r,buffers:t}}function yn(e,t){if(!e)return e;if(fn(e)){const s={_placeholder:!0,num:t.length};return t.push(e),s}if(Array.isArray(e)){const s=new Array(e.length);for(let r=0;r<e.length;r++)s[r]=yn(e[r],t);return s}if("object"==typeof e&&!(e instanceof Date)){const s={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(s[r]=yn(e[r],t));return s}return e}function jn(e,t){return e.data=vn(e.data,t),delete e.attachments,e}function vn(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"==typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let s=0;s<e.length;s++)e[s]=vn(e[s],t);else if("object"==typeof e)for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=vn(e[s],t));return e}const Nn=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var wn,En;(En=wn||(wn={}))[En.CONNECT=0]="CONNECT",En[En.DISCONNECT=1]="DISCONNECT",En[En.EVENT=2]="EVENT",En[En.ACK=3]="ACK",En[En.CONNECT_ERROR=4]="CONNECT_ERROR",En[En.BINARY_EVENT=5]="BINARY_EVENT",En[En.BINARY_ACK=6]="BINARY_ACK";function Cn(e){return"[object Object]"===Object.prototype.toString.call(e)}class kn extends Dr{constructor(e){super(),this.reviver=e}add(e){let t;if("string"==typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===wn.BINARY_EVENT;s||t.type===wn.BINARY_ACK?(t.type=s?wn.EVENT:wn.ACK,this.reconstructor=new Sn(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!fn(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(void 0===wn[s.type])throw new Error("unknown packet type "+s.type);if(s.type===wn.BINARY_EVENT||s.type===wn.BINARY_ACK){const r=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const n=e.substring(r,t);if(n!=Number(n)||"-"!==e.charAt(t))throw new Error("Illegal attachments");s.attachments=Number(n)}if("/"===e.charAt(t+1)){const r=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}s.nsp=e.substring(r,t)}else s.nsp="/";const r=e.charAt(t+1);if(""!==r&&Number(r)==r){const r=t+1;for(;++t;){const s=e.charAt(t);if(null==s||Number(s)!=s){--t;break}if(t===e.length)break}s.id=Number(e.substring(r,t+1))}if(e.charAt(++t)){const r=this.tryParse(e.substr(t));if(!kn.isPayloadValid(s.type,r))throw new Error("invalid payload");s.data=r}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(Et){return!1}}static isPayloadValid(e,t){switch(e){case wn.CONNECT:return Cn(t);case wn.DISCONNECT:return void 0===t;case wn.CONNECT_ERROR:return"string"==typeof t||Cn(t);case wn.EVENT:case wn.BINARY_EVENT:return Array.isArray(t)&&("number"==typeof t[0]||"string"==typeof t[0]&&-1===Nn.indexOf(t[0]));case wn.ACK:case wn.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Sn{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=jn(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Tn=Object.freeze(Object.defineProperty({__proto__:null,Decoder:kn,Encoder:class{constructor(e){this.replacer=e}encode(e){return e.type!==wn.EVENT&&e.type!==wn.ACK||!gn(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===wn.EVENT?wn.BINARY_EVENT:wn.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==wn.BINARY_EVENT&&e.type!==wn.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=bn(e),s=this.encodeAsString(t.packet),r=t.buffers;return r.unshift(s),r}},get PacketType(){return wn},protocol:5},Symbol.toStringTag,{value:"Module"}));function _n(e,t,s){return e.on(t,s),function(){e.off(t,s)}}const On=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class An extends Dr{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[_n(e,"open",this.onopen.bind(this)),_n(e,"packet",this.onpacket.bind(this)),_n(e,"error",this.onerror.bind(this)),_n(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var s,r,n;if(On.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const a={type:wn.EVENT,data:t,options:{}};if(a.options.compress=!1!==this.flags.compress,"function"==typeof t[t.length-1]){const e=this.ids++,s=t.pop();this._registerAckCallback(e,s),a.id=e}const i=null===(r=null===(s=this.io.engine)||void 0===s?void 0:s.transport)||void 0===r?void 0:r.writable,o=this.connected&&!(null===(n=this.io.engine)||void 0===n?void 0:n._hasPingExpired());return this.flags.volatile&&!i||(o?(this.notifyOutgoingListeners(a),this.packet(a)):this.sendBuffer.push(a)),this.flags={},this}_registerAckCallback(e,t){var s;const r=null!==(s=this.flags.timeout)&&void 0!==s?s:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const n=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},r),a=(...e)=>{this.io.clearTimeoutFn(n),t.apply(this,e)};a.withError=!0,this.acks[e]=a}emitWithAck(e,...t){return new Promise((s,r)=>{const n=(e,t)=>e?r(e):s(t);n.withError=!0,t.push(n),this.emit(e,...t)})}_addToQueue(e){let t;"function"==typeof e[e.length-1]&&(t=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((e,...r)=>{if(s!==this._queue[0])return;return null!==e?s.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(e)):(this._queue.shift(),t&&t(null,...r)),s.pending=!1,this._drainQueue()}),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:wn.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case wn.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case wn.EVENT:case wn.BINARY_EVENT:this.onevent(e);break;case wn.ACK:case wn.BINARY_ACK:this.onack(e);break;case wn.DISCONNECT:this.ondisconnect();break;case wn.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"==typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(...r){s||(s=!0,t.packet({type:wn.ACK,id:e,data:r}))}}onack(e){const t=this.acks[e.id];"function"==typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:wn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function Rn(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Rn.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=1&Math.floor(10*t)?e+s:e-s}return 0|Math.min(e,this.max)},Rn.prototype.reset=function(){this.attempts=0},Rn.prototype.setMin=function(e){this.ms=e},Rn.prototype.setMax=function(e){this.max=e},Rn.prototype.setJitter=function(e){this.jitter=e};class Dn extends Dr{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&"object"==typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,Br(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(s=t.randomizationFactor)&&void 0!==s?s:.5),this.backoff=new Rn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||Tn;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new un(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const r=_n(t,"open",function(){s.onopen(),e&&e()}),n=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},a=_n(t,"error",n);if(!1!==this._timeout){const e=this._timeout,s=this.setTimeoutFn(()=>{r(),n(new Error("timeout")),t.close()},e);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}return this.subs.push(r),this.subs.push(a),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(_n(e,"ping",this.onping.bind(this)),_n(e,"data",this.ondata.bind(this)),_n(e,"error",this.onerror.bind(this)),_n(e,"close",this.onclose.bind(this)),_n(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(Et){this.onclose("parse error",Et)}}ondecoded(e){Ir(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new An(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t){if(this.nsps[s].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),null===(s=this.engine)||void 0===s||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const In={};function Pn(e,t){"object"==typeof e&&(t=e,e=void 0);const s=function(e,t="",s){let r=e;s=s||"undefined"!=typeof location&&location,null==e&&(e=s.protocol+"//"+s.host),"string"==typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?s.protocol+e:s.host+e),/^(https?|wss?):\/\//.test(e)||(e=void 0!==s?s.protocol+"//"+e:"https://"+e),r=an(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const n=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+n+":"+r.port+t,r.href=r.protocol+"://"+n+(s&&s.port===r.port?"":":"+r.port),r}(e,(t=t||{}).path||"/socket.io"),r=s.source,n=s.id,a=s.path,i=In[n]&&a in In[n].nsps;let o;return t.forceNew||t["force new connection"]||!1===t.multiplex||i?o=new Dn(r,t):(In[n]||(In[n]=new Dn(r,t)),o=In[n]),s.query&&!t.query&&(t.query=s.queryKey),o.socket(s.path,t)}function Ln(){const[t,s]=g.useState(!1),[r,n]=g.useState(!1),[a,i]=g.useState(""),[o,l]=g.useState([]),[c,d]=g.useState([]),[u,m]=g.useState(null),[h,p]=g.useState(!1),[x,f]=g.useState(null),[b,y]=g.useState(0),[j,v]=g.useState(null),N=g.useRef(null),w=g.useRef(null),E=g.useRef(null),C=g.useRef(null);g.useEffect(()=>(N.current=Pn(window.location.origin,{transports:["websocket","polling"]}),N.current.on("connect",()=>{n(!0),k()}),N.current.on("disconnect",()=>{n(!1)}),N.current.on("transcription_update",e=>{l(t=>[...t,{text:e.text,timestamp:e.timestamp,id:Date.now()}]),i(t=>t+" "+e.text)}),N.current.on("transcription_complete",e=>{i(e.transcript),f(e.audio_file),y(e.duration),T()}),()=>{N.current&&N.current.disconnect(),T()}),[]),g.useEffect(()=>{w.current&&w.current.scrollIntoView({behavior:"smooth"})},[o,a]);const k=async()=>{try{const e=await fetch("/api/voice/devices",{credentials:"include"}),t=await e.json();t.success&&(d(t.devices),t.devices.length>0&&!u&&m(t.devices[0].index))}catch(e){}},S=()=>{E.current=Date.now(),C.current=setInterval(()=>{const e=Math.floor((Date.now()-E.current)/1e3);y(e)},1e3)},T=()=>{C.current&&(clearInterval(C.current),C.current=null)},_=e=>{const t=e%60;return`${Math.floor(e/60).toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}`};return e.jsxs("div",{className:"p-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-red-500 to-pink-600 rounded-xl",children:e.jsx(we,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Transcription Vocale en Temps R√©el"}),e.jsx("p",{className:"text-gray-600",children:"Parlez et voyez le texte appara√Ætre instantan√©ment"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg "+(r?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${r?"bg-green-500":"bg-red-500"} ${r?"animate-pulse":""}`}),e.jsx("span",{className:"text-sm font-medium",children:r?"Connect√©":"D√©connect√©"})]}),e.jsx("button",{onClick:()=>p(!h),className:"p-2 hover:bg-gray-100 rounded-lg",children:e.jsx(V,{className:"w-5 h-5 text-gray-600"})})]})]}),j&&e.jsx(A.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(he,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-red-900 mb-1",children:"Erreur d'acc√®s au microphone"}),e.jsx("p",{className:"text-red-700 text-sm mb-3",children:j}),e.jsxs("div",{className:"bg-white rounded-lg p-3 text-sm space-y-2",children:[e.jsx("p",{className:"font-medium text-gray-900",children:"üîß Solutions rapides:"}),e.jsxs("ul",{className:"space-y-1 text-gray-700 ml-4",children:[e.jsx("li",{children:"‚úì V√©rifiez les permissions Windows (Param√®tres ‚Üí Confidentialit√© ‚Üí Microphone)"}),e.jsx("li",{children:"‚úì Autorisez l'acc√®s au microphone dans votre navigateur"}),e.jsx("li",{children:"‚úì Fermez les applications utilisant le micro (Discord, Teams, etc.)"}),e.jsx("li",{children:"‚úì V√©rifiez que votre microphone est branch√© et activ√©"})]}),e.jsx("a",{href:"/GUIDE_MICROPHONE.md",target:"_blank",className:"text-blue-600 hover:text-blue-700 font-medium inline-flex items-center gap-1 mt-2",children:"üìñ Guide complet de d√©pannage ‚Üí"})]})]}),e.jsx("button",{onClick:()=>v(null),className:"text-red-400 hover:text-red-600",children:"‚úï"})]})}),e.jsx(D,{children:h&&e.jsxs(A.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"bg-white rounded-lg border border-gray-200 p-4 mb-6",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"P√©riph√©rique Audio"}),e.jsx("select",{value:u||"",onChange:e=>m(parseInt(e.target.value)),disabled:t,className:"w-full px-3 py-2 border border-gray-300 rounded-lg disabled:opacity-50",children:c.map(t=>e.jsxs("option",{value:t.index,children:[t.name," (",t.channels," canaux, ",t.sample_rate," Hz)"]},t.index))}),0===c.length&&e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Aucun microphone d√©tect√©"})]})}),j&&e.jsxs(A.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 flex items-start gap-3",children:[e.jsx(he,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-red-800 font-medium",children:"Erreur"}),e.jsx("p",{className:"text-red-600 text-sm",children:j})]}),e.jsx("button",{onClick:()=>v(null),className:"text-red-400 hover:text-red-600",children:"‚úï"})]}),e.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 mb-6",children:e.jsxs("div",{className:"flex flex-col items-center gap-6",children:[e.jsx(A.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t?async()=>{try{const e=await fetch("/api/voice/stop",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}),t=await e.json();t.success?(s(!1),T()):v(t.error||"Erreur arr√™t enregistrement")}catch(e){v("Impossible d'arr√™ter l'enregistrement")}}:async()=>{try{v(null),i(""),l([]),f(null),y(0);const e=await fetch("/api/voice/start",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({device_index:u})}),t=await e.json();t.success?(s(!0),S()):v(t.error||"Erreur d√©marrage enregistrement")}catch(e){v("Impossible de d√©marrer l'enregistrement. V√©rifiez les permissions du microphone.")}},disabled:!r||0===c.length,className:`relative w-32 h-32 rounded-full flex items-center justify-center transition-all shadow-lg ${t?"bg-gradient-to-br from-red-500 to-pink-600":"bg-gradient-to-br from-blue-500 to-purple-600"} ${r&&0!==c.length?"":"opacity-50 cursor-not-allowed"}`,children:t?e.jsxs(e.Fragment,{children:[e.jsx(Pe,{className:"w-16 h-16 text-white"}),e.jsx(A.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1.5},className:"absolute inset-0 rounded-full border-4 border-red-300"})]}):e.jsx(we,{className:"w-16 h-16 text-white"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 mb-1",children:t?"Enregistrement en cours...":"Pr√™t √† enregistrer"}),e.jsxs("p",{className:"text-gray-600 flex items-center justify-center gap-2",children:[e.jsx(Le,{className:"w-4 h-4"}),"Dur√©e: ",_(b)]})]}),!t&&a&&e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(a),alert("Texte copi√© dans le presse-papiers")},className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[e.jsx(ve,{className:"w-4 h-4"}),"Copier"]}),x&&e.jsxs("button",{onClick:()=>{x&&(window.location.href=`/api/voice/download/${x}`)},className:"flex items-center gap-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[e.jsx(re,{className:"w-4 h-4"}),"T√©l√©charger Audio"]}),e.jsxs("button",{onClick:()=>{if(a){const e=encodeURIComponent(a);window.location.href=`/send?body=${e}`}},className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:[e.jsx(H,{className:"w-4 h-4"}),"Utiliser dans Email"]}),e.jsxs("button",{onClick:()=>{confirm("Effacer la transcription ?")&&(i(""),l([]),f(null),y(0))},className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[e.jsx(_e,{className:"w-4 h-4"}),"Effacer"]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Le,{className:"w-5 h-5 text-blue-600"}),"Transcription Compl√®te"]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 min-h-[400px] max-h-[600px] overflow-y-auto",children:[a?e.jsx("p",{className:"text-gray-800 whitespace-pre-wrap leading-relaxed",children:a}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsx("div",{className:"text-center",children:t?e.jsxs(e.Fragment,{children:[e.jsx(Fe,{className:"w-8 h-8 text-blue-600 animate-spin mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"En attente de parole..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Me,{className:"w-12 h-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500",children:"Cliquez sur le micro pour commencer"})]})})}),e.jsx("div",{ref:w})]}),a&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.split(" ").filter(e=>e.length>0).length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Mots"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.length}),e.jsx("p",{className:"text-xs text-gray-600",children:"Caract√®res"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_(b)}),e.jsx("p",{className:"text-xs text-gray-600",children:"Dur√©e"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(Fe,{className:"w-5 h-5 "+(t?"text-red-600 animate-spin":"text-gray-400")}),"Flux en Temps R√©el"]}),e.jsxs("div",{className:"space-y-2 min-h-[400px] max-h-[600px] overflow-y-auto",children:[e.jsxs(D,{children:[0===o.length&&!t&&e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("p",{className:"text-gray-500 text-center",children:["Les phrases appara√Ætront ici",e.jsx("br",{}),"au fur et √† mesure"]})}),o.map((t,s)=>e.jsxs(A.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*s},className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-3 border border-blue-200",children:[e.jsx("p",{className:"text-gray-800",children:t.text}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:new Date(t.timestamp).toLocaleTimeString("fr-FR")})]},t.id))]}),t&&0===o.length&&e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx(A.div,{animate:{scale:[1,1.2,1]},transition:{repeat:1/0,duration:1.5},children:e.jsx(we,{className:"w-12 h-12 text-red-600 mx-auto mb-3"})}),e.jsx("p",{className:"text-gray-600",children:"En √©coute..."}),e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Commencez √† parler"})]})})]})]})]}),e.jsxs("div",{className:"mt-6 bg-gradient-to-br from-blue-50 to-purple-50 rounded-lg p-6 border border-blue-200",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"üí° Comment utiliser"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"1. Cliquez sur le micro"}),e.jsx("p",{className:"text-gray-600",children:"L'enregistrement d√©marre instantan√©ment"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"2. Parlez normalement"}),e.jsx("p",{className:"text-gray-600",children:"Le texte appara√Æt en temps r√©el (d√©lai ~2s)"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 mb-1",children:"3. Cliquez sur stop"}),e.jsx("p",{className:"text-gray-600",children:"Copiez, t√©l√©chargez ou utilisez dans un email"})]})]})]})]})}function Fn(e,t){return function(){return e.apply(t,arguments)}}Object.assign(Pn,{Manager:Dn,Socket:An,io:Pn,connect:Pn});const{toString:Mn}=Object.prototype,{getPrototypeOf:Bn}=Object,{iterator:Un,toStringTag:zn}=Symbol,qn=(e=>t=>{const s=Mn.call(t);return e[s]||(e[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Vn=e=>(e=e.toLowerCase(),t=>qn(t)===e),$n=e=>t=>typeof t===e,{isArray:Jn}=Array,Hn=$n("undefined");function Kn(e){return null!==e&&!Hn(e)&&null!==e.constructor&&!Hn(e.constructor)&&Xn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const Wn=Vn("ArrayBuffer");const Gn=$n("string"),Xn=$n("function"),Yn=$n("number"),Qn=e=>null!==e&&"object"==typeof e,Zn=e=>{if("object"!==qn(e))return!1;const t=Bn(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||zn in e||Un in e)},ea=Vn("Date"),ta=Vn("File"),sa=Vn("Blob"),ra=Vn("FileList"),na=Vn("URLSearchParams"),[aa,ia,oa,la]=["ReadableStream","Request","Response","Headers"].map(Vn);function ca(e,t,{allOwnKeys:s=!1}={}){if(null==e)return;let r,n;if("object"!=typeof e&&(e=[e]),Jn(e))for(r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else{if(Kn(e))return;const n=s?Object.getOwnPropertyNames(e):Object.keys(e),a=n.length;let i;for(r=0;r<a;r++)i=n[r],t.call(null,e[i],i,e)}}function da(e,t){if(Kn(e))return null;t=t.toLowerCase();const s=Object.keys(e);let r,n=s.length;for(;n-- >0;)if(r=s[n],t===r.toLowerCase())return r;return null}const ua="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,ma=e=>!Hn(e)&&e!==ua;const ha=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&Bn(Uint8Array)),pa=Vn("HTMLFormElement"),xa=(({hasOwnProperty:e})=>(t,s)=>e.call(t,s))(Object.prototype),fa=Vn("RegExp"),ga=(e,t)=>{const s=Object.getOwnPropertyDescriptors(e),r={};ca(s,(s,n)=>{let a;!1!==(a=t(s,n,e))&&(r[n]=a||s)}),Object.defineProperties(e,r)};const ba=Vn("AsyncFunction"),ya=(ja="function"==typeof setImmediate,va=Xn(ua.postMessage),ja?setImmediate:va?(Na=`axios@${Math.random()}`,wa=[],ua.addEventListener("message",({source:e,data:t})=>{e===ua&&t===Na&&wa.length&&wa.shift()()},!1),e=>{wa.push(e),ua.postMessage(Na,"*")}):e=>setTimeout(e));var ja,va,Na,wa;const Ea="undefined"!=typeof queueMicrotask?queueMicrotask.bind(ua):"undefined"!=typeof process&&process.nextTick||ya,Ca={isArray:Jn,isArrayBuffer:Wn,isBuffer:Kn,isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Xn(e.append)&&("formdata"===(t=qn(e))||"object"===t&&Xn(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Wn(e.buffer),t},isString:Gn,isNumber:Yn,isBoolean:e=>!0===e||!1===e,isObject:Qn,isPlainObject:Zn,isEmptyObject:e=>{if(!Qn(e)||Kn(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Et){return!1}},isReadableStream:aa,isRequest:ia,isResponse:oa,isHeaders:la,isUndefined:Hn,isDate:ea,isFile:ta,isBlob:sa,isRegExp:fa,isFunction:Xn,isStream:e=>Qn(e)&&Xn(e.pipe),isURLSearchParams:na,isTypedArray:ha,isFileList:ra,forEach:ca,merge:function e(){const{caseless:t,skipUndefined:s}=ma(this)&&this||{},r={},n=(n,a)=>{const i=t&&da(r,a)||a;Zn(r[i])&&Zn(n)?r[i]=e(r[i],n):Zn(n)?r[i]=e({},n):Jn(n)?r[i]=n.slice():s&&Hn(n)||(r[i]=n)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&ca(arguments[a],n);return r},extend:(e,t,s,{allOwnKeys:r}={})=>(ca(t,(t,r)=>{s&&Xn(t)?e[r]=Fn(t,s):e[r]=t},{allOwnKeys:r}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,s,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),s&&Object.assign(e.prototype,s)},toFlatObject:(e,t,s,r)=>{let n,a,i;const o={};if(t=t||{},null==e)return t;do{for(n=Object.getOwnPropertyNames(e),a=n.length;a-- >0;)i=n[a],r&&!r(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==s&&Bn(e)}while(e&&(!s||s(e,t))&&e!==Object.prototype);return t},kindOf:qn,kindOfTest:Vn,endsWith:(e,t,s)=>{e=String(e),(void 0===s||s>e.length)&&(s=e.length),s-=t.length;const r=e.indexOf(t,s);return-1!==r&&r===s},toArray:e=>{if(!e)return null;if(Jn(e))return e;let t=e.length;if(!Yn(t))return null;const s=new Array(t);for(;t-- >0;)s[t]=e[t];return s},forEachEntry:(e,t)=>{const s=(e&&e[Un]).call(e);let r;for(;(r=s.next())&&!r.done;){const s=r.value;t.call(e,s[0],s[1])}},matchAll:(e,t)=>{let s;const r=[];for(;null!==(s=e.exec(t));)r.push(s);return r},isHTMLForm:pa,hasOwnProperty:xa,hasOwnProp:xa,reduceDescriptors:ga,freezeMethods:e=>{ga(e,(t,s)=>{if(Xn(e)&&-1!==["arguments","caller","callee"].indexOf(s))return!1;const r=e[s];Xn(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")}))})},toObjectSet:(e,t)=>{const s={},r=e=>{e.forEach(e=>{s[e]=!0})};return Jn(e)?r(e):r(String(e).split(t)),s},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,s){return t.toUpperCase()+s}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:da,global:ua,isContextDefined:ma,isSpecCompliantForm:function(e){return!!(e&&Xn(e.append)&&"FormData"===e[zn]&&e[Un])},toJSONObject:e=>{const t=new Array(10),s=(e,r)=>{if(Qn(e)){if(t.indexOf(e)>=0)return;if(Kn(e))return e;if(!("toJSON"in e)){t[r]=e;const n=Jn(e)?[]:{};return ca(e,(e,t)=>{const a=s(e,r+1);!Hn(a)&&(n[t]=a)}),t[r]=void 0,n}}return e};return s(e,0)},isAsyncFn:ba,isThenable:e=>e&&(Qn(e)||Xn(e))&&Xn(e.then)&&Xn(e.catch),setImmediate:ya,asap:Ea,isIterable:e=>null!=e&&Xn(e[Un])};function ka(e,t,s,r,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),s&&(this.config=s),r&&(this.request=r),n&&(this.response=n,this.status=n.status?n.status:null)}Ca.inherits(ka,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ca.toJSONObject(this.config),code:this.code,status:this.status}}});const Sa=ka.prototype,Ta={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{Ta[e]={value:e}}),Object.defineProperties(ka,Ta),Object.defineProperty(Sa,"isAxiosError",{value:!0}),ka.from=(e,t,s,r,n,a)=>{const i=Object.create(Sa);Ca.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return ka.call(i,o,l,s,r,n),e&&null==i.cause&&Object.defineProperty(i,"cause",{value:e,configurable:!0}),i.name=e&&e.name||"Error",a&&Object.assign(i,a),i};function _a(e){return Ca.isPlainObject(e)||Ca.isArray(e)}function Oa(e){return Ca.endsWith(e,"[]")?e.slice(0,-2):e}function Aa(e,t,s){return e?e.concat(t).map(function(e,t){return e=Oa(e),!s&&t?"["+e+"]":e}).join(s?".":""):t}const Ra=Ca.toFlatObject(Ca,{},null,function(e){return/^is[A-Z]/.test(e)});function Da(e,t,s){if(!Ca.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(s=Ca.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Ca.isUndefined(t[e])})).metaTokens,n=s.visitor||c,a=s.dots,i=s.indexes,o=(s.Blob||"undefined"!=typeof Blob&&Blob)&&Ca.isSpecCompliantForm(t);if(!Ca.isFunction(n))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Ca.isDate(e))return e.toISOString();if(Ca.isBoolean(e))return e.toString();if(!o&&Ca.isBlob(e))throw new ka("Blob is not supported. Use a Buffer instead.");return Ca.isArrayBuffer(e)||Ca.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,s,n){let o=e;if(e&&!n&&"object"==typeof e)if(Ca.endsWith(s,"{}"))s=r?s:s.slice(0,-2),e=JSON.stringify(e);else if(Ca.isArray(e)&&function(e){return Ca.isArray(e)&&!e.some(_a)}(e)||(Ca.isFileList(e)||Ca.endsWith(s,"[]"))&&(o=Ca.toArray(e)))return s=Oa(s),o.forEach(function(e,r){!Ca.isUndefined(e)&&null!==e&&t.append(!0===i?Aa([s],r,a):null===i?s:s+"[]",l(e))}),!1;return!!_a(e)||(t.append(Aa(n,s,a),l(e)),!1)}const d=[],u=Object.assign(Ra,{defaultVisitor:c,convertValue:l,isVisitable:_a});if(!Ca.isObject(e))throw new TypeError("data must be an object");return function e(s,r){if(!Ca.isUndefined(s)){if(-1!==d.indexOf(s))throw Error("Circular reference detected in "+r.join("."));d.push(s),Ca.forEach(s,function(s,a){!0===(!(Ca.isUndefined(s)||null===s)&&n.call(t,s,Ca.isString(a)?a.trim():a,r,u))&&e(s,r?r.concat(a):[a])}),d.pop()}}(e),t}function Ia(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Pa(e,t){this._pairs=[],e&&Da(e,this,t)}const La=Pa.prototype;function Fa(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function Ma(e,t,s){if(!t)return e;const r=s&&s.encode||Fa;Ca.isFunction(s)&&(s={serialize:s});const n=s&&s.serialize;let a;if(a=n?n(t,s):Ca.isURLSearchParams(t)?t.toString():new Pa(t,s).toString(r),a){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+a}return e}La.append=function(e,t){this._pairs.push([e,t])},La.toString=function(e){const t=e?function(t){return e.call(this,t,Ia)}:Ia;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class Ba{constructor(){this.handlers=[]}use(e,t,s){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!s&&s.synchronous,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ca.forEach(this.handlers,function(t){null!==t&&e(t)})}}const Ua={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},za={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Pa,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},qa="undefined"!=typeof window&&"undefined"!=typeof document,Va="object"==typeof navigator&&navigator||void 0,$a=qa&&(!Va||["ReactNative","NativeScript","NS"].indexOf(Va.product)<0),Ja="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Ha=qa&&window.location.href||"http://localhost",Ka={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:qa,hasStandardBrowserEnv:$a,hasStandardBrowserWebWorkerEnv:Ja,navigator:Va,origin:Ha},Symbol.toStringTag,{value:"Module"})),...za};function Wa(e){function t(e,s,r,n){let a=e[n++];if("__proto__"===a)return!0;const i=Number.isFinite(+a),o=n>=e.length;if(a=!a&&Ca.isArray(r)?r.length:a,o)return Ca.hasOwnProp(r,a)?r[a]=[r[a],s]:r[a]=s,!i;r[a]&&Ca.isObject(r[a])||(r[a]=[]);return t(e,s,r[a],n)&&Ca.isArray(r[a])&&(r[a]=function(e){const t={},s=Object.keys(e);let r;const n=s.length;let a;for(r=0;r<n;r++)a=s[r],t[a]=e[a];return t}(r[a])),!i}if(Ca.isFormData(e)&&Ca.isFunction(e.entries)){const s={};return Ca.forEachEntry(e,(e,r)=>{t(function(e){return Ca.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,s,0)}),s}return null}const Ga={transitional:Ua,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const s=t.getContentType()||"",r=s.indexOf("application/json")>-1,n=Ca.isObject(e);n&&Ca.isHTMLForm(e)&&(e=new FormData(e));if(Ca.isFormData(e))return r?JSON.stringify(Wa(e)):e;if(Ca.isArrayBuffer(e)||Ca.isBuffer(e)||Ca.isStream(e)||Ca.isFile(e)||Ca.isBlob(e)||Ca.isReadableStream(e))return e;if(Ca.isArrayBufferView(e))return e.buffer;if(Ca.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(n){if(s.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Da(e,new Ka.classes.URLSearchParams,{visitor:function(e,t,s,r){return Ka.isNode&&Ca.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((a=Ca.isFileList(e))||s.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Da(a?{"files[]":e}:e,t&&new t,this.formSerializer)}}return n||r?(t.setContentType("application/json",!1),function(e,t,s){if(Ca.isString(e))try{return(t||JSON.parse)(e),Ca.trim(e)}catch(Et){if("SyntaxError"!==Et.name)throw Et}return(s||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ga.transitional,s=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Ca.isResponse(e)||Ca.isReadableStream(e))return e;if(e&&Ca.isString(e)&&(s&&!this.responseType||r)){const s=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(Et){if(s){if("SyntaxError"===Et.name)throw ka.from(Et,ka.ERR_BAD_RESPONSE,this,null,this.response);throw Et}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ka.classes.FormData,Blob:Ka.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ca.forEach(["delete","get","head","post","put","patch"],e=>{Ga.headers[e]={}});const Xa=Ca.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ya=Symbol("internals");function Qa(e){return e&&String(e).trim().toLowerCase()}function Za(e){return!1===e||null==e?e:Ca.isArray(e)?e.map(Za):String(e)}function ei(e,t,s,r,n){return Ca.isFunction(r)?r.call(this,t,s):(n&&(t=s),Ca.isString(t)?Ca.isString(r)?-1!==t.indexOf(r):Ca.isRegExp(r)?r.test(t):void 0:void 0)}let ti=class{constructor(e){e&&this.set(e)}set(e,t,s){const r=this;function n(e,t,s){const n=Qa(t);if(!n)throw new Error("header name must be a non-empty string");const a=Ca.findKey(r,n);(!a||void 0===r[a]||!0===s||void 0===s&&!1!==r[a])&&(r[a||t]=Za(e))}const a=(e,t)=>Ca.forEach(e,(e,s)=>n(e,s,t));if(Ca.isPlainObject(e)||e instanceof this.constructor)a(e,t);else if(Ca.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))a((e=>{const t={};let s,r,n;return e&&e.split("\n").forEach(function(e){n=e.indexOf(":"),s=e.substring(0,n).trim().toLowerCase(),r=e.substring(n+1).trim(),!s||t[s]&&Xa[s]||("set-cookie"===s?t[s]?t[s].push(r):t[s]=[r]:t[s]=t[s]?t[s]+", "+r:r)}),t})(e),t);else if(Ca.isObject(e)&&Ca.isIterable(e)){let s,r,n={};for(const t of e){if(!Ca.isArray(t))throw TypeError("Object iterator must return a key-value pair");n[r=t[0]]=(s=n[r])?Ca.isArray(s)?[...s,t[1]]:[s,t[1]]:t[1]}a(n,t)}else null!=e&&n(t,e,s);return this}get(e,t){if(e=Qa(e)){const s=Ca.findKey(this,e);if(s){const e=this[s];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=s.exec(e);)t[r[1]]=r[2];return t}(e);if(Ca.isFunction(t))return t.call(this,e,s);if(Ca.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Qa(e)){const s=Ca.findKey(this,e);return!(!s||void 0===this[s]||t&&!ei(0,this[s],s,t))}return!1}delete(e,t){const s=this;let r=!1;function n(e){if(e=Qa(e)){const n=Ca.findKey(s,e);!n||t&&!ei(0,s[n],n,t)||(delete s[n],r=!0)}}return Ca.isArray(e)?e.forEach(n):n(e),r}clear(e){const t=Object.keys(this);let s=t.length,r=!1;for(;s--;){const n=t[s];e&&!ei(0,this[n],n,e,!0)||(delete this[n],r=!0)}return r}normalize(e){const t=this,s={};return Ca.forEach(this,(r,n)=>{const a=Ca.findKey(s,n);if(a)return t[a]=Za(r),void delete t[n];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,s)=>t.toUpperCase()+s)}(n):String(n).trim();i!==n&&delete t[n],t[i]=Za(r),s[i]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return Ca.forEach(this,(s,r)=>{null!=s&&!1!==s&&(t[r]=e&&Ca.isArray(s)?s.join(", "):s)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const s=new this(e);return t.forEach(e=>s.set(e)),s}static accessor(e){const t=(this[Ya]=this[Ya]={accessors:{}}).accessors,s=this.prototype;function r(e){const r=Qa(e);t[r]||(!function(e,t){const s=Ca.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+s,{value:function(e,s,n){return this[r].call(this,t,e,s,n)},configurable:!0})})}(s,e),t[r]=!0)}return Ca.isArray(e)?e.forEach(r):r(e),this}};function si(e,t){const s=this||Ga,r=t||s,n=ti.from(r.headers);let a=r.data;return Ca.forEach(e,function(e){a=e.call(s,a,n.normalize(),t?t.status:void 0)}),n.normalize(),a}function ri(e){return!(!e||!e.__CANCEL__)}function ni(e,t,s){ka.call(this,null==e?"canceled":e,ka.ERR_CANCELED,t,s),this.name="CanceledError"}function ai(e,t,s){const r=s.config.validateStatus;s.status&&r&&!r(s.status)?t(new ka("Request failed with status code "+s.status,[ka.ERR_BAD_REQUEST,ka.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s)):e(s)}ti.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ca.reduceDescriptors(ti.prototype,({value:e},t)=>{let s=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[s]=e}}}),Ca.freezeMethods(ti),Ca.inherits(ni,ka,{__CANCEL__:!0});const ii=(e,t,s=3)=>{let r=0;const n=function(e,t){e=e||10;const s=new Array(e),r=new Array(e);let n,a=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[i];n||(n=l),s[a]=o,r[a]=l;let d=i,u=0;for(;d!==a;)u+=s[d++],d%=e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),l-n<t)return;const m=c&&l-c;return m?Math.round(1e3*u/m):void 0}}(50,250);return function(e,t){let s,r,n=0,a=1e3/t;const i=(t,a=Date.now())=>{n=a,s=null,r&&(clearTimeout(r),r=null),e(...t)};return[(...e)=>{const t=Date.now(),o=t-n;o>=a?i(e,t):(s=e,r||(r=setTimeout(()=>{r=null,i(s)},a-o)))},()=>s&&i(s)]}(s=>{const a=s.loaded,i=s.lengthComputable?s.total:void 0,o=a-r,l=n(o);r=a;e({loaded:a,total:i,progress:i?a/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&a<=i?(i-a)/l:void 0,event:s,lengthComputable:null!=i,[t?"download":"upload"]:!0})},s)},oi=(e,t)=>{const s=null!=e;return[r=>t[0]({lengthComputable:s,total:e,loaded:r}),t[1]]},li=e=>(...t)=>Ca.asap(()=>e(...t)),ci=Ka.hasStandardBrowserEnv?((e,t)=>s=>(s=new URL(s,Ka.origin),e.protocol===s.protocol&&e.host===s.host&&(t||e.port===s.port)))(new URL(Ka.origin),Ka.navigator&&/(msie|trident)/i.test(Ka.navigator.userAgent)):()=>!0,di=Ka.hasStandardBrowserEnv?{write(e,t,s,r,n,a,i){if("undefined"==typeof document)return;const o=[`${e}=${encodeURIComponent(t)}`];Ca.isNumber(s)&&o.push(`expires=${new Date(s).toUTCString()}`),Ca.isString(r)&&o.push(`path=${r}`),Ca.isString(n)&&o.push(`domain=${n}`),!0===a&&o.push("secure"),Ca.isString(i)&&o.push(`SameSite=${i}`),document.cookie=o.join("; ")},read(e){if("undefined"==typeof document)return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read:()=>null,remove(){}};function ui(e,t,s){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==s)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const mi=e=>e instanceof ti?{...e}:e;function hi(e,t){t=t||{};const s={};function r(e,t,s,r){return Ca.isPlainObject(e)&&Ca.isPlainObject(t)?Ca.merge.call({caseless:r},e,t):Ca.isPlainObject(t)?Ca.merge({},t):Ca.isArray(t)?t.slice():t}function n(e,t,s,n){return Ca.isUndefined(t)?Ca.isUndefined(e)?void 0:r(void 0,e,0,n):r(e,t,0,n)}function a(e,t){if(!Ca.isUndefined(t))return r(void 0,t)}function i(e,t){return Ca.isUndefined(t)?Ca.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(s,n,a){return a in t?r(s,n):a in e?r(void 0,s):void 0}const l={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,s)=>n(mi(e),mi(t),0,!0)};return Ca.forEach(Object.keys({...e,...t}),function(r){const a=l[r]||n,i=a(e[r],t[r],r);Ca.isUndefined(i)&&a!==o||(s[r]=i)}),s}const pi=e=>{const t=hi({},e);let{data:s,withXSRFToken:r,xsrfHeaderName:n,xsrfCookieName:a,headers:i,auth:o}=t;if(t.headers=i=ti.from(i),t.url=Ma(ui(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&i.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),Ca.isFormData(s))if(Ka.hasStandardBrowserEnv||Ka.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(Ca.isFunction(s.getHeaders)){const e=s.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(([e,s])=>{t.includes(e.toLowerCase())&&i.set(e,s)})}if(Ka.hasStandardBrowserEnv&&(r&&Ca.isFunction(r)&&(r=r(t)),r||!1!==r&&ci(t.url))){const e=n&&a&&di.read(a);e&&i.set(n,e)}return t},xi="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,s){const r=pi(e);let n=r.data;const a=ti.from(r.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:m,onDownloadProgress:h}=r;function p(){c&&c(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(i),r.signal&&r.signal.removeEventListener("abort",i)}let x=new XMLHttpRequest;function f(){if(!x)return;const r=ti.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders());ai(function(e){t(e),p()},function(e){s(e),p()},{data:u&&"text"!==u&&"json"!==u?x.response:x.responseText,status:x.status,statusText:x.statusText,headers:r,config:e,request:x}),x=null}x.open(r.method.toUpperCase(),r.url,!0),x.timeout=r.timeout,"onloadend"in x?x.onloadend=f:x.onreadystatechange=function(){x&&4===x.readyState&&(0!==x.status||x.responseURL&&0===x.responseURL.indexOf("file:"))&&setTimeout(f)},x.onabort=function(){x&&(s(new ka("Request aborted",ka.ECONNABORTED,e,x)),x=null)},x.onerror=function(t){const r=new ka(t&&t.message?t.message:"Network Error",ka.ERR_NETWORK,e,x);r.event=t||null,s(r),x=null},x.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const n=r.transitional||Ua;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),s(new ka(t,n.clarifyTimeoutError?ka.ETIMEDOUT:ka.ECONNABORTED,e,x)),x=null},void 0===n&&a.setContentType(null),"setRequestHeader"in x&&Ca.forEach(a.toJSON(),function(e,t){x.setRequestHeader(t,e)}),Ca.isUndefined(r.withCredentials)||(x.withCredentials=!!r.withCredentials),u&&"json"!==u&&(x.responseType=r.responseType),h&&([l,d]=ii(h,!0),x.addEventListener("progress",l)),m&&x.upload&&([o,c]=ii(m),x.upload.addEventListener("progress",o),x.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(i=t=>{x&&(s(!t||t.type?new ni(null,e,x):t),x.abort(),x=null)},r.cancelToken&&r.cancelToken.subscribe(i),r.signal&&(r.signal.aborted?i():r.signal.addEventListener("abort",i)));const g=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);g&&-1===Ka.protocols.indexOf(g)?s(new ka("Unsupported protocol "+g+":",ka.ERR_BAD_REQUEST,e)):x.send(n||null)})},fi=(e,t)=>{const{length:s}=e=e?e.filter(Boolean):[];if(t||s){let s,r=new AbortController;const n=function(e){if(!s){s=!0,i();const t=e instanceof Error?e:this.reason;r.abort(t instanceof ka?t:new ni(t instanceof Error?t.message:t))}};let a=t&&setTimeout(()=>{a=null,n(new ka(`timeout ${t} of ms exceeded`,ka.ETIMEDOUT))},t);const i=()=>{e&&(a&&clearTimeout(a),a=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(n):e.removeEventListener("abort",n)}),e=null)};e.forEach(e=>e.addEventListener("abort",n));const{signal:o}=r;return o.unsubscribe=()=>Ca.asap(i),o}},gi=function*(e,t){let s=e.byteLength;if(s<t)return void(yield e);let r,n=0;for(;n<s;)r=n+t,yield e.slice(n,r),n=r},bi=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:s}=await t.read();if(e)break;yield s}}finally{await t.cancel()}},yi=(e,t,s,r)=>{const n=async function*(e,t){for await(const s of bi(e))yield*gi(s,t)}(e,t);let a,i=0,o=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await n.next();if(t)return o(),void e.close();let a=r.byteLength;if(s){let e=i+=a;s(e)}e.enqueue(new Uint8Array(r))}catch(Fo){throw o(Fo),Fo}},cancel:e=>(o(e),n.return())},{highWaterMark:2})},{isFunction:ji}=Ca,vi=(({Request:e,Response:t})=>({Request:e,Response:t}))(Ca.global),{ReadableStream:Ni,TextEncoder:wi}=Ca.global,Ei=(e,...t)=>{try{return!!e(...t)}catch(Et){return!1}},Ci=e=>{e=Ca.merge.call({skipUndefined:!0},vi,e);const{fetch:t,Request:s,Response:r}=e,n=t?ji(t):"function"==typeof fetch,a=ji(s),i=ji(r);if(!n)return!1;const o=n&&ji(Ni),l=n&&("function"==typeof wi?(e=>t=>e.encode(t))(new wi):async e=>new Uint8Array(await new s(e).arrayBuffer())),c=a&&o&&Ei(()=>{let e=!1;const t=new s(Ka.origin,{body:new Ni,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),d=i&&o&&Ei(()=>Ca.isReadableStream(new r("").body)),u={stream:d&&(e=>e.body)};n&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!u[e]&&(u[e]=(t,s)=>{let r=t&&t[e];if(r)return r.call(t);throw new ka(`Response type '${e}' is not supported`,ka.ERR_NOT_SUPPORT,s)})});const m=async(e,t)=>{const r=Ca.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(Ca.isBlob(e))return e.size;if(Ca.isSpecCompliantForm(e)){const t=new s(Ka.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Ca.isArrayBufferView(e)||Ca.isArrayBuffer(e)?e.byteLength:(Ca.isURLSearchParams(e)&&(e+=""),Ca.isString(e)?(await l(e)).byteLength:void 0)})(t):r};return async e=>{let{url:n,method:i,data:o,signal:l,cancelToken:h,timeout:p,onDownloadProgress:x,onUploadProgress:f,responseType:g,headers:b,withCredentials:y="same-origin",fetchOptions:j}=pi(e),v=t||fetch;g=g?(g+"").toLowerCase():"text";let N=fi([l,h&&h.toAbortSignal()],p),w=null;const E=N&&N.unsubscribe&&(()=>{N.unsubscribe()});let C;try{if(f&&c&&"get"!==i&&"head"!==i&&0!==(C=await m(b,o))){let e,t=new s(n,{method:"POST",body:o,duplex:"half"});if(Ca.isFormData(o)&&(e=t.headers.get("content-type"))&&b.setContentType(e),t.body){const[e,s]=oi(C,ii(li(f)));o=yi(t.body,65536,e,s)}}Ca.isString(y)||(y=y?"include":"omit");const t=a&&"credentials"in s.prototype,l={...j,signal:N,method:i.toUpperCase(),headers:b.normalize().toJSON(),body:o,duplex:"half",credentials:t?y:void 0};w=a&&new s(n,l);let h=await(a?v(w,j):v(n,l));const p=d&&("stream"===g||"response"===g);if(d&&(x||p&&E)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=h[t]});const t=Ca.toFiniteNumber(h.headers.get("content-length")),[s,n]=x&&oi(t,ii(li(x),!0))||[];h=new r(yi(h.body,65536,s,()=>{n&&n(),E&&E()}),e)}g=g||"text";let k=await u[Ca.findKey(u,g)||"text"](h,e);return!p&&E&&E(),await new Promise((t,s)=>{ai(t,s,{data:k,headers:ti.from(h.headers),status:h.status,statusText:h.statusText,config:e,request:w})})}catch(Fo){if(E&&E(),Fo&&"TypeError"===Fo.name&&/Load failed|fetch/i.test(Fo.message))throw Object.assign(new ka("Network Error",ka.ERR_NETWORK,e,w),{cause:Fo.cause||Fo});throw ka.from(Fo,Fo&&Fo.code,e,w)}}},ki=new Map,Si=e=>{let t=e&&e.env||{};const{fetch:s,Request:r,Response:n}=t,a=[r,n,s];let i,o,l=a.length,c=ki;for(;l--;)i=a[l],o=c.get(i),void 0===o&&c.set(i,o=l?new Map:Ci(t)),c=o;return o};Si();const Ti={http:null,xhr:xi,fetch:{get:Si}};Ca.forEach(Ti,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Et){}Object.defineProperty(e,"adapterName",{value:t})}});const _i=e=>`- ${e}`,Oi=e=>Ca.isFunction(e)||null===e||!1===e;const Ai={getAdapter:function(e,t){e=Ca.isArray(e)?e:[e];const{length:s}=e;let r,n;const a={};for(let i=0;i<s;i++){let s;if(r=e[i],n=r,!Oi(r)&&(n=Ti[(s=String(r)).toLowerCase()],void 0===n))throw new ka(`Unknown adapter '${s}'`);if(n&&(Ca.isFunction(n)||(n=n.get(t))))break;a[s||"#"+i]=n}if(!n){const e=Object.entries(a).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new ka("There is no suitable adapter to dispatch the request "+(s?e.length>1?"since :\n"+e.map(_i).join("\n"):" "+_i(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return n},adapters:Ti};function Ri(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new ni(null,e)}function Di(e){Ri(e),e.headers=ti.from(e.headers),e.data=si.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Ai.getAdapter(e.adapter||Ga.adapter,e)(e).then(function(t){return Ri(e),t.data=si.call(e,e.transformResponse,t),t.headers=ti.from(t.headers),t},function(t){return ri(t)||(Ri(e),t&&t.response&&(t.response.data=si.call(e,e.transformResponse,t.response),t.response.headers=ti.from(t.response.headers))),Promise.reject(t)})}const Ii="1.13.2",Pi={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Pi[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Li={};Pi.transitional=function(e,t,s){return(r,n,a)=>{if(!1===e)throw new ka(function(e,t){return"[Axios v"+Ii+"] Transitional option '"+e+"'"+t+(s?". "+s:"")}(n," has been removed"+(t?" in "+t:"")),ka.ERR_DEPRECATED);return t&&!Li[n]&&(Li[n]=!0),!e||e(r,n,a)}},Pi.spelling=function(e){return(e,t)=>!0};const Fi={assertOptions:function(e,t,s){if("object"!=typeof e)throw new ka("options must be an object",ka.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let n=r.length;for(;n-- >0;){const a=r[n],i=t[a];if(i){const t=e[a],s=void 0===t||i(t,a,e);if(!0!==s)throw new ka("option "+a+" must be "+s,ka.ERR_BAD_OPTION_VALUE);continue}if(!0!==s)throw new ka("Unknown option "+a,ka.ERR_BAD_OPTION)}},validators:Pi},Mi=Fi.validators;let Bi=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Ba,response:new Ba}}async request(e,t){try{return await this._request(e,t)}catch(Fo){if(Fo instanceof Error){let t={};Error.captureStackTrace?Error.captureStackTrace(t):t=new Error;const s=t.stack?t.stack.replace(/^.+\n/,""):"";try{Fo.stack?s&&!String(Fo.stack).endsWith(s.replace(/^.+\n.+\n/,""))&&(Fo.stack+="\n"+s):Fo.stack=s}catch(Et){}}throw Fo}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=hi(this.defaults,t);const{transitional:s,paramsSerializer:r,headers:n}=t;void 0!==s&&Fi.assertOptions(s,{silentJSONParsing:Mi.transitional(Mi.boolean),forcedJSONParsing:Mi.transitional(Mi.boolean),clarifyTimeoutError:Mi.transitional(Mi.boolean)},!1),null!=r&&(Ca.isFunction(r)?t.paramsSerializer={serialize:r}:Fi.assertOptions(r,{encode:Mi.function,serialize:Mi.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Fi.assertOptions(t,{baseUrl:Mi.spelling("baseURL"),withXsrfToken:Mi.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let a=n&&Ca.merge(n.common,n[t.method]);n&&Ca.forEach(["delete","get","head","post","put","patch","common"],e=>{delete n[e]}),t.headers=ti.concat(a,n);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[Di.bind(this),void 0];for(e.unshift(...i),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let m=t;for(;u<d;){const e=i[u++],t=i[u++];try{m=e(m)}catch(h){t.call(this,h);break}}try{c=Di.call(this,m)}catch(h){return Promise.reject(h)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return Ma(ui((e=hi(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};Ca.forEach(["delete","get","head","options"],function(e){Bi.prototype[e]=function(t,s){return this.request(hi(s||{},{method:e,url:t,data:(s||{}).data}))}}),Ca.forEach(["post","put","patch"],function(e){function t(t){return function(s,r,n){return this.request(hi(n||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:s,data:r}))}}Bi.prototype[e]=t(),Bi.prototype[e+"Form"]=t(!0)});const Ui={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Ui).forEach(([e,t])=>{Ui[t]=e});const zi=function e(t){const s=new Bi(t),r=Fn(Bi.prototype.request,s);return Ca.extend(r,Bi.prototype,s,{allOwnKeys:!0}),Ca.extend(r,s,null,{allOwnKeys:!0}),r.create=function(s){return e(hi(t,s))},r}(Ga);zi.Axios=Bi,zi.CanceledError=ni,zi.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const s=this;this.promise.then(e=>{if(!s._listeners)return;let t=s._listeners.length;for(;t-- >0;)s._listeners[t](e);s._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{s.subscribe(e),t=e}).then(e);return r.cancel=function(){s.unsubscribe(t)},r},e(function(e,r,n){s.reason||(s.reason=new ni(e,r,n),t(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e(function(e){t=e}),cancel:t}}},zi.isCancel=ri,zi.VERSION=Ii,zi.toFormData=Da,zi.AxiosError=ka,zi.Cancel=zi.CanceledError,zi.all=function(e){return Promise.all(e)},zi.spread=function(e){return function(t){return e.apply(null,t)}},zi.isAxiosError=function(e){return Ca.isObject(e)&&!0===e.isAxiosError},zi.mergeConfig=hi,zi.AxiosHeaders=ti,zi.formToJSON=e=>Wa(Ca.isHTMLForm(e)?new FormData(e):e),zi.getAdapter=Ai.getAdapter,zi.HttpStatusCode=Ui,zi.default=zi;const{Axios:qi,AxiosError:Vi,CanceledError:$i,isCancel:Ji,CancelToken:Hi,VERSION:Ki,all:Wi,Cancel:Gi,isAxiosError:Xi,spread:Yi,toFormData:Qi,AxiosHeaders:Zi,HttpStatusCode:eo,formToJSON:to,getAdapter:so,mergeConfig:ro}=zi;function no(){const[t,s]=g.useState({tts_enabled:!1,tts_rate:150,tts_volume:1,font_size:"medium",high_contrast:!1}),[r,n]=g.useState(null),[a,i]=g.useState([]);g.useEffect(()=>{o(),l();const e=setInterval(()=>{t.tts_enabled&&l()},2e3);return()=>clearInterval(e)},[t.tts_enabled]);const o=async()=>{try{const e=await zi.get("/api/accessibility/settings");e.data.success&&s(e.data.settings)}catch(e){}},l=async()=>{try{const e=await zi.get("/api/accessibility/transcripts?limit=10");e.data.success&&i(e.data.transcripts)}catch(e){}},c=async e=>{try{const t=await zi.post("/api/accessibility/settings",e);t.data.success&&s(t.data.settings)}catch(t){}},d=async e=>{try{const t=await zi.post("/api/accessibility/profile",{needs:e});t.data.success&&(n(t.data.profile),t.data.settings?s(t.data.settings):o())}catch(t){}};return e.jsxs("div",{className:"space-y-6 "+(t.high_contrast?"contrast-more":""),children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"üåü Profils d'accessibilit√©"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("button",{onClick:()=>d(["blind"]),className:"p-4 bg-purple-100 hover:bg-purple-200 rounded-lg text-center transition",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"üëÅÔ∏è"}),e.jsx("span",{className:"text-sm font-semibold",children:"Aveugle"})]}),e.jsxs("button",{onClick:()=>d(["deaf"]),className:"p-4 bg-blue-100 hover:bg-blue-200 rounded-lg text-center transition",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"üëÇ"}),e.jsx("span",{className:"text-sm font-semibold",children:"Sourd"})]}),e.jsxs("button",{onClick:()=>d(["mute"]),className:"p-4 bg-green-100 hover:bg-green-200 rounded-lg text-center transition",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"üó£Ô∏è"}),e.jsx("span",{className:"text-sm font-semibold",children:"Muet"})]}),e.jsxs("button",{onClick:()=>d(["motor_impaired"]),className:"p-4 bg-yellow-100 hover:bg-yellow-200 rounded-lg text-center transition",children:[e.jsx("span",{className:"text-2xl block mb-1",children:"‚å®Ô∏è"}),e.jsx("span",{className:"text-sm font-semibold",children:"Moteur"})]})]})]}),r&&e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[e.jsx("h3",{className:"font-semibold text-green-800 mb-2",children:"‚úÖ Profil appliqu√©"}),e.jsx("p",{className:"text-sm text-green-700 mb-2",children:r.description}),e.jsx("ul",{className:"text-xs text-green-600 list-disc list-inside space-y-1",children:r.features.map((t,s)=>e.jsx("li",{children:t},s))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"‚öôÔ∏è Param√®tres"}),e.jsxs("div",{className:"mb-4 pb-4 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("label",{className:"font-semibold",children:"Synth√®se vocale (TTS)"}),e.jsx("input",{type:"checkbox",checked:t.tts_enabled,onChange:()=>c({toggle_tts:!0}),className:"w-5 h-5 rounded"})]}),t.tts_enabled&&e.jsxs("div",{className:"space-y-3 pl-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm block mb-1",children:["Vitesse: ",t.tts_rate," mots/min"]}),e.jsx("input",{type:"range",min:"100",max:"250",value:t.tts_rate,onChange:e=>c({tts_rate:parseInt(e.target.value)}),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"text-sm block mb-1",children:["Volume: ",Math.round(100*t.tts_volume),"%"]}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.1",value:t.tts_volume,onChange:e=>c({tts_volume:parseFloat(e.target.value)}),className:"w-full"})]}),e.jsx("button",{onClick:()=>(async e=>{try{await zi.post("/api/accessibility/speak",{text:e,priority:"normal"})}catch(t){}})("Ceci est un test de la synth√®se vocale"),className:"text-sm bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"üîä Tester"})]})]}),e.jsxs("div",{className:"mb-4 pb-4 border-b",children:[e.jsx("label",{className:"font-semibold block mb-3",children:"Taille de police"}),e.jsx("div",{className:"flex gap-2",children:["small","medium","large","x-large"].map(s=>e.jsxs("button",{onClick:()=>c({font_size:s}),className:"px-4 py-2 rounded "+(t.font_size===s?"bg-blue-500 text-white":"bg-gray-100 hover:bg-gray-200"),children:["small"===s&&"A","medium"===s&&"A","large"===s&&"A","x-large"===s&&"A"]},s))})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("label",{className:"font-semibold",children:"Haut contraste"}),e.jsx("input",{type:"checkbox",checked:t.high_contrast,onChange:()=>c({toggle_contrast:!0}),className:"w-5 h-5 rounded"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"üé§ Transcription Vocale"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:0===a.length?e.jsx("p",{className:"text-gray-400 text-center py-4",children:"Aucune transcription r√©cente"}):a.map((t,s)=>e.jsxs("div",{className:"p-3 bg-gray-50 rounded border border-gray-200",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:new Date(t.timestamp).toLocaleTimeString()}),e.jsx("div",{className:"text-sm",children:t.text})]},s))})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"‚å®Ô∏è Raccourcis clavier"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{children:"D√©marrer/Arr√™ter enregistrement"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded font-mono text-xs",children:"Ctrl+R"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{children:"Activer/D√©sactiver TTS"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded font-mono text-xs",children:"Ctrl+T"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{children:"Augmenter contraste"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded font-mono text-xs",children:"Ctrl+H"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{children:"Augmenter taille texte"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded font-mono text-xs",children:"Ctrl++"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{children:"Diminuer taille texte"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded font-mono text-xs",children:"Ctrl+-"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded",children:[e.jsx("span",{children:"D√©crire √©cran"}),e.jsx("kbd",{className:"px-2 py-1 bg-gray-200 rounded font-mono text-xs",children:"Ctrl+D"})]})]})]})]})}function ao(){return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 to-pink-100 p-8",children:e.jsxs(A.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-3",children:"‚ôø Centre d'Accessibilit√©"}),e.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Configurez votre exp√©rience pour qu'elle soit adapt√©e √† vos besoins sp√©cifiques. Notre syst√®me prend en charge les personnes sourdes, muettes, aveugles et √† mobilit√© r√©duite."})]}),e.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.2},className:"bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg mb-8",children:[e.jsx("h2",{className:"font-bold text-blue-900 mb-2 text-lg",children:"üåü Fonctionnalit√©s d'accessibilit√© universelle"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"üëÅÔ∏è Pour les aveugles:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Synth√®se vocale (TTS) pour tout le contenu"}),e.jsx("li",{children:"Descriptions audio des actions"}),e.jsx("li",{children:"Navigation compl√®te au clavier"}),e.jsx("li",{children:"Compatibilit√© lecteurs d'√©cran"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"üëÇ Pour les sourds:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Transcription visuelle en temps r√©el"}),e.jsx("li",{children:"Notifications visuelles"}),e.jsx("li",{children:"Sous-titres sur tous les messages"}),e.jsx("li",{children:"Indicateurs visuels d'√©tat"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"üó£Ô∏è Pour les muets:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Saisie de texte partout"}),e.jsx("li",{children:"Templates pr√©-d√©finis"}),e.jsx("li",{children:"Alternatives au vocal"}),e.jsx("li",{children:"Communication par texte"})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"‚å®Ô∏è Mobilit√© r√©duite:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Raccourcis clavier complets"}),e.jsx("li",{children:"Navigation Tab optimis√©e"}),e.jsx("li",{children:"Grandes zones cliquables"}),e.jsx("li",{children:"Pas de double-clic requis"})]})]})]})]}),e.jsx(no,{}),e.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4},className:"mt-8 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"üìñ Guide d'utilisation rapide"}),e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-green-700 mb-2",children:"1Ô∏è‚É£ Choisissez votre profil"}),e.jsx("p",{className:"text-sm",children:"Cliquez sur l'un des profils rapides ci-dessus pour configurer automatiquement les param√®tres optimaux pour vos besoins."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-blue-700 mb-2",children:"2Ô∏è‚É£ Personnalisez vos param√®tres"}),e.jsx("p",{className:"text-sm",children:"Ajustez la vitesse de lecture vocale, la taille de police, le contraste, etc. selon vos pr√©f√©rences."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-purple-700 mb-2",children:"3Ô∏è‚É£ Utilisez les raccourcis"}),e.jsx("p",{className:"text-sm",children:"M√©morisez les raccourcis clavier pour une navigation rapide sans souris. Tous les raccourcis sont list√©s en bas de page."})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-orange-700 mb-2",children:"4Ô∏è‚É£ Testez la synth√®se vocale"}),e.jsx("p",{className:"text-sm",children:'Si vous √™tes aveugle ou malvoyant, activez le TTS et testez-le avec le bouton "Tester". Tous les messages syst√®me seront prononc√©s.'})]})]})]}),e.jsxs(A.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mt-8 bg-white rounded-lg shadow p-6 text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:"üí¨ Besoin d'aide?"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Si vous rencontrez des difficult√©s avec l'accessibilit√©, notre √©quipe est l√† pour vous aider."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition",children:"üìß Contacter le support"}),e.jsx("button",{className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"üìö Documentation compl√®te"})]})]})]})})}function io(){const{t:t,i18n:s}=T(),[r,n]=g.useState("prefecture"),a=[{id:"prefecture",icon:Be,color:"blue"},{id:"visa",icon:R,color:"purple"},{id:"residence_permit",icon:R,color:"green"},{id:"work_permit",icon:ae,color:"orange"},{id:"family_reunification",icon:ae,color:"pink"},{id:"naturalization",icon:R,color:"indigo"}],i={title:{fr:"Contacts urgents",en:"Emergency contacts",es:"Contactos de emergencia",bm:"Teliya j…îndalaw"},contacts:[{name:{fr:"Pr√©fecture",en:"Prefecture",es:"Prefectura",bm:"Pref…õkitiiri"},phone:"Selon votre d√©partement",info:{fr:"Consultez l'annuaire",en:"Check directory",es:"Consultar directorio",bm:"Lis…õli laj…õ"}},{name:{fr:"OFII (Immigration)",en:"OFII (Immigration)",es:"OFII (Inmigraci√≥n)",bm:"OFII (M…îg…î doncogo)"},phone:"01 53 69 53 70",website:"https://www.ofii.fr"},{name:{fr:"Info Migrants",en:"Info Migrants",es:"Info Migrants",bm:"M…îg…î donw ka kunnafoni"},phone:"01 53 26 52 82",website:"https://www.infomigrants.net"},{name:"La Cimade",phone:"01 40 08 05 34",website:"https://www.lacimade.org"}]},o=s.language,l={prefecture:{description:{fr:"G√©rez vos rendez-vous et d√©marches en pr√©fecture",en:"Manage your prefecture appointments and procedures",es:"Gestiona tus citas y tr√°mites en la prefectura",bm:"I ka pref…õkitiiri laj…õrencogo ni baaraw …≤…õm…îg…îya"},links:[{name:{fr:"Prendre RDV en ligne",en:"Book appointment online",es:"Reservar cita online",bm:"Ka laj…õrencogo ta Intern…õti kan"},url:"https://www.interieur.gouv.fr/Administration-de-l-Etat/Prefectures"},{name:{fr:"Trouver ma pr√©fecture",en:"Find my prefecture",es:"Encontrar mi prefectura",bm:"Ka n ka pref…õkitiiri s…îr…î"},url:"https://lannuaire.service-public.fr/navigation/prefecture"}],documents:{fr:["Passeport en cours de validit√©","Justificatif de domicile (- 3 mois)","Photos d'identit√© r√©centes","Formulaire de demande compl√©t√©"],en:["Valid passport","Proof of address (< 3 months)","Recent ID photos","Completed application form"],es:["Pasaporte v√°lido","Justificante de domicilio (< 3 meses)","Fotos de identidad recientes","Formulario de solicitud completado"],bm:["Pasip…îri min b…õ se ka k…õ","Sigiy…îr…î jatemin…õw (kalo 3 t…õm…õnenw)","Foto koraw","∆ùininkali s…õb…õn dafalen"]}},visa:{description:{fr:"Demande de visa pour la France",en:"French visa application",es:"Solicitud de visa para Francia",bm:"Faransi visa …≤inili"},links:[{name:{fr:"France-Visas",en:"France-Visas",es:"France-Visas",bm:"France-Visas"},url:"https://france-visas.gouv.fr/"},{name:{fr:"Prendre RDV VFS Global",en:"Book VFS Global appointment",es:"Reservar cita VFS Global",bm:"VFS Global laj…õrencogo"},url:"https://www.vfsglobal.com/france/"}],documents:{fr:["Formulaire Cerfa compl√©t√© et sign√©","2 photos d'identit√©","Passeport + photocopies","Justificatif d'h√©bergement","Assurance voyage","Justificatifs de ressources financi√®res"],en:["Completed and signed Cerfa form","2 ID photos","Passport + photocopies","Proof of accommodation","Travel insurance","Proof of financial resources"],es:["Formulario Cerfa completado y firmado","2 fotos de identidad","Pasaporte + fotocopias","Justificante de alojamiento","Seguro de viaje","Justificantes de recursos financieros"],bm:["Cerfa s…õb…õn dafalen ani t…îg…îs…õb…õnnen","Foto 2","Pasip…îri + kopi","Duniyay…îr…î jatemin…õw","Taama kanko","Wariko jatemin…õw"]}},residence_permit:{description:{fr:"Obtenir ou renouveler votre titre de s√©jour",en:"Get or renew your residence permit",es:"Obtener o renovar tu permiso de residencia",bm:"Ka sigiy…îr…î s…õb…õn s…îr…î walima ka a y…õl…õma"},links:[{name:{fr:"ANEF - Administration Num√©rique",en:"ANEF - Digital Administration",es:"ANEF - Administraci√≥n Digital",bm:"ANEF - Intern…õti baarak…õcogo"},url:"https://administration-etrangers-en-france.interieur.gouv.fr/"},{name:{fr:"Service Public - Titres de s√©jour",en:"Public Service - Residence permits",es:"Servicio P√∫blico - Permisos de residencia",bm:"Foroba baarak…õcogo - Sigiy…îr…î s…õb…õnw"},url:"https://www.service-public.fr/particuliers/vosdroits/N110"}],documents:{fr:["Titre de s√©jour actuel (si renouvellement)","Passeport valide","Justificatif de domicile (- 3 mois)","3 photos d'identit√©","Justificatifs de ressources","Attestation de pr√©sence (VLS-TS)"],en:["Current residence permit (if renewal)","Valid passport","Proof of address (< 3 months)","3 ID photos","Proof of income","Certificate of presence (VLS-TS)"],es:["Permiso de residencia actual (si renovaci√≥n)","Pasaporte v√°lido","Justificante de domicilio (< 3 meses)","3 fotos de identidad","Justificantes de ingresos","Certificado de presencia (VLS-TS)"],bm:["Sigiy…îr…î s…õb…õn min b…õ yen sisan (ni y…õl…õmali don)","Pasip…îri min b…õ se ka k…õ","Sigiy…îr…î jatemin…õw (kalo 3 t…õm…õnenw)","Foto 3","Wari s…îr…îko jatemin…õw","∆ù…õjirali s…õb…õn (VLS-TS)"]}},work_permit:{description:{fr:"Autorisation de travail en France",en:"Work authorization in France",es:"Autorizaci√≥n de trabajo en Francia",bm:"Baara k…õcogo s…õb…õn Faransi"},links:[{name:{fr:"Proc√©dure employeur",en:"Employer procedure",es:"Procedimiento empleador",bm:"Baarak…õlaw ka taabolo"},url:"https://www.immigration.interieur.gouv.fr/Immigration/L-immigration-professionnelle"}],documents:{fr:["Contrat de travail ou promesse d'embauche","Dipl√¥mes et qualifications","CV d√©taill√©","Attestation employeur","Justificatif OFII si applicable"],en:["Work contract or job offer","Degrees and qualifications","Detailed CV","Employer certificate","OFII certificate if applicable"],es:["Contrato de trabajo u oferta de empleo","T√≠tulos y calificaciones","CV detallado","Certificado del empleador","Certificado OFII si aplica"],bm:["Baara s…õb…õn walima baara diyali","Kalanko s…õb…õnw","CV dakun","Baarak…õlaw ka s…õb…õn","OFII s…õb…õn ni a ka kan"]}},family_reunification:{description:{fr:"Faire venir votre famille en France",en:"Bring your family to France",es:"Traer a tu familia a Francia",bm:"Ka i ka som…îg…îw na Faransi"},links:[{name:{fr:"Regroupement familial",en:"Family reunification",es:"Reagrupaci√≥n familiar",bm:"Som…îg…îw laj…õ"},url:"https://www.service-public.fr/particuliers/vosdroits/F11166"}],documents:{fr:["Titre de s√©jour valide","Justificatifs de ressources stables","Justificatif de logement d√©cent","Actes d'√©tat civil (mariage, naissance)","Photos d'identit√© de tous"],en:["Valid residence permit","Proof of stable income","Proof of decent housing","Civil status documents (marriage, birth)","ID photos of everyone"],es:["Permiso de residencia v√°lido","Justificantes de ingresos estables","Justificante de vivienda decente","Documentos de estado civil (matrimonio, nacimiento)","Fotos de identidad de todos"],bm:["Sigiy…îr…î s…õb…în min b…õ se ka k…õ","Wari s…îr…îko sabatilen jatemin…õw","So …≤uman jatemin…õw","Denmis…õnya s…õb…õnw (furu, wolo)","B…õ…õ ka foto"]}},naturalization:{description:{fr:"Devenir citoyen fran√ßais",en:"Become a French citizen",es:"Convertirse en ciudadano franc√©s",bm:"Ka k…õ Faransidenw ye"},links:[{name:{fr:"Naturalisation",en:"Naturalization",es:"Naturalizaci√≥n",bm:"Jamana denmis…õnw s…îr…îli"},url:"https://www.service-public.fr/particuliers/vosdroits/N111"}],documents:{fr:["5 ans de r√©sidence r√©guli√®re","Niveau B1 de fran√ßais (TCF/TEF)","Justificatifs d'int√©gration","Extrait de casier judiciaire","Attestation d'emploi ou de formation"],en:["5 years of legal residence","B1 level French (TCF/TEF)","Proof of integration","Criminal record extract","Employment or training certificate"],es:["5 a√±os de residencia legal","Nivel B1 de franc√©s (TCF/TEF)","Justificantes de integraci√≥n","Extracto de antecedentes penales","Certificado de empleo o formaci√≥n"],bm:["San 5 sigili sabatilen na","Faransi kan B1 (TCF/TEF)","J…õkulu jatemin…õw","Kibaaru …≤uman s…õb…õn","Baara walima kalanko s…õb…õn"]}}}[r];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:t("admin.title")}),e.jsx("div",{className:"flex gap-2 bg-white rounded-xl p-2 shadow-lg",children:["fr","en","es","bm"].map(t=>e.jsxs("button",{onClick:()=>s.changeLanguage(t),className:"px-4 py-2 rounded-lg font-medium transition-all "+(s.language===t?"bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-md":"text-gray-600 hover:bg-gray-100"),children:["fr"===t&&"üá´üá∑ Fran√ßais","en"===t&&"üá¨üáß English","es"===t&&"üá™üá∏ Espa√±ol","bm"===t&&"üá≤üá± Bambara"]},t))})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-8",children:a.map(s=>{const a=s.icon,i=r===s.id;return e.jsxs(A.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>n(s.id),className:"p-6 rounded-xl shadow-lg transition-all "+(i?`bg-gradient-to-br from-${s.color}-500 to-${s.color}-600 text-white`:"bg-white text-gray-700 hover:shadow-xl"),children:[e.jsx(a,{className:"w-8 h-8 mx-auto mb-2 "+(i?"text-white":`text-${s.color}-600`)}),e.jsx("p",{className:"text-sm font-semibold text-center",children:t(`admin.${s.id}`)})]},s.id)})}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:t(`admin.${r}`)}),e.jsx("p",{className:"text-gray-600",children:l.description[o]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(R,{className:"w-6 h-6 text-purple-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:t("admin.documents_required")})]}),e.jsx("ul",{className:"space-y-2",children:l.documents[o].map((t,s)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(Ue,{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-gray-700",children:t})]},s))})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(W,{className:"w-6 h-6 text-blue-600"}),e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"fr"===o?"Liens utiles":"en"===o?"Useful links":"es"===o?"Enlaces √∫tiles":"Liy…õnw nafa"})]}),e.jsx("div",{className:"space-y-3",children:l.links.map((t,s)=>e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-4 bg-blue-50 hover:bg-blue-100 rounded-lg transition-colors group",children:[e.jsx("span",{className:"text-blue-700 font-medium",children:t.name[o]}),e.jsx(W,{className:"w-5 h-5 text-blue-600 group-hover:translate-x-1 transition-transform"})]},s))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6 bg-gradient-to-br from-red-50 to-orange-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(he,{className:"w-6 h-6 text-red-600"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:i.title[o]})]}),e.jsx("div",{className:"space-y-4",children:i.contacts.map((t,s)=>e.jsxs("div",{className:"p-3 bg-white rounded-lg",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:"object"==typeof t.name?t.name[o]:t.name}),t.phone&&e.jsxs("a",{href:`tel:${t.phone}`,className:"flex items-center gap-2 text-sm text-blue-600 mt-1",children:[e.jsx(ze,{className:"w-4 h-4"}),t.phone]}),t.website&&e.jsxs("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-blue-600 mt-1",children:[e.jsx(qe,{className:"w-4 h-4"}),"fr"===o?"Site web":"en"===o?"Website":"es"===o?"Sitio web":"Siti"]}),t.info&&e.jsx("p",{className:"text-xs text-gray-600 mt-1",children:t.info[o]})]},s))})]}),e.jsxs("div",{className:"card p-6 bg-gradient-to-br from-green-50 to-emerald-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(se,{className:"w-6 h-6 text-green-600"}),e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"fr"===o?"Conseils":"en"===o?"Tips":"es"===o?"Consejos":"Hakilinaw"})]}),e.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"fr"===o?"Prenez RDV t√¥t le matin":"en"===o?"Book appointments early morning":"es"===o?"Reserve citas temprano":"Laj…õrencogo ta s…îg…îma-s…îg…îma"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"fr"===o?"Gardez des copies de tout":"en"===o?"Keep copies of everything":"es"===o?"Guarda copias de todo":"F…õn b…õ…õ kopi mara"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:"fr"===o?"Arrivez 15 min en avance":"en"===o?"Arrive 15 min early":"es"===o?"Llega 15 min antes":"Na miniti 15 f…îl…î"})]})]})]})]})]})]})})}function oo(){const[t,s]=g.useState({total_generated:0,active_emails:0,total_forwarded:0,most_used_type:"general"});g.useEffect(()=>{r()},[]);const r=async()=>{try{const e=await _s.get("/api/email-generator/stats");e.success&&s(e.stats)}catch(e){}};return e.jsxs("div",{className:"email-stats",children:[e.jsx("h3",{children:"üìä Statistiques"}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-number",children:t.total_generated}),e.jsx("div",{className:"stat-label",children:"Emails g√©n√©r√©s"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-number",children:t.active_emails}),e.jsx("div",{className:"stat-label",children:"Actifs"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-number",children:t.total_forwarded}),e.jsx("div",{className:"stat-label",children:"Transf√©r√©s"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-number",children:t.most_used_type}),e.jsx("div",{className:"stat-label",children:"Type populaire"})]})]})]})}function lo(){const[t,s]=g.useState({}),[r,n]=g.useState([]),[a,i]=g.useState("general"),[o,l]=g.useState(""),[c,d]=g.useState(24),[u,m]=g.useState(!1);g.useEffect(()=>{h(),p()},[]);const h=async()=>{try{const e=await _s.get("/api/email-generator/templates");e.success&&s(e.templates)}catch(e){}},p=async()=>{try{const e=await _s.get("/api/email-generator/list");e.success&&n(e.emails)}catch(e){}},x=async(e,t=24)=>{try{const s=await _s.post("/api/email-generator/extend",{email:e,additional_hours:t});s.success?(alert(`‚úÖ Email prolong√© de ${t}h`),p()):alert(`‚ùå Erreur: ${s.error}`)}catch(s){alert("‚ùå Erreur lors de la prolongation")}},f=e=>{navigator.clipboard.writeText(e),alert("üìã Copi√© dans le presse-papiers")},b=e=>{const t=new Date,s=new Date(e)-t;if(s<=0)return"Expir√©";const r=Math.floor(s/36e5),n=Math.floor(s%36e5/6e4);return r>0?`${r}h ${n}m`:`${n}m`};return e.jsxs("div",{className:"email-generator",children:[e.jsx("h2",{children:"üìß G√©n√©rateur d'Adresses Email"}),e.jsxs("div",{className:"create-section",children:[e.jsx("h3",{children:"Cr√©er une nouvelle adresse"}),e.jsxs("div",{className:"form-row",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Type d'adresse :"}),e.jsx("select",{value:a,onChange:e=>i(e.target.value),children:Object.entries(t).map(([t,s])=>e.jsxs("option",{value:t,children:[s.name," - ",s.description]},t))})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Dur√©e (heures) :"}),e.jsx("input",{type:"number",min:"1",max:"168",value:c,onChange:e=>d(parseInt(e.target.value))})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{children:"Nom personnalis√© (optionnel) :"}),e.jsx("input",{type:"text",placeholder:"ex: monprojet, support2024...",value:o,onChange:e=>l(e.target.value),pattern:"[a-zA-Z0-9_-]+",title:"Lettres, chiffres, _ et - seulement"})]}),e.jsx("button",{onClick:async()=>{if(!u){m(!0);try{const e=await _s.post("/api/email-generator/create",{purpose:a,duration_hours:c,custom_name:o.trim()||null});e.success?(alert(`‚úÖ Adresse cr√©√©e: ${e.email_data.email}`),l(""),p()):alert(`‚ùå Erreur: ${e.error}`)}catch(e){alert("‚ùå Erreur lors de la cr√©ation")}finally{m(!1)}}},disabled:u,className:"create-button",children:u?"‚è≥ Cr√©ation...":"‚ú® Cr√©er l'adresse"})]}),e.jsxs("div",{className:"active-emails",children:[e.jsxs("h3",{children:["Adresses actives (",r.length,")"]}),0===r.length?e.jsx("p",{className:"no-emails",children:"Aucune adresse active"}):e.jsx("div",{className:"emails-list",children:r.map(t=>{return e.jsxs("div",{className:"email-card",children:[e.jsxs("div",{className:"email-header",children:[e.jsxs("strong",{className:"email-address",onClick:()=>f(t.email),title:"Cliquer pour copier",children:["üìß ",t.email]}),e.jsx("span",{className:"email-purpose",children:t.purpose})]}),e.jsxs("div",{className:"email-info",children:[e.jsxs("div",{className:"info-row",children:[e.jsxs("span",{children:["‚è∞ Expire dans: ",b(t.expires_at)]}),e.jsxs("span",{children:["üìä Utilisations: ",t.usage_count]})]}),e.jsxs("div",{className:"info-row",children:[e.jsxs("span",{children:["üìÖ Cr√©√©: ",(s=t.created_at,new Date(s).toLocaleString("fr-FR"))]}),e.jsxs("span",{children:["üîÑ Transfert: ",t.forwarding_enabled?"Activ√©":"D√©sactiv√©"]})]})]}),e.jsxs("div",{className:"email-actions",children:[e.jsx("button",{onClick:()=>f(t.email),className:"copy-button",title:"Copier l'adresse",children:"üìã"}),e.jsx("button",{onClick:()=>x(t.email,24),className:"extend-button",title:"Prolonger de 24h",children:"‚è∞ +24h"}),e.jsx("button",{onClick:()=>x(t.email,72),className:"extend-button",title:"Prolonger de 72h",children:"‚è∞ +72h"}),e.jsx("button",{onClick:()=>(async e=>{if(confirm(`D√©sactiver ${e} ?`))try{const t=await _s.post("/api/email-generator/deactivate",{email:e});t.success?(alert("‚úÖ Email d√©sactiv√©"),p()):alert(`‚ùå Erreur: ${t.error}`)}catch(t){alert("‚ùå Erreur lors de la d√©sactivation")}})(t.email),className:"deactivate-button",title:"D√©sactiver",children:"üóëÔ∏è"})]})]},t.email);var s})})]}),e.jsx(oo,{}),e.jsxs("div",{className:"info-section",children:[e.jsx("h3",{children:"‚ÑπÔ∏è Informations"}),e.jsxs("ul",{children:[e.jsx("li",{children:"üåê Domaine: iaposte.cloud"}),e.jsx("li",{children:"üì¨ Transfert automatique vers votre email principal"}),e.jsx("li",{children:"‚è∞ Dur√©e maximale: 7 jours (168h)"}),e.jsx("li",{children:"üîí Suppression automatique apr√®s expiration"}),e.jsx("li",{children:"üìä Statistiques d'utilisation disponibles"})]})]}),e.jsx("style",{jsx:!0,children:"\n        .email-generator {\n          max-width: 1000px;\n          margin: 0 auto;\n          padding: 20px;\n        }\n\n        .create-section {\n          background: #f8f9fa;\n          padding: 20px;\n          border-radius: 8px;\n          margin-bottom: 30px;\n        }\n\n        .form-row {\n          display: flex;\n          gap: 20px;\n          margin-bottom: 15px;\n        }\n\n        .form-group {\n          flex: 1;\n        }\n\n        .form-group label {\n          display: block;\n          margin-bottom: 5px;\n          font-weight: bold;\n        }\n\n        .form-group input,\n        .form-group select {\n          width: 100%;\n          padding: 8px;\n          border: 1px solid #ddd;\n          border-radius: 4px;\n        }\n\n        .create-button {\n          background: #007bff;\n          color: white;\n          border: none;\n          padding: 12px 24px;\n          border-radius: 6px;\n          cursor: pointer;\n          font-size: 16px;\n        }\n\n        .create-button:hover {\n          background: #0056b3;\n        }\n\n        .create-button:disabled {\n          background: #6c757d;\n          cursor: not-allowed;\n        }\n\n        .emails-list {\n          display: grid;\n          gap: 15px;\n        }\n\n        .email-card {\n          border: 1px solid #ddd;\n          border-radius: 8px;\n          padding: 15px;\n          background: white;\n        }\n\n        .email-header {\n          display: flex;\n          justify-content: space-between;\n          align-items: center;\n          margin-bottom: 10px;\n        }\n\n        .email-address {\n          cursor: pointer;\n          color: #007bff;\n          font-family: monospace;\n        }\n\n        .email-address:hover {\n          text-decoration: underline;\n        }\n\n        .email-purpose {\n          background: #e9ecef;\n          padding: 4px 8px;\n          border-radius: 4px;\n          font-size: 12px;\n          text-transform: uppercase;\n        }\n\n        .email-info {\n          margin-bottom: 15px;\n        }\n\n        .info-row {\n          display: flex;\n          justify-content: space-between;\n          margin-bottom: 5px;\n          font-size: 14px;\n          color: #666;\n        }\n\n        .email-actions {\n          display: flex;\n          gap: 8px;\n        }\n\n        .email-actions button {\n          padding: 6px 12px;\n          border: none;\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 12px;\n        }\n\n        .copy-button {\n          background: #28a745;\n          color: white;\n        }\n\n        .extend-button {\n          background: #ffc107;\n          color: black;\n        }\n\n        .deactivate-button {\n          background: #dc3545;\n          color: white;\n        }\n\n        .no-emails {\n          text-align: center;\n          color: #666;\n          font-style: italic;\n          padding: 40px;\n        }\n\n        .info-section {\n          background: #e9ecef;\n          padding: 20px;\n          border-radius: 8px;\n          margin-top: 30px;\n        }\n\n        .info-section ul {\n          margin: 0;\n          padding-left: 20px;\n        }\n\n        .info-section li {\n          margin-bottom: 8px;\n        }\n\n        .email-stats {\n          background: #f8f9fa;\n          padding: 20px;\n          border-radius: 8px;\n          margin-bottom: 30px;\n        }\n\n        .stats-grid {\n          display: grid;\n          grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\n          gap: 15px;\n          margin-top: 15px;\n        }\n\n        .stat-card {\n          background: white;\n          padding: 15px;\n          border-radius: 6px;\n          text-align: center;\n          border: 1px solid #dee2e6;\n        }\n\n        .stat-number {\n          font-size: 24px;\n          font-weight: bold;\n          color: #007bff;\n          margin-bottom: 5px;\n        }\n\n        .stat-label {\n          font-size: 12px;\n          color: #666;\n          text-transform: uppercase;\n        }\n      "})]})}function co(){return e.jsx("div",{className:"page-container",children:e.jsx(lo,{})})}const uo=[{name:"nav.dashboard",href:"/",icon:$e},{name:"nav.send",href:"/send",icon:F},{name:"nav.inbox",href:"/inbox",icon:Oe},{name:"nav.multimodal",href:"/ai-multimodal",icon:Ne},{name:"nav.contacts",href:"/contacts",icon:ae},{name:"nav.history",href:"/history",icon:se},{name:"nav.templates",href:"/templates",icon:R},{name:"nav.voice",href:"/voice-transcription",icon:we},{name:"nav.accessibility",href:"/accessibility",icon:Je},{name:"admin.title",href:"/french-admin",icon:Se},{name:"nav.config",href:"/config",icon:V}];function mo(){const{t:t,i18n:s}=T();return e.jsxs("div",{className:"w-64 bg-white border-r border-gray-200 flex flex-col",children:[e.jsxs("div",{className:"h-16 flex items-center px-6 border-b border-gray-200",children:[e.jsx($,{className:"w-8 h-8 text-primary-600"}),e.jsx("span",{className:"ml-3 text-xl font-bold bg-gradient-to-r from-primary-600 to-secondary-600 bg-clip-text text-transparent",children:"IAPosteManager"})]}),e.jsx("nav",{className:"flex-1 px-4 py-6 space-y-1 overflow-y-auto",children:uo.map(s=>e.jsx(v,{to:s.href,end:"/"===s.href,className:({isActive:e})=>"flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-all duration-200 "+(e?"bg-gradient-to-r from-primary-50 to-secondary-50 text-primary-700 shadow-sm":"text-gray-700 hover:bg-gray-50 hover:text-primary-600"),children:({isActive:r})=>e.jsxs(e.Fragment,{children:[e.jsx(s.icon,{className:"w-5 h-5 mr-3 "+(r?"text-primary-600":"")}),t(s.name)]})},s.name))}),e.jsx("div",{className:"px-4 py-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(qe,{className:"w-4 h-4 text-gray-500"}),e.jsxs("select",{value:s.language,onChange:e=>s.changeLanguage(e.target.value),className:"text-xs border border-gray-300 rounded-lg px-2 py-1 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"fr",children:"üá´üá∑ Fran√ßais"}),e.jsx("option",{value:"en",children:"üá¨üáß English"}),e.jsx("option",{value:"es",children:"üá™üá∏ Espa√±ol"}),e.jsx("option",{value:"bm",children:"üá≤üá± Bambara"})]})]})}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsx("div",{className:"text-xs text-gray-500 text-center",children:"Version 3.3.0"})})]})}function ho(){const t=j(),s=ps(e=>e.logout);return e.jsxs("header",{className:"h-16 bg-white border-b border-gray-200 flex items-center justify-between px-6",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"Bonjour! üëã"})}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("button",{className:"p-2 text-gray-600 hover:text-primary-600 hover:bg-gray-100 rounded-lg transition-colors relative",children:[e.jsx(He,{className:"w-5 h-5"}),e.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),e.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2 rounded-lg hover:bg-gray-50 cursor-pointer transition-colors",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-primary-500 to-secondary-500 rounded-full flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Admin"})]}),e.jsx("button",{onClick:async()=>{try{await ws.logout(),s(),Yt.success("D√©connexion r√©ussie"),t("/login")}catch(e){Yt.error("Erreur lors de la d√©connexion")}},className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"D√©connexion",children:e.jsx(Ke,{className:"w-5 h-5"})})]})]})}function po(){return e.jsxs("div",{className:"flex h-screen bg-gray-50",children:[e.jsx(mo,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(ho,{}),e.jsx("main",{className:"flex-1 overflow-y-auto p-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx(N,{})})})]})]})}function xo({children:t}){return ps(e=>e.isAuthenticated)?t:e.jsx(k,{to:"/login",replace:!0})}function fo(){return e.jsxs(w,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:[e.jsx(Xt,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#fff",color:"#363636",boxShadow:"0 10px 15px -3px rgba(0, 0, 0, 0.1)",borderRadius:"12px",padding:"16px"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}}),e.jsxs(E,{children:[e.jsx(C,{path:"/login",element:e.jsx(Os,{})}),e.jsxs(C,{path:"/",element:e.jsx(xo,{children:e.jsx(po,{})}),children:[e.jsx(C,{index:!0,element:e.jsx(Zs,{})}),e.jsx(C,{path:"send",element:e.jsx(er,{})}),e.jsx(C,{path:"config",element:e.jsx(tr,{})}),e.jsx(C,{path:"history",element:e.jsx(nr,{})}),e.jsx(C,{path:"templates",element:e.jsx(ir,{})}),e.jsx(C,{path:"ai-multimodal",element:e.jsx(lr,{})}),e.jsx(C,{path:"ai-generate",element:e.jsx(or,{})}),e.jsx(C,{path:"document-analysis",element:e.jsx(cr,{})}),e.jsx(C,{path:"contacts",element:e.jsx(dr,{})}),e.jsx(C,{path:"inbox",element:e.jsx(ur,{})}),e.jsx(C,{path:"voice-transcription",element:e.jsx(Ln,{})}),e.jsx(C,{path:"accessibility",element:e.jsx(ao,{})}),e.jsx(C,{path:"french-admin",element:e.jsx(io,{})}),e.jsx(C,{path:"email-generator",element:e.jsx(co,{})})]}),e.jsx(C,{path:"*",element:e.jsx(k,{to:"/",replace:!0})})]})]})}const{slice:go,forEach:bo}=[];const yo=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,jo={create(e,t,s,r){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{path:"/",sameSite:"strict"};s&&(n.expires=new Date,n.expires.setTime(n.expires.getTime()+60*s*1e3)),r&&(n.domain=r),document.cookie=function(e,t){const s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{path:"/"};let r=`${e}=${encodeURIComponent(t)}`;if(s.maxAge>0){const e=s.maxAge-0;if(Number.isNaN(e))throw new Error("maxAge should be a Number");r+=`; Max-Age=${Math.floor(e)}`}if(s.domain){if(!yo.test(s.domain))throw new TypeError("option domain is invalid");r+=`; Domain=${s.domain}`}if(s.path){if(!yo.test(s.path))throw new TypeError("option path is invalid");r+=`; Path=${s.path}`}if(s.expires){if("function"!=typeof s.expires.toUTCString)throw new TypeError("option expires is invalid");r+=`; Expires=${s.expires.toUTCString()}`}if(s.httpOnly&&(r+="; HttpOnly"),s.secure&&(r+="; Secure"),s.sameSite)switch("string"==typeof s.sameSite?s.sameSite.toLowerCase():s.sameSite){case!0:r+="; SameSite=Strict";break;case"lax":r+="; SameSite=Lax";break;case"strict":r+="; SameSite=Strict";break;case"none":r+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return s.partitioned&&(r+="; Partitioned"),r}(e,t,n)},read(e){const t=`${e}=`,s=document.cookie.split(";");for(let r=0;r<s.length;r++){let e=s[r];for(;" "===e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(t))return e.substring(t.length,e.length)}return null},remove(e,t){this.create(e,"",-1,t)}};var vo={name:"cookie",lookup(e){let{lookupCookie:t}=e;if(t&&"undefined"!=typeof document)return jo.read(t)||void 0},cacheUserLanguage(e,t){let{lookupCookie:s,cookieMinutes:r,cookieDomain:n,cookieOptions:a}=t;s&&"undefined"!=typeof document&&jo.create(s,e,r,n,a)}},No={name:"querystring",lookup(e){var t;let s,{lookupQuerystring:r}=e;if("undefined"!=typeof window){let{search:e}=window.location;!window.location.search&&(null==(t=window.location.hash)?void 0:t.indexOf("?"))>-1&&(e=window.location.hash.substring(window.location.hash.indexOf("?")));const n=e.substring(1).split("&");for(let t=0;t<n.length;t++){const e=n[t].indexOf("=");if(e>0){n[t].substring(0,e)===r&&(s=n[t].substring(e+1))}}}return s}},wo={name:"hash",lookup(e){var t;let s,{lookupHash:r,lookupFromHashIndex:n}=e;if("undefined"!=typeof window){const{hash:e}=window.location;if(e&&e.length>2){const a=e.substring(1);if(r){const e=a.split("&");for(let t=0;t<e.length;t++){const n=e[t].indexOf("=");if(n>0){e[t].substring(0,n)===r&&(s=e[t].substring(n+1))}}}if(s)return s;if(!s&&n>-1){const s=e.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(s))return;return null==(t=s["number"==typeof n?n:0])?void 0:t.replace("/","")}}}return s}};let Eo=null;const Co=()=>{if(null!==Eo)return Eo;try{if(Eo="undefined"!=typeof window&&null!==window.localStorage,!Eo)return!1;const e="i18next.translate.boo";window.localStorage.setItem(e,"foo"),window.localStorage.removeItem(e)}catch(Et){Eo=!1}return Eo};var ko={name:"localStorage",lookup(e){let{lookupLocalStorage:t}=e;if(t&&Co())return window.localStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupLocalStorage:s}=t;s&&Co()&&window.localStorage.setItem(s,e)}};let So=null;const To=()=>{if(null!==So)return So;try{if(So="undefined"!=typeof window&&null!==window.sessionStorage,!So)return!1;const e="i18next.translate.boo";window.sessionStorage.setItem(e,"foo"),window.sessionStorage.removeItem(e)}catch(Et){So=!1}return So};var _o={name:"sessionStorage",lookup(e){let{lookupSessionStorage:t}=e;if(t&&To())return window.sessionStorage.getItem(t)||void 0},cacheUserLanguage(e,t){let{lookupSessionStorage:s}=t;s&&To()&&window.sessionStorage.setItem(s,e)}},Oo={name:"navigator",lookup(e){const t=[];if("undefined"!=typeof navigator){const{languages:e,userLanguage:s,language:r}=navigator;if(e)for(let n=0;n<e.length;n++)t.push(e[n]);s&&t.push(s),r&&t.push(r)}return t.length>0?t:void 0}},Ao={name:"htmlTag",lookup(e){let t,{htmlTag:s}=e;const r=s||("undefined"!=typeof document?document.documentElement:null);return r&&"function"==typeof r.getAttribute&&(t=r.getAttribute("lang")),t}},Ro={name:"path",lookup(e){var t;let{lookupFromPathIndex:s}=e;if("undefined"==typeof window)return;const r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(!Array.isArray(r))return;return null==(t=r["number"==typeof s?s:0])?void 0:t.replace("/","")}},Do={name:"subdomain",lookup(e){var t,s;let{lookupFromSubdomainIndex:r}=e;const n="number"==typeof r?r+1:1,a="undefined"!=typeof window&&(null==(s=null==(t=window.location)?void 0:t.hostname)?void 0:s.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i));if(a)return a[n]}};let Io=!1;try{document.cookie,Io=!0}catch(Et){}const Po=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Io||Po.splice(1,1);class Lo{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.type="languageDetector",this.detectors={},this.init(e,t)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{languageUtils:{}},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.services=e,this.options=function(e){return bo.call(go.call(arguments,1),t=>{if(t)for(const s in t)void 0===e[s]&&(e[s]=t[s])}),e}(t,this.options||{},{order:Po,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:e=>e}),"string"==typeof this.options.convertDetectedLanguage&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=e=>e.replace("-","_")),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=s,this.addDetector(vo),this.addDetector(No),this.addDetector(ko),this.addDetector(_o),this.addDetector(Oo),this.addDetector(Ao),this.addDetector(Ro),this.addDetector(Do),this.addDetector(wo)}addDetector(e){return this.detectors[e.name]=e,this}detect(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.order,t=[];return e.forEach(e=>{if(this.detectors[e]){let s=this.detectors[e].lookup(this.options);s&&"string"==typeof s&&(s=[s]),s&&(t=t.concat(s))}}),t=t.filter(e=>{return null!=e&&!("string"==typeof(t=e)&&[/<\s*script.*?>/i,/<\s*\/\s*script\s*>/i,/<\s*img.*?on\w+\s*=/i,/<\s*\w+\s*on\w+\s*=.*?>/i,/javascript\s*:/i,/vbscript\s*:/i,/expression\s*\(/i,/eval\s*\(/i,/alert\s*\(/i,/document\.cookie/i,/document\.write\s*\(/i,/window\.location/i,/innerHTML/i].some(e=>e.test(t)));var t}).map(e=>this.options.convertDetectedLanguage(e)),this.services&&this.services.languageUtils&&this.services.languageUtils.getBestMatchFromCodes?t:t.length>0?t[0]:null}cacheUserLanguage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.caches;t&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(e)>-1||t.forEach(t=>{this.detectors[t]&&this.detectors[t].cacheUserLanguage(e,this.options)}))}}Lo.type="languageDetector";_.use(Lo).use(O).init({resources:{fr:{translation:{nav:{dashboard:"Tableau de bord",inbox:"Bo√Æte de r√©ception",send:"Envoyer",wizard:"Assistant",history:"Historique",templates:"Mod√®les",contacts:"Contacts",ai:"IA G√©n√©rative",multimodal:"IA Multimodale",voice:"Transcription",config:"Configuration",accessibility:"Accessibilit√©",logout:"D√©connexion"},common:{save:"Enregistrer",cancel:"Annuler",delete:"Supprimer",edit:"Modifier",close:"Fermer",search:"Rechercher",filter:"Filtrer",loading:"Chargement...",error:"Erreur",success:"Succ√®s",confirm:"Confirmer",back:"Retour",next:"Suivant",finish:"Terminer",yes:"Oui",no:"Non"},email:{to:"Destinataire",subject:"Objet",body:"Corps du message",send:"Envoyer",draft:"Brouillon",sent:"Envoy√©",failed:"√âchec",schedule:"Programmer l'envoi",scheduleDate:"Date d'envoi",scheduleTime:"Heure d'envoi",attachment:"Pi√®ce jointe",recipient:"Qui est le destinataire ?",context:"Pourquoi envoyez-vous cet email ?",tone:"Quel ton souhaitez-vous ?",length:"Longueur souhait√©e"},templates:{title:"Mod√®les d'emails",create:"Cr√©er un mod√®le",use:"Utiliser",professional:"Professionnel",friendly:"Amical",formal:"Formel",variables:"Variables",fillVariables:"Remplir les variables"},stats:{title:"Statistiques",totalEmails:"Total emails",successRate:"Taux de succ√®s",uniqueRecipients:"Destinataires uniques",last30Days:"30 derniers jours",byStatus:"Par statut",topRecipients:"Top destinataires"},admin:{title:"Administration fran√ßaise",prefecture:"Pr√©fecture",prefecture_appointment:"Rendez-vous pr√©fecture",visa:"Demande de visa",residence_permit:"Titre de s√©jour",work_permit:"Autorisation de travail",family_reunification:"Regroupement familial",naturalization:"Naturalisation",documents_required:"Documents requis",appointment_booking:"Prise de rendez-vous",status_check:"V√©rifier le statut",help:"Aide et assistance"}}},en:{translation:{nav:{dashboard:"Dashboard",inbox:"Inbox",send:"Send",wizard:"Wizard",history:"History",templates:"Templates",contacts:"Contacts",ai:"AI Generate",multimodal:"Multimodal AI",voice:"Transcription",config:"Settings",accessibility:"Accessibility",logout:"Logout"},common:{save:"Save",cancel:"Cancel",delete:"Delete",edit:"Edit",close:"Close",search:"Search",filter:"Filter",loading:"Loading...",error:"Error",success:"Success",confirm:"Confirm",back:"Back",next:"Next",finish:"Finish",yes:"Yes",no:"No"},email:{to:"To",subject:"Subject",body:"Body",send:"Send",draft:"Draft",sent:"Sent",failed:"Failed",schedule:"Schedule sending",scheduleDate:"Send date",scheduleTime:"Send time",attachment:"Attachment",recipient:"Who is the recipient?",context:"Why are you sending this email?",tone:"What tone do you want?",length:"Desired length"},templates:{title:"Email Templates",create:"Create template",use:"Use",professional:"Professional",friendly:"Friendly",formal:"Formal",variables:"Variables",fillVariables:"Fill variables"},stats:{title:"Statistics",totalEmails:"Total emails",successRate:"Success rate",uniqueRecipients:"Unique recipients",last30Days:"Last 30 days",byStatus:"By status",topRecipients:"Top recipients"},admin:{title:"French administration",prefecture:"Prefecture",prefecture_appointment:"Prefecture appointment",visa:"Visa application",residence_permit:"Residence permit",work_permit:"Work permit",family_reunification:"Family reunification",naturalization:"Naturalization",documents_required:"Required documents",appointment_booking:"Book appointment",status_check:"Check status",help:"Help and support"}}},es:{translation:{nav:{dashboard:"Tablero",inbox:"Bandeja de entrada",send:"Enviar",wizard:"Asistente",history:"Historial",templates:"Plantillas",contacts:"Contactos",ai:"IA Generativa",multimodal:"IA Multimodal",voice:"Transcripci√≥n",config:"Configuraci√≥n",accessibility:"Accesibilidad",logout:"Cerrar sesi√≥n"},common:{save:"Guardar",cancel:"Cancelar",delete:"Eliminar",edit:"Editar",close:"Cerrar",search:"Buscar",filter:"Filtrar",loading:"Cargando...",error:"Error",success:"√âxito",confirm:"Confirmar",back:"Atr√°s",next:"Siguiente",finish:"Finalizar",yes:"S√≠",no:"No"},email:{to:"Para",subject:"Asunto",body:"Cuerpo",send:"Enviar",draft:"Borrador",sent:"Enviado",failed:"Fallido",schedule:"Programar env√≠o",scheduleDate:"Fecha de env√≠o",scheduleTime:"Hora de env√≠o",attachment:"Adjunto",recipient:"¬øQui√©n es el destinatario?",context:"¬øPor qu√© env√≠as este correo?",tone:"¬øQu√© tono deseas?",length:"Longitud deseada"},templates:{title:"Plantillas de correo",create:"Crear plantilla",use:"Usar",professional:"Profesional",friendly:"Amigable",formal:"Formal",variables:"Variables",fillVariables:"Rellenar variables"},stats:{title:"Estad√≠sticas",totalEmails:"Total correos",successRate:"Tasa de √©xito",uniqueRecipients:"Destinatarios √∫nicos",last30Days:"√öltimos 30 d√≠as",byStatus:"Por estado",topRecipients:"Top destinatarios"},admin:{title:"Administraci√≥n francesa",prefecture:"Prefectura",prefecture_appointment:"Cita en prefectura",visa:"Solicitud de visa",residence_permit:"Permiso de residencia",work_permit:"Permiso de trabajo",family_reunification:"Reagrupaci√≥n familiar",naturalization:"Naturalizaci√≥n",documents_required:"Documentos requeridos",appointment_booking:"Reservar cita",status_check:"Verificar estado",help:"Ayuda y soporte"}}},bm:{translation:{nav:{dashboard:"B…îlen y…îr…î",inbox:"Bataki sanb…îr…î",send:"Ka ci",wizard:"D…õm…õbaga",history:"K…în…îkow",templates:"Misaliw",contacts:"T…õr…õmaw",ai:"AI Da…≤…õk…îr…îsili",multimodal:"AI Caman",voice:"Kan s…õb…õncikan",config:"Lab…õncogo",accessibility:"S…îr…îko",logout:"Ka b…î"},common:{save:"Ka mara",cancel:"Ka b√†n",delete:"Ka b…î",edit:"Ka y…õl…õma",close:"Ka datugu",search:"Ka …≤ini",filter:"Ka fil…õ",loading:"I b…õ don...",error:"Fili",success:"A k…õra",confirm:"Ka laj…õ",back:"Ka segin",next:"Nata",finish:"Ka ban",yes:"∆Üw…î",no:"Ayi"},email:{to:"Ma a ci",subject:"Kuma kunba",body:"Kuma",send:"Ka ci",draft:"Lab…õn",sent:"A cirata",failed:"A t…õ k…õ",schedule:"Ka waati sugandi",scheduleDate:"Don tile",scheduleTime:"L…õr…õ",attachment:"F…õn faralen",recipient:"M…îg…î min b…õ s…îr…î?",context:"Mun na i b…õ nin ci?",tone:"Kuma cogo jum…õn?",length:"Janw"},templates:{title:"Bataki misaliw",create:"Ka misali dilan",use:"Ka baara k…õ ni a ye",professional:"Baarak…õcogo",friendly:"Teriw ka cogo",formal:"J…õkulu",variables:"F…õn y…õl…õmanen",fillVariables:"Ka f…õnw fa"},stats:{title:"Jateb…îw",totalEmails:"Bataki b…õ…õ",successRate:"∆ù…õtaa hak…õ",uniqueRecipients:"M…îg…îw k…õr…õnk…õr…õnnin",last30Days:"Tile 30 t…õm…õnenw",byStatus:"Ka k…îr…î cogoya ma",topRecipients:"M…îg…î minw ka ca"},admin:{title:"Faransi jamana baarak…õcogo",prefecture:"Pref…õkitiiri",prefecture_appointment:"Pref…õkitiiri laj…õrencogo",visa:"Visa …≤inili",residence_permit:"Sigiy…îr…î s…õb…õn",work_permit:"Baara k…õcogo s…õb…õn",family_reunification:"Som…îg…îw laj…õ",naturalization:"Jamana denmis…õnw s…îr…îli",documents_required:"S…õb…õnw minw ka kan",appointment_booking:"Ka laj…õrencogo ta",status_check:"Ka cogoya laj…õ",help:"D…õm…õ ani k…îl…îsili"}}}},fallbackLng:"fr",lng:localStorage.getItem("i18nextLng")||"fr",interpolation:{escapeValue:!1},detection:{order:["localStorage","navigator"],caches:["localStorage"]}}),Xe.createRoot(document.getElementById("root")).render(e.jsx(y.StrictMode,{children:e.jsx(fo,{})}));
