(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,380446,e=>{"use strict";var s=e.i(843476),a=e.i(271645),t=e.i(339964),r=e.i(25652),l=e.i(555436),n=e.i(63209);let c=(0,e.i(475254).default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);function d({className:e=""}){let[d,i]=(0,a.useState)({totalSearches:0,avgExecutionTime:0,topSearches:[]}),[x,h]=(0,a.useState)([]),[o,m]=(0,a.useState)([]),[u,j]=(0,a.useState)(!0);(0,a.useEffect)(()=>{p()},[]);let p=async()=>{try{let[e,s,a]=await Promise.all([fetch("/api/search/analytics?type=stats"),fetch("/api/search/analytics?type=empty&limit=5"),fetch("/api/search/analytics?type=trends&days=7")]);if(e.ok){let s=await e.json();i(s)}if(s.ok){let e=await s.json();h(e.searches||[])}if(a.ok){let e=await a.json();m(e.trends||[])}}catch(e){console.error("Erreur chargement analytics:",e)}finally{j(!1)}};return u?(0,s.jsx)("div",{className:`flex items-center justify-center p-8 ${e}`,children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):(0,s.jsxs)("div",{className:`space-y-6 ${e}`,children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Total Recherches"}),(0,s.jsx)(l.Search,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:d.totalSearches})})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Temps Moyen"}),(0,s.jsx)(c,{className:"h-4 w-4 text-muted-foreground"})]}),(0,s.jsx)(t.CardContent,{children:(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[Math.round(d.avgExecutionTime),"ms"]})})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,s.jsx)(t.CardTitle,{className:"text-sm font-medium",children:"Recherches Vides"}),(0,s.jsx)(n.AlertCircle,{className:"h-4 w-4 text-orange-500"})]}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:x.reduce((e,s)=>e+s.count,0)})})]})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsxs)(t.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(r.TrendingUp,{className:"w-5 h-5 text-blue-600"}),"Recherches les Plus Populaires"]})}),(0,s.jsx)(t.CardContent,{children:d.topSearches.length>0?(0,s.jsx)("div",{className:"space-y-2",children:d.topSearches.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.query}),(0,s.jsxs)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-300 rounded-full",children:[e.count," fois"]})]},a))}):(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Aucune recherche enregistree"})})]}),x.length>0&&(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsxs)(t.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(n.AlertCircle,{className:"w-5 h-5 text-orange-500"}),"Recherches Sans Resultats"]})}),(0,s.jsxs)(t.CardContent,{children:[(0,s.jsx)("div",{className:"space-y-2",children:x.map((e,a)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-orange-50 dark:bg-orange-900/20 rounded-lg",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:e.query}),(0,s.jsxs)("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-700 dark:bg-orange-900/30 dark:text-orange-300 rounded-full",children:[e.count," fois"]})]},a))}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-3",children:"[emoji] Ces termes n'ont donne aucun resultat. Envisagez d'ameliorer l'indexation."})]})]}),o.length>0&&(0,s.jsxs)(t.Card,{children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsxs)(t.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)(c,{className:"w-5 h-5 text-green-600"}),"Tendances (7 derniers jours)"]})}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("div",{className:"space-y-2",children:o.map((e,a)=>{let t=Math.max(...o.map(e=>e.count)),r=t>0?e.count/t*100:0;return(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-600 dark:text-gray-400",children:[(0,s.jsx)("span",{children:new Date(e.date).toLocaleDateString("fr-FR",{month:"short",day:"numeric"})}),(0,s.jsxs)("span",{children:[e.count," recherches"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all",style:{width:`${r}%`}})})]},a)})})})]})]})}e.s(["default",()=>d],380446)}]);