(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,833884,e=>{"use strict";var s=e.i(843476),t=e.i(271645);let r=(0,t.memo)(({size:e="md",color:t="blue",className:r=""})=>(0,s.jsxs)("div",{className:`inline-block ${r}`,role:"status","aria-label":"Chargement",children:[(0,s.jsxs)("svg",{className:`animate-spin ${{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[e]} ${{blue:"text-blue-600",gray:"text-gray-600",white:"text-white"}[t]} gpu-accelerated`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{className:"sr-only",children:"Chargement..."})]}));r.displayName="LoadingSpinner";var a=e.i(165918);let i=(0,t.memo)(t.default.forwardRef(({variant:e="primary",size:t="md",isLoading:i=!1,className:l="",children:n,disabled:o,...c},d)=>{let m="primary"===e?{backgroundColor:a.colors.button,color:"white"}:{};return(0,s.jsx)("button",{ref:d,className:`
          inline-flex items-center justify-center font-medium rounded-lg transition-all duration-150 ease-out focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed will-change-transform
          ${{primary:"text-white hover:scale-105",secondary:"bg-gray-600 text-white hover:bg-gray-700 focus:ring-gray-500 hover:scale-105",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 hover:scale-105",outline:"border-2 border-gray-300 text-gray-700 hover:bg-gray-50 focus:ring-gray-500 hover:scale-105"}[e]}
          ${{sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"}[t]}
          ${l}
        `,style:m,disabled:o||i,...c,children:i?(0,s.jsxs)("span",{className:"flex items-center justify-center",children:[(0,s.jsx)(r,{size:"sm",color:"outline"===e?"gray":"white",className:"mr-2"}),"Chargement..."]}):n})}));i.displayName="Button",e.s(["Button",0,i],833884)},659544,e=>{"use strict";var s=e.i(843476),t=e.i(271645),r=e.i(975157);let a=t.forwardRef(({className:e,variant:t="default",size:a="default",...i},l)=>(0,s.jsx)("button",{className:(0,r.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{"bg-primary text-primary-foreground hover:bg-primary/90":"default"===t,"border border-input hover:bg-accent hover:text-accent-foreground":"outline"===t,"hover:bg-accent hover:text-accent-foreground":"ghost"===t,"bg-destructive text-destructive-foreground hover:bg-destructive/90":"destructive"===t},{"h-10 py-2 px-4":"default"===a,"h-9 px-3 rounded-md":"sm"===a,"h-11 px-8 rounded-md":"lg"===a},e),ref:l,...i}));a.displayName="Button",e.s(["Button",()=>a])},815518,e=>{"use strict";e.i(159354),e.s([])},716787,e=>{"use strict";e.i(339964),e.i(738171),e.i(447647),e.i(496640),e.i(473668),e.i(61418),e.i(659544),e.i(815518),e.i(888840),e.i(843476),e.i(964753),e.i(558700),e.s([],716787)},514764,e=>{"use strict";let s=(0,e.i(475254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>s],514764)},871689,e=>{"use strict";let s=(0,e.i(475254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>s],871689)},908406,e=>{"use strict";var s=e.i(271645);function t(){let[e,t]=(0,s.useState)([]);return{toast:(0,s.useCallback)(({title:e,description:s,variant:r="default"})=>{let a=Math.random().toString(36).substr(2,9),i={id:a,title:e,description:s,variant:r};return t(e=>[...e,i]),setTimeout(()=>{t(e=>e.filter(e=>e.id!==a))},5e3),a},[]),dismiss:(0,s.useCallback)(e=>{t(s=>s.filter(s=>s.id!==e))},[]),toasts:e}}e.s(["useToast",()=>t])},944135,e=>{"use strict";var s=e.i(843476),t=e.i(271645),r=e.i(217255),a=e.i(618566),i=e.i(50270),l=e.i(653145),n=e.i(994814),o=e.i(178583),c=e.i(514764),d=e.i(871689),m=e.i(63209),u=e.i(269638),x=e.i(63727),h=e.i(87316);e.i(716787);var g=e.i(339964),b=e.i(496640),p=e.i(908406),f=e.i(833884);let v=i.z.object({typeDossier:i.z.enum(["TITRE_SEJOUR","RECOURS_OQTF","NATURALISATION","REGROUPEMENT_FAMILIAL","ASILE","VISA","AUTRE"]),objetDemande:i.z.string().min(20,"Decrivez votre demande en minimum 20 caracteres"),dateEcheance:i.z.string().optional(),urgence:i.z.boolean().optional(),complementInfo:i.z.string().optional()}),j=[{value:"TITRE_SEJOUR",label:"Titre de Sejour",icon:"[emoji]",description:"Premiere demande ou renouvellement de titre de sejour"},{value:"RECOURS_OQTF",label:"Recours OQTF",icon:"ï¸",description:"Contestation d'une Obligation de Quitter le Territoire"},{value:"NATURALISATION",label:"Naturalisation",icon:"ðŸ‡«ðŸ‡·",description:"Demande de naturalisation francaise"},{value:"REGROUPEMENT_FAMILIAL",label:"Regroupement Familial",icon:"[emoji]â€[emoji]â€[emoji]â€[emoji]",description:"Faire venir votre famille en France"},{value:"ASILE",label:"Demande d'Asile",icon:"[emoji]ï¸",description:"Protection internationale"},{value:"VISA",label:"Visa",icon:"ï¸",description:"Demande de visa (court ou long sejour)"},{value:"AUTRE",label:"Autre demande",icon:"[emoji]",description:"Autre type de demarche administrative"}];function y(){let{data:e,status:i}=(0,r.useSession)(),y=(0,a.useRouter)(),{toast:N}=(0,p.useToast)(),[w,T]=(0,t.useState)(!1),[z,A]=(0,t.useState)(""),{register:E,handleSubmit:C,formState:{errors:R},setValue:S,watch:k}=(0,l.useForm)({resolver:(0,n.zodResolver)(v)});(0,t.useEffect)(()=>{"unauthenticated"===i?y.push("/auth/login"):e?.user?.role!=="CLIENT"&&y.push("/dashboard")},[e,i]);let O=async e=>{try{T(!0);let s=await fetch("/api/client/demandes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,priorite:e.urgence?"URGENTE":"NORMALE",statut:"BROUILLON"})});if(!s.ok){let e=await s.json();throw Error(e.error||"Erreur lors de l'envoi de la demande")}await s.json(),N({variant:"success",title:"Demande envoyee !",description:"Votre demande a ete transmise a votre avocat qui la traitera dans les plus brefs delais."}),y.push("/client/dossiers")}catch(e){N({variant:"destructive",title:"Erreur",description:e.message})}finally{T(!1)}},D=k("urgence");return(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-50 p-6",children:(0,s.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)(f.Button,{onClick:()=>y.back(),className:"mb-4 bg-gray-600 hover:bg-gray-700 text-white flex items-center gap-2",children:[(0,s.jsx)(d.ArrowLeft,{size:20}),"Retour"]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-md p-6",children:[(0,s.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[(0,s.jsx)(o.FileText,{className:"text-blue-600",size:32}),"Nouvelle Demande"]}),(0,s.jsx)("p",{className:"text-gray-600 mt-2",children:"Decrivez votre situation et votre demande. Votre avocat vous contactera rapidement."})]})]}),(0,s.jsxs)("form",{onSubmit:C(O),className:"space-y-6",children:[(0,s.jsxs)(g.Card,{className:"p-6 bg-white",children:[(0,s.jsxs)("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[(0,s.jsx)(x.Briefcase,{className:"text-blue-600",size:24}),"Type de demarche"]}),(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:j.map(e=>(0,s.jsx)("div",{onClick:()=>{A(e.value),S("typeDossier",e.value)},className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${z===e.value?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-blue-300 hover:bg-gray-50"}`,children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-3xl",children:e.icon}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:e.label}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description})]}),z===e.value&&(0,s.jsx)(u.CheckCircle,{className:"text-blue-600",size:20})]})},e.value))}),R.typeDossier&&(0,s.jsxs)("p",{className:"mt-2 text-sm text-red-600 flex items-center gap-1",children:[(0,s.jsx)(m.AlertCircle,{size:14}),R.typeDossier.message]})]}),(0,s.jsxs)(g.Card,{className:"p-6 bg-white",children:[(0,s.jsx)("h2",{className:"text-xl font-semibold mb-4",children:"Decrivez votre demande"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Objet de votre demande *"}),(0,s.jsx)("textarea",{...E("objetDemande"),rows:5,placeholder:"Decrivez votre situation et ce que vous souhaitez obtenir (minimum 20 caracteres)...  Exemples : - Je souhaite renouveler mon titre de sejour qui expire le 15/06/2026 - J'ai recu une OQTF et je souhaite faire un recours - Je vis en France depuis 5 ans et souhaite demander la naturalisation",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 resize-none"}),R.objetDemande&&(0,s.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center gap-1",children:[(0,s.jsx)(m.AlertCircle,{size:14}),R.objetDemande.message]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date limite (si applicable)"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(h.Calendar,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,s.jsx)("input",{type:"date",...E("dateEcheance"),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500"})]}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Par ex: date d'expiration de titre, date d'audience..."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Situation urgente ?"}),(0,s.jsxs)("div",{className:"flex items-center gap-3 h-12",children:[(0,s.jsx)("input",{type:"checkbox",...E("urgence"),id:"urgence",className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,s.jsx)("label",{htmlFor:"urgence",className:"text-gray-700 cursor-pointer",children:"Oui, c'est urgent"})]}),D&&(0,s.jsx)(b.Badge,{variant:"danger",children:"Traitement prioritaire"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Informations complementaires (optionnel)"}),(0,s.jsx)("textarea",{...E("complementInfo"),rows:3,placeholder:"Ajoutez toute information utile : documents deja en votre possession, demarches deja effectuees, questions specifiques...",className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 resize-none"})]})]})]}),(0,s.jsx)(g.Card,{className:"p-4 bg-blue-50 border border-blue-200",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(m.AlertCircle,{className:"text-blue-600 mt-1",size:20}),(0,s.jsxs)("div",{className:"text-sm text-blue-900",children:[(0,s.jsx)("p",{className:"font-medium mb-1",children:"a savoir :"}),(0,s.jsxs)("ul",{className:"space-y-1 list-disc list-inside",children:[(0,s.jsx)("li",{children:"Votre demande sera transmise a votre avocat"}),(0,s.jsx)("li",{children:"Vous recevrez une confirmation par email"}),(0,s.jsx)("li",{children:"L'avocat vous contactera sous 24-48h"}),(0,s.jsx)("li",{children:'Vous pourrez suivre l\'avancement dans votre espace "Mes Dossiers"'})]})]})]})}),(0,s.jsxs)("div",{className:"flex gap-4",children:[(0,s.jsx)(f.Button,{type:"button",onClick:()=>y.back(),className:"flex-1 bg-gray-600 hover:bg-gray-700 text-white",children:"Annuler"}),(0,s.jsx)(f.Button,{type:"submit",disabled:w,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white flex items-center justify-center gap-2",children:w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Envoi en cours..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.Send,{size:20}),"Envoyer ma Demande"]})})]})]})]})})}e.s(["default",()=>y,"dynamic",0,"force-dynamic"])}]);