(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,659544,e=>{"use strict";var t=e.i(843476),r=e.i(271645),a=e.i(975157);let s=r.forwardRef(({className:e,variant:r="default",size:s="default",...i},l)=>(0,t.jsx)("button",{className:(0,a.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{"bg-primary text-primary-foreground hover:bg-primary/90":"default"===r,"border border-input hover:bg-accent hover:text-accent-foreground":"outline"===r,"hover:bg-accent hover:text-accent-foreground":"ghost"===r,"bg-destructive text-destructive-foreground hover:bg-destructive/90":"destructive"===r},{"h-10 py-2 px-4":"default"===s,"h-9 px-3 rounded-md":"sm"===s,"h-11 px-8 rounded-md":"lg"===s},e),ref:l,...i}));s.displayName="Button",e.s(["Button",()=>s])},815518,e=>{"use strict";e.i(159354),e.s([])},716787,e=>{"use strict";e.i(339964),e.i(738171),e.i(447647),e.i(496640),e.i(473668),e.i(61418),e.i(659544),e.i(815518),e.i(888840),e.i(843476),e.i(964753),e.i(558700),e.s([],716787)},727612,e=>{"use strict";let t=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],727612)},343432,e=>{"use strict";let t=(0,e.i(475254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>t],343432)},592930,657359,e=>{"use strict";let t=(0,e.i(475254).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>t],592930);var r=e.i(843476);function a({columns:e,data:t,onRowClick:a}){return(0,r.jsxs)("div",{className:"overflow-x-auto",children:[(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[(0,r.jsx)("thead",{className:"bg-gray-50 dark:bg-gray-800",children:(0,r.jsx)("tr",{children:e.map(e=>(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:e.header},String(e.accessor)))})}),(0,r.jsx)("tbody",{className:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700",children:t.map(t=>(0,r.jsx)("tr",{onClick:()=>a?.(t),className:a?"cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800":"",children:e.map(e=>{let a=t[e.accessor];return(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 dark:text-gray-100",children:e.render?e.render(a,t):String(a)},String(e.accessor))})},t.id))})]}),0===t.length&&(0,r.jsx)("div",{className:"text-center py-12 text-gray-500 dark:text-gray-400",children:"Aucune donnee a afficher"})]})}e.s(["Table",()=>a],657359)},867026,e=>{"use strict";var t=e.i(843476),r=e.i(217255),a=e.i(271645),s=e.i(107233),i=e.i(555436),l=e.i(592930),d=e.i(727612),n=e.i(263488),o=e.i(343432);let c=(0,e.i(475254).default)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);var m=e.i(284614),u=e.i(761911);e.i(716787);var x=e.i(339964),p=e.i(738171),g=e.i(496640),h=e.i(558700),y=e.i(964753),b=e.i(61418),v=e.i(888840),f=e.i(657359),j=e.i(159354),k=e.i(653145),N=e.i(994814),w=e.i(50270);let C=w.z.object({nom:w.z.string().min(2,"Nom requis (min 2 caracteres)"),type:w.z.enum(["particulier","entreprise"]),email:w.z.string().email("Email invalide"),telephone:w.z.string().min(10,"Telephone invalide"),adresse:w.z.string().min(5,"Adresse requise"),ville:w.z.string().min(2,"Ville requise"),codePostal:w.z.string().min(5,"Code postal requis"),siret:w.z.string().optional(),statut:w.z.enum(["actif","inactif","prospect"])}),S=[{id:"1",nom:"SARL Martin",type:"entreprise",email:"contact@sarl-martin.fr",telephone:"0145678901",adresse:"12 Rue de la Paix",ville:"Paris",codePostal:"75001",siret:"12345678901234",nbDossiers:3,dateCreation:"2023-06-15",statut:"actif"},{id:"2",nom:"SAS TechCorp",type:"entreprise",email:"info@techcorp.com",telephone:"0198765432",adresse:"45 Avenue des Champs",ville:"Lyon",codePostal:"69001",siret:"98765432109876",nbDossiers:5,dateCreation:"2023-08-20",statut:"actif"},{id:"3",nom:"M. Dupont Jean",type:"particulier",email:"jean.dupont@email.com",telephone:"0612345678",adresse:"8 Rue Victor Hugo",ville:"Marseille",codePostal:"13001",nbDossiers:1,dateCreation:"2024-01-10",statut:"actif"},{id:"4",nom:"SCI Investissement",type:"entreprise",email:"sci@invest.fr",telephone:"0478901234",adresse:"23 Boulevard Haussmann",ville:"Paris",codePostal:"75009",siret:"11122233344455",nbDossiers:2,dateCreation:"2023-11-05",statut:"actif"},{id:"5",nom:"Mme Bernard Sophie",type:"particulier",email:"sophie.bernard@mail.com",telephone:"0623456789",adresse:"15 Allee des Roses",ville:"Toulouse",codePostal:"31000",nbDossiers:1,dateCreation:"2023-12-01",statut:"actif"},{id:"6",nom:"EURL Conseil Plus",type:"entreprise",email:"contact@conseil-plus.fr",telephone:"0467890123",adresse:"7 Place Bellecour",ville:"Lyon",codePostal:"69002",siret:"55566677788899",nbDossiers:0,dateCreation:"2024-01-20",statut:"prospect"},{id:"7",nom:"M. Lefebvre Marc",type:"particulier",email:"marc.lefebvre@mail.fr",telephone:"0634567890",adresse:"22 Rue Nationale",ville:"Lille",codePostal:"59000",nbDossiers:2,dateCreation:"2023-10-12",statut:"actif"},{id:"8",nom:"SAS Innovation Tech",type:"entreprise",email:"contact@innovation-tech.fr",telephone:"0456789012",adresse:"88 Avenue de la Republique",ville:"Bordeaux",codePostal:"33000",siret:"77788899900011",nbDossiers:4,dateCreation:"2023-07-08",statut:"actif"},{id:"9",nom:"Mme Moreau Claire",type:"particulier",email:"claire.moreau@email.com",telephone:"0645678901",adresse:"5 Impasse du Parc",ville:"Nantes",codePostal:"44000",nbDossiers:0,dateCreation:"2024-01-15",statut:"prospect"},{id:"10",nom:"SARL Digital Services",type:"entreprise",email:"info@digital-services.fr",telephone:"0423456789",adresse:"31 Boulevard Saint-Michel",ville:"Nice",codePostal:"06000",siret:"22233344455566",nbDossiers:3,dateCreation:"2023-09-25",statut:"actif"}],P={actif:"Actif",inactif:"Inactif",prospect:"Prospect"},M={actif:"success",inactif:"default",prospect:"info"},D={particulier:"Particulier",entreprise:"Entreprise"};function L(){let{data:e,status:w}=(0,r.useSession)(),[L,T]=(0,a.useState)(S),[A,R]=(0,a.useState)(""),[z,B]=(0,a.useState)("all"),[V,E]=(0,a.useState)("all"),[I,O]=(0,a.useState)(!1),[$,U]=(0,a.useState)(null),[q,H]=(0,a.useState)(1),{addToast:F}=(0,v.useToast)(),{register:G,handleSubmit:J,reset:K,watch:Q,formState:{errors:W}}=(0,k.useForm)({resolver:(0,N.zodResolver)(C)}),X=Q("type"),Y=(0,a.useMemo)(()=>L.filter(e=>{let t=e.nom.toLowerCase().includes(A.toLowerCase())||e.email.toLowerCase().includes(A.toLowerCase())||e.ville.toLowerCase().includes(A.toLowerCase()),r="all"===z||e.type===z,a="all"===V||e.statut===V;return t&&r&&a}),[L,A,z,V]),Z=Math.ceil(Y.length/10),_=(0,a.useMemo)(()=>{let e=(q-1)*10;return Y.slice(e,e+10)},[Y,q]),ee=(0,a.useMemo)(()=>({total:L.length,actifs:L.filter(e=>"actif"===e.statut).length,entreprises:L.filter(e=>"entreprise"===e.type).length,prospects:L.filter(e=>"prospect"===e.statut).length}),[L]),et=[{accessor:"nom",header:"Nom",render:(e,r)=>(0,t.jsxs)("div",{className:"flex items-center gap-2",children:["entreprise"===r.type?(0,t.jsx)(c,{className:"w-4 h-4 text-blue-500"}):(0,t.jsx)(m.User,{className:"w-4 h-4 text-gray-500"}),(0,t.jsx)("span",{className:"font-medium",children:e})]})},{accessor:"type",header:"Type",render:e=>D[e]},{accessor:"email",header:"Contact",render:(e,r)=>(0,t.jsxs)("div",{className:"space-y-1 text-sm",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[(0,t.jsx)(n.Mail,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:r.email})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1 text-gray-600 dark:text-gray-400",children:[(0,t.jsx)(o.Phone,{className:"w-3 h-3"}),(0,t.jsx)("span",{children:r.telephone})]})]})},{accessor:"ville",header:"Ville",render:(e,t)=>`${t.codePostal} ${e}`},{accessor:"statut",header:"Statut",render:e=>(0,t.jsx)(g.Badge,{variant:M[e],children:P[e]})},{accessor:"nbDossiers",header:"Dossiers",render:e=>(0,t.jsx)("span",{className:e>0?"font-semibold text-blue-600 dark:text-blue-400":"text-gray-400",children:e})},{accessor:"dateCreation",header:"Date creation"},{accessor:"id",header:"Actions",render:(e,r)=>(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>{U(r),K(r),O(!0)},className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Modifier",children:(0,t.jsx)(l.Edit2,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{var e;let t;return e=r.id,void((t=L.find(t=>t.id===e))&&t.nbDossiers>0?F({variant:"error",title:"Suppression impossible",message:`Le client ${t.nom} a ${t.nbDossiers} dossier(s) associe(s).`}):window.confirm(`etes-vous sur de vouloir supprimer le client ${t?.nom} ?`)&&(T(t=>t.filter(t=>t.id!==e)),F({variant:"info",title:"Client supprime",message:`Le client ${t?.nom} a ete supprime.`})))},className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Supprimer",disabled:r.nbDossiers>0,children:(0,t.jsx)(d.Trash2,{className:"w-4 h-4"})})]})}];return"loading"===w?(0,t.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,t.jsx)("div",{className:"text-gray-600 dark:text-gray-400",children:"Chargement..."})}):(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsx)(y.Breadcrumb,{items:[{label:"Clients"}]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Gestion des clients"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gerez votre portefeuille de clients"})]}),(0,t.jsxs)("button",{onClick:()=>{U(null),K({nom:"",type:"particulier",email:"",telephone:"",adresse:"",ville:"",codePostal:"",siret:"",statut:"prospect"}),O(!0)},className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,t.jsx)(s.Plus,{className:"w-4 h-4"}),"Nouveau client"]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(p.StatCard,{title:"Total clients",value:ee.total,icon:u.Users,trend:{value:8,isPositive:!0}}),(0,t.jsx)(p.StatCard,{title:"Actifs",value:ee.actifs,icon:m.User}),(0,t.jsx)(p.StatCard,{title:"Entreprises",value:ee.entreprises,icon:c}),(0,t.jsx)(p.StatCard,{title:"Prospects",value:ee.prospects,icon:u.Users})]}),ee.prospects>0&&(0,t.jsxs)(b.Alert,{variant:"info",children:["Vous avez ",ee.prospects," prospect(s) a convertir en clients actifs."]}),(0,t.jsxs)(x.Card,{children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(i.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,t.jsx)("input",{type:"text",placeholder:"Rechercher par nom, email ou ville...",value:A,onChange:e=>R(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("select",{value:z,onChange:e=>B(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[(0,t.jsx)("option",{value:"all",children:"Tous les types"}),Object.entries(D).map(([e,r])=>(0,t.jsx)("option",{value:e,children:r},e))]}),(0,t.jsxs)("select",{value:V,onChange:e=>E(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[(0,t.jsx)("option",{value:"all",children:"Tous les statuts"}),Object.entries(P).map(([e,r])=>(0,t.jsx)("option",{value:e,children:r},e))]})]})]}),(A||"all"!==z||"all"!==V)&&(0,t.jsxs)("div",{className:"mt-3 text-sm text-gray-600 dark:text-gray-400",children:[Y.length," resultat(s) trouve(s)"]})]}),(0,t.jsxs)(x.Card,{children:[(0,t.jsx)(f.Table,{columns:et,data:_}),Z>1&&(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(h.Pagination,{currentPage:q,totalPages:Z,onPageChange:H,itemsPerPage:10,totalItems:Y.length})})]}),(0,t.jsx)(j.Modal,{isOpen:I,onClose:()=>O(!1),title:$?"Modifier le client":"Creer un client",children:(0,t.jsxs)("form",{onSubmit:J(e=>{if($)T(t=>t.map(t=>t.id===$.id?{...t,...e}:t)),F({variant:"success",title:"Client modifie",message:`Le client ${e.nom} a ete modifie avec succes.`});else{let t={id:Date.now().toString(),...e,nbDossiers:0,dateCreation:new Date().toISOString().split("T")[0]};T(e=>[t,...e]),F({variant:"success",title:"Client cree",message:`Le client ${e.nom} a ete cree avec succes.`})}O(!1)}),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type *"}),(0,t.jsx)("select",{...G("type"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:Object.entries(D).map(([e,r])=>(0,t.jsx)("option",{value:e,children:r},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Statut *"}),(0,t.jsx)("select",{...G("statut"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:Object.entries(P).map(([e,r])=>(0,t.jsx)("option",{value:e,children:r},e))})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Nom ","entreprise"===X?"de l'entreprise":"complet"," *"]}),(0,t.jsx)("input",{...G("nom"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"entreprise"===X?"SARL Dupont & Fils":"M. Dupont Jean"}),W.nom&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:W.nom.message})]}),"entreprise"===X&&(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"SIRET"}),(0,t.jsx)("input",{...G("siret"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",placeholder:"12345678901234",maxLength:14})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Email *"}),(0,t.jsx)("input",{type:"email",...G("email"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),W.email&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:W.email.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Telephone *"}),(0,t.jsx)("input",{type:"tel",...G("telephone"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),W.telephone&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:W.telephone.message})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Adresse *"}),(0,t.jsx)("input",{...G("adresse"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),W.adresse&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:W.adresse.message})]}),(0,t.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,t.jsxs)("div",{className:"col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Ville *"}),(0,t.jsx)("input",{...G("ville"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),W.ville&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:W.ville.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Code postal *"}),(0,t.jsx)("input",{...G("codePostal"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",maxLength:5}),W.codePostal&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:W.codePostal.message})]})]}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>O(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Annuler"}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:$?"Modifier":"Creer"})]})]})})]})}e.s(["default",()=>L,"dynamic",0,"force-dynamic"],867026)}]);