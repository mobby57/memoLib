(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,659544,e=>{"use strict";var s=e.i(843476),i=e.i(271645),t=e.i(975157);let r=i.forwardRef(({className:e,variant:i="default",size:r="default",...a},l)=>(0,s.jsx)("button",{className:(0,t.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{"bg-primary text-primary-foreground hover:bg-primary/90":"default"===i,"border border-input hover:bg-accent hover:text-accent-foreground":"outline"===i,"hover:bg-accent hover:text-accent-foreground":"ghost"===i,"bg-destructive text-destructive-foreground hover:bg-destructive/90":"destructive"===i},{"h-10 py-2 px-4":"default"===r,"h-9 px-3 rounded-md":"sm"===r,"h-11 px-8 rounded-md":"lg"===r},e),ref:l,...a}));r.displayName="Button",e.s(["Button",()=>r])},891314,e=>{"use strict";var s=e.i(843476),i=e.i(271645),t=e.i(339964),r=e.i(659544),a=e.i(496640),l=e.i(61418);function n(){let[e,n]=(0,i.useState)([]),[c,d]=(0,i.useState)(!0);(0,i.useEffect)(()=>{o();let e=setInterval(o,1e4);return()=>clearInterval(e)},[]);let o=async()=>{try{let e=await fetch("/api/notifications/active"),s=await e.json();n(s),d(!1)}catch(e){console.error("Erreur chargement notifications:",e),d(!1)}},x=async(e,s)=>{console.log("Action:",s.type,"pour notification:",e),"open-form"===s.type?window.location.href=`/lawyer/workflows/form/${e}`:"schedule"===s.type?window.location.href=`/lawyer/workflows/calendar/${e}`:"reply"===s.type&&(window.location.href=`/lawyer/workflows/email/${e}`)},m=e=>"critical"===e?"border-red-500 bg-red-50":"warning"===e?"border-orange-500 bg-orange-50":"border-blue-500 bg-blue-50",h=e=>"critical"===e?"[emoji]":"warning"===e?"️":"ℹ️";if(c)return(0,s.jsx)("div",{className:"container mx-auto p-6",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,s.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,s.jsx)("div",{className:"h-32 bg-gray-200 rounded"})]})});let u=e.filter(e=>"critical"===e.severity),f=e.filter(e=>"critical"!==e.severity);return(0,s.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"[emoji] Notifications Interactives"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Actions requises pour vos emails et workflows"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsx)(t.Card,{children:(0,s.jsxs)(t.CardHeader,{className:"pb-2",children:[(0,s.jsx)(CardDescription,{children:"Notifications Actives"}),(0,s.jsx)(t.CardTitle,{className:"text-3xl",children:e.length})]})}),(0,s.jsx)(t.Card,{children:(0,s.jsxs)(t.CardHeader,{className:"pb-2",children:[(0,s.jsx)(CardDescription,{children:"Actions Critiques"}),(0,s.jsx)(t.CardTitle,{className:"text-3xl text-red-600",children:u.length})]})}),(0,s.jsx)(t.Card,{children:(0,s.jsxs)(t.CardHeader,{className:"pb-2",children:[(0,s.jsx)(CardDescription,{children:"Necessitent Action"}),(0,s.jsx)(t.CardTitle,{className:"text-3xl text-orange-600",children:e.filter(e=>e.requiresAction).length})]})})]}),u.length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold text-red-600",children:"[emoji] Actions Critiques"}),u.map(e=>(0,s.jsx)(l.Alert,{className:`border-2 ${m(e.severity)}`,children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(AlertTitle,{className:"flex items-center gap-2 text-lg font-bold",children:[(0,s.jsx)("span",{className:"text-2xl",children:h(e.severity)}),e.title]}),(0,s.jsx)(AlertDescription,{className:"mt-2",children:e.message}),e.expiresAt&&(0,s.jsxs)("p",{className:"text-sm text-red-600 mt-2",children:["Expire: ",new Date(e.expiresAt).toLocaleString("fr-FR")]})]}),(0,s.jsx)("div",{className:"flex flex-col gap-2 ml-4",children:e.actions.map(i=>(0,s.jsx)(r.Button,{variant:i.primary?"default":"outline",size:"sm",onClick:()=>x(e.id,i),className:i.primary?"bg-red-600 hover:bg-red-700":"",children:i.label},i.id))})]})},e.id))]}),f.length>0&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h2",{className:"text-2xl font-bold",children:"[emoji] Autres Notifications"}),f.map(e=>(0,s.jsxs)(t.Card,{className:`border-l-4 ${m(e.severity)}`,children:[(0,s.jsx)(t.CardHeader,{children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)(t.CardTitle,{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{children:h(e.severity)}),e.title]}),(0,s.jsx)(CardDescription,{className:"mt-2",children:e.message})]}),(0,s.jsx)(a.Badge,{variant:e.requiresAction?"default":"secondary",children:e.requiresAction?"Action Requise":"Information"})]})}),(0,s.jsx)(t.CardContent,{children:(0,s.jsxs)("div",{className:"flex gap-2",children:[e.actions.map(i=>(0,s.jsx)(r.Button,{variant:i.primary?"default":"outline",size:"sm",onClick:()=>x(e.id,i),children:i.label},i.id)),e.dismissible&&(0,s.jsx)(r.Button,{variant:"ghost",size:"sm",children:"Ignorer"})]})})]},e.id))]}),0===e.length&&(0,s.jsx)(t.Card,{children:(0,s.jsxs)(t.CardContent,{className:"py-12 text-center",children:[(0,s.jsx)("p",{className:"text-2xl mb-2"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Aucune notification en attente"})]})})]})}e.s(["default",()=>n,"dynamic",0,"force-dynamic"])}]);