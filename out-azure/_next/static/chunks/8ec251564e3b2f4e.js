(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,440160,e=>{"use strict";let t=(0,e.i(475254).default)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);e.s(["Download",()=>t],440160)},727612,e=>{"use strict";let t=(0,e.i(475254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],727612)},815518,e=>{"use strict";e.i(159354),e.s([])},908406,e=>{"use strict";var t=e.i(271645);function r(){let[e,r]=(0,t.useState)([]);return{toast:(0,t.useCallback)(({title:e,description:t,variant:a="default"})=>{let s=Math.random().toString(36).substr(2,9),i={id:s,title:e,description:t,variant:a};return r(e=>[...e,i]),setTimeout(()=>{r(e=>e.filter(e=>e.id!==s))},5e3),s},[]),dismiss:(0,t.useCallback)(e=>{r(t=>t.filter(t=>t.id!==e))},[]),toasts:e}}e.s(["useToast",()=>r])},672483,e=>{"use strict";var t=e.i(843476),r=e.i(271645),a=e.i(653145),s=e.i(994814),i=e.i(50270),d=e.i(908406),l=e.i(496640),n=e.i(339964),o=e.i(447647);e.i(815518);var c=e.i(159354),u=e.i(61418),m=e.i(738171),x=e.i(964753),g=e.i(558700),h=e.i(178583),y=e.i(107233),p=e.i(440160),b=e.i(555436);let v=(0,e.i(475254).default)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var j=e.i(727612);let k=i.z.object({numero:i.z.string().min(1,"Le numero est requis"),titre:i.z.string().min(3,"Le titre doit contenir au moins 3 caracteres"),clientId:i.z.string().min(1,"Le client est requis"),type:i.z.enum(["CIVIL","PENAL","COMMERCIAL","ADMINISTRATIF"]),statut:i.z.enum(["EN_COURS","CLOS","EN_ATTENTE","ARCHIVE"]),dateOuverture:i.z.string().min(1,"La date d'ouverture est requise"),dateCloture:i.z.string().optional(),description:i.z.string().optional()}),N=[{id:"1",numero:"DOS-2024-001",titre:"Litige commercial SARL Martin",clientId:"1",clientNom:"Jean Dupont",type:"COMMERCIAL",statut:"EN_COURS",dateOuverture:"2024-01-15",description:"Litige avec fournisseur sur qualite marchandise"},{id:"2",numero:"DOS-2024-002",titre:"Divorce contentieux",clientId:"2",clientNom:"Marie Martin",type:"CIVIL",statut:"EN_COURS",dateOuverture:"2024-02-20"},{id:"3",numero:"DOS-2024-003",titre:"Contentieux administratif permis construire",clientId:"3",clientNom:"SCI Investimo",type:"ADMINISTRATIF",statut:"EN_ATTENTE",dateOuverture:"2024-03-10"},{id:"4",numero:"DOS-2023-045",titre:"Defense penale - Vol",clientId:"4",clientNom:"Thomas Bernard",type:"PENAL",statut:"CLOS",dateOuverture:"2023-11-05",dateCloture:"2024-01-20"},{id:"5",numero:"DOS-2023-032",titre:"Succession familiale",clientId:"5",clientNom:"Sophie Dubois",type:"CIVIL",statut:"ARCHIVE",dateOuverture:"2023-09-12",dateCloture:"2023-12-30"}],f=[{id:"1",nom:"Jean Dupont"},{id:"2",nom:"Marie Martin"},{id:"3",nom:"SCI Investimo"},{id:"4",nom:"Thomas Bernard"},{id:"5",nom:"Sophie Dubois"}],C={CIVIL:"Civil",PENAL:"Penal",COMMERCIAL:"Commercial",ADMINISTRATIF:"Administratif"},w={EN_COURS:"En cours",CLOS:"Clos",EN_ATTENTE:"En attente",ARCHIVE:"Archive"},L={EN_COURS:"info",CLOS:"success",EN_ATTENTE:"warning",ARCHIVE:"default"};function S(){let[e,i]=(0,r.useState)(N),[S,T]=(0,r.useState)(!1),[I,A]=(0,r.useState)(null),[E,O]=(0,r.useState)(""),[M,D]=(0,r.useState)("ALL"),[R,P]=(0,r.useState)("ALL"),[V,z]=(0,r.useState)(1),{toast:_}=(0,d.useToast)(),{register:q,handleSubmit:F,reset:U,formState:{errors:B}}=(0,a.useForm)({resolver:(0,s.zodResolver)(k)}),H=(0,r.useMemo)(()=>e.filter(e=>{let t=e.numero.toLowerCase().includes(E.toLowerCase())||e.titre.toLowerCase().includes(E.toLowerCase())||e.clientNom.toLowerCase().includes(E.toLowerCase()),r="ALL"===M||e.type===M,a="ALL"===R||e.statut===R;return t&&r&&a}),[e,E,M,R]),$=Math.ceil(H.length/10),G=(0,r.useMemo)(()=>{let e=(V-1)*10;return H.slice(e,e+10)},[H,V]),J=(0,r.useMemo)(()=>({total:e.length,enCours:e.filter(e=>"EN_COURS"===e.statut).length,enAttente:e.filter(e=>"EN_ATTENTE"===e.statut).length,clos:e.filter(e=>"CLOS"===e.statut).length}),[e]),K=[{key:"numero",header:"Numero"},{key:"titre",header:"Titre"},{key:"clientNom",header:"Client"},{key:"type",header:"Type",render:e=>C[e.type]},{key:"statut",header:"Statut",render:e=>(0,t.jsx)(l.Badge,{variant:L[e.statut],children:w[e.statut]})},{key:"dateOuverture",header:"Date ouverture"},{key:"actions",header:"Actions",render:r=>(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>{A(r),U(r),T(!0)},className:"p-1 text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300",title:"Modifier",children:(0,t.jsx)(v,{className:"w-4 h-4"})}),(0,t.jsx)("button",{onClick:()=>{var t;let a;return t=r.id,a=e.find(e=>e.id===t),void(window.confirm(`etes-vous sur de vouloir supprimer le dossier ${a?.numero} ?`)&&(i(e=>e.filter(e=>e.id!==t)),_({variant:"default",title:"Dossier supprime",description:`Le dossier ${a?.numero} a ete supprime.`})))},className:"p-1 text-red-600 hover:text-red-800 dark:text-red-400 dark:hover:text-red-300",title:"Supprimer",children:(0,t.jsx)(j.Trash2,{className:"w-4 h-4"})})]})}];return(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsx)(x.Breadcrumb,{items:[{label:"Dossiers"}]}),(0,t.jsxs)("div",{className:"flex justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Gestion des dossiers"}),(0,t.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-1",children:"Gerez vos dossiers juridiques et leur suivi"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("button",{onClick:()=>{_({variant:"default",title:"Export en cours",description:"Votre fichier CSV sera telecharge dans quelques instants."})},className:"inline-flex items-center gap-2 px-4 py-2 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700",children:[(0,t.jsx)(p.Download,{className:"w-4 h-4"}),"Exporter"]}),(0,t.jsxs)("a",{href:"/dossiers/nouveau",className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[(0,t.jsx)(y.Plus,{className:"w-4 h-4"}),"Nouveau dossier"]})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,t.jsx)(m.StatCard,{title:"Total dossiers",value:J.total,icon:h.FileText,trend:{value:12,isPositive:!0}}),(0,t.jsx)(m.StatCard,{title:"En cours",value:J.enCours,icon:h.FileText}),(0,t.jsx)(m.StatCard,{title:"En attente",value:J.enAttente,icon:h.FileText}),(0,t.jsx)(m.StatCard,{title:"Clos",value:J.clos,icon:h.FileText})]}),(0,t.jsx)(u.Alert,{variant:"info",children:"Les dossiers archives ne sont pas inclus dans les statistiques actives ci-dessus."}),(0,t.jsxs)(n.Card,{children:[(0,t.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,t.jsxs)("div",{className:"flex-1 relative",children:[(0,t.jsx)(b.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),(0,t.jsx)("input",{type:"text",placeholder:"Rechercher par numero, titre ou client...",value:E,onChange:e=>O(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)("select",{value:M,onChange:e=>D(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[(0,t.jsx)("option",{value:"ALL",children:"Tous les types"}),Object.entries(C).map(([e,r])=>(0,t.jsx)("option",{value:e,children:r},e))]}),(0,t.jsxs)("select",{value:R,onChange:e=>P(e.target.value),className:"px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[(0,t.jsx)("option",{value:"ALL",children:"Tous les statuts"}),Object.entries(w).map(([e,r])=>(0,t.jsx)("option",{value:e,children:r},e))]})]})]}),(E||"ALL"!==M||"ALL"!==R)&&(0,t.jsxs)("div",{className:"mt-3 text-sm text-gray-600 dark:text-gray-400",children:[H.length," resultat(s) trouve(s)"]})]}),(0,t.jsxs)(n.Card,{children:[(0,t.jsx)(o.Table,{columns:K,data:G}),$>1&&(0,t.jsx)("div",{className:"mt-4",children:(0,t.jsx)(g.Pagination,{currentPage:V,totalPages:$,onPageChange:z,itemsPerPage:10,totalItems:H.length})})]}),(0,t.jsx)(c.Modal,{isOpen:S,onClose:()=>T(!1),title:I?"Modifier le dossier":"Creer un dossier",children:(0,t.jsxs)("form",{onSubmit:F(e=>{if(I)i(t=>t.map(t=>t.id===I.id?{...t,...e,clientNom:f.find(t=>t.id===e.clientId)?.nom||""}:t)),_({variant:"success",title:"Dossier modifie",description:`Le dossier ${e.numero} a ete modifie avec succes.`});else{let t={...e,id:Date.now().toString(),clientNom:f.find(t=>t.id===e.clientId)?.nom||""};i(e=>[t,...e]),_({variant:"success",title:"Dossier cree",description:`Le dossier ${e.numero} a ete cree avec succes.`})}T(!1)}),className:"space-y-4",children:[(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Numero *"}),(0,t.jsx)("input",{...q("numero"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),B.numero&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:B.numero.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Client *"}),(0,t.jsxs)("select",{...q("clientId"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:[(0,t.jsx)("option",{value:"",children:"Selectionner un client"}),f.map(e=>(0,t.jsx)("option",{value:e.id,children:e.nom},e.id))]}),B.clientId&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:B.clientId.message})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Titre *"}),(0,t.jsx)("input",{...q("titre"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),B.titre&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:B.titre.message})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Type *"}),(0,t.jsx)("select",{...q("type"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:Object.entries(C).map(([e,r])=>(0,t.jsx)("option",{value:e,children:r},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Statut *"}),(0,t.jsx)("select",{...q("statut"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white",children:Object.entries(w).map(([e,r])=>(0,t.jsx)("option",{value:e,children:r},e))})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date d'ouverture *"}),(0,t.jsx)("input",{type:"date",...q("dateOuverture"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),B.dateOuverture&&(0,t.jsx)("p",{className:"mt-1 text-sm text-red-600",children:B.dateOuverture.message})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Date de cloture"}),(0,t.jsx)("input",{type:"date",...q("dateCloture"),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),(0,t.jsx)("textarea",{...q("description"),rows:3,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white"})]}),(0,t.jsxs)("div",{className:"flex gap-2 justify-end pt-4",children:[(0,t.jsx)("button",{type:"button",onClick:()=>T(!1),className:"px-4 py-2 text-gray-700 dark:text-gray-300 bg-gray-100 dark:bg-gray-700 rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600",children:"Annuler"}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:I?"Modifier":"Creer"})]})]})})]})}e.s(["default",()=>S,"dynamic",0,"force-dynamic"],672483)}]);