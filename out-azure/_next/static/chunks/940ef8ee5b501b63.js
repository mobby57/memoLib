(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,341584,e=>{"use strict";var s=e.i(843476),t=e.i(271645),r=e.i(618566),a=e.i(283599),l=e.i(311132);let n=["RECEIVED","FACTS_EXTRACTED","CONTEXT_IDENTIFIED","OBLIGATIONS_DEDUCED","MISSING_IDENTIFIED","RISK_EVALUATED","ACTION_PROPOSED","READY_FOR_HUMAN"];function i({currentState:e,completedStates:t,onClick:r}){let a=n.indexOf(e);return(0,s.jsxs)("div",{className:"w-full py-8",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute top-5 left-0 right-0 h-1 bg-gray-200",children:(0,s.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-green-500 transition-all duration-500",style:{width:`${a/(n.length-1)*100}%`}})}),(0,s.jsx)("div",{className:"relative flex justify-between",children:n.map((i,c)=>{let d=l.WORKSPACE_STATES[i],o=t.includes(i),x=i===e,m=r&&c<=a;return(0,s.jsxs)("button",{onClick:()=>m&&r(i),disabled:!m,className:`
                  flex flex-col items-center gap-2 group
                  ${m?"cursor-pointer":"cursor-not-allowed"}
                  transition-all duration-300
                `,children:[(0,s.jsxs)("div",{className:`
                    w-10 h-10 rounded-full flex items-center justify-center
                    text-xl transition-all duration-300 relative z-10
                    ${x?"bg-gradient-to-br from-blue-500 to-purple-600 text-white shadow-lg scale-125 ring-4 ring-blue-100":o?"bg-green-500 text-white shadow-md":"bg-gray-200 text-gray-400"}
                    ${m&&!x?"hover:scale-110":""}
                  `,children:[d.icon,x&&(0,s.jsx)("span",{className:"absolute inset-0 rounded-full bg-blue-400 animate-ping opacity-75"})]}),(0,s.jsxs)("div",{className:"flex flex-col items-center gap-1 max-w-[100px]",children:[(0,s.jsx)("span",{className:`
                      text-xs font-medium text-center leading-tight
                      ${x?"text-blue-600 font-bold":o?"text-gray-700":"text-gray-400"}
                    `,children:d.label}),(0,s.jsxs)("span",{className:"text-xs text-gray-400",children:[c+1,"/",n.length]})]}),m&&(0,s.jsx)("div",{className:"absolute bottom-full mb-2 hidden group-hover:block",children:(0,s.jsx)("div",{className:"bg-gray-900 text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:"Cliquer pour voir les details"})})]},i)})})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 rounded-full",children:[(0,s.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Progression :"}),(0,s.jsxs)("span",{className:"text-sm font-bold text-blue-600",children:[a+1," / ",n.length]}),(0,s.jsxs)("span",{className:"text-sm text-gray-500",children:["(",Math.round((a+1)/n.length*100),"%)"]})]})})]})}var c=e.i(269638),d=e.i(178583),o=e.i(263488),x=e.i(284614);let m={EXPLICIT_MESSAGE:o.Mail,METADATA:d.FileText,DOCUMENT:d.FileText,USER_PROVIDED:x.User},g={EXPLICIT_MESSAGE:"Message explicite",METADATA:"Metadonnees",DOCUMENT:"Document",USER_PROVIDED:"Fourni manuellement"};function h({facts:e,onAddFact:t}){return 0===e.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"[emoji]"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun fait extrait"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"L'IA n'a pas encore extrait de faits certains du message source."}),t&&(0,s.jsx)("button",{onClick:t,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Ajouter un fait manuellement"})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)(c.CheckCircle,{className:"w-5 h-5 text-green-500"}),"Faits Certains (",e.length,")"]}),t&&(0,s.jsx)("button",{onClick:t,className:"px-3 py-1 text-sm bg-blue-600 text-white rounded hover:bg-blue-700",children:"+ Ajouter"})]}),(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>{let t=m[e.source]||d.FileText;return(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:"[Check]"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900",children:e.label}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 flex items-center gap-1 mt-1",children:[(0,s.jsx)(t,{className:"w-3 h-3"}),g[e.source]]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-green-100 text-green-700 rounded text-xs font-medium",children:[(0,s.jsx)(c.CheckCircle,{className:"w-3 h-3"}),"100%"]})]}),(0,s.jsx)("div",{className:"ml-8 mt-2",children:(0,s.jsx)("div",{className:"bg-gray-50 rounded p-3 border border-gray-100",children:(0,s.jsx)("p",{className:"text-gray-900 font-mono text-sm",children:e.value})})}),(0,s.jsxs)("div",{className:"ml-8 mt-3 flex items-center gap-4 text-xs text-gray-500",children:[(0,s.jsxs)("span",{children:["Extrait par : ",(0,s.jsx)("span",{className:"font-medium",children:"AI"===e.extractedBy?"IA":"Humain"})]}),e.sourceRef&&(0,s.jsxs)("span",{children:["Ref : ",(0,s.jsx)("span",{className:"font-medium",children:e.sourceRef})]}),(0,s.jsx)("span",{children:new Date(e.createdAt).toLocaleDateString("fr-FR")})]})]},e.id)})}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-sm",children:(0,s.jsxs)("p",{className:"text-blue-800",children:[(0,s.jsx)("strong",{children:"[emoji] Note :"})," Les faits ont toujours une confiance de 100% car ils sont extraits directement du message source, sans inference."]})})]})}let u=(0,e.i(475254).default)("compass",[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),b={LEGAL:"Cadre juridique",ADMINISTRATIVE:"Cadre administratif",CONTRACTUAL:"Cadre contractuel",TEMPORAL:"Cadre temporel",ORGANIZATIONAL:"Cadre organisationnel"},p={POSSIBLE:{label:"Possible",color:"text-yellow-600",icon:""},PROBABLE:{label:"Probable",color:"text-orange-600",icon:"Ô∏è"},CONFIRMED:{label:"Confirme",color:"text-green-600",icon:"[Check]"}};function j({contexts:e,onAddContext:t}){return 0===e.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"[emoji]"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun contexte identifie"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"L'IA n'a pas encore identifie de cadre contextuel pour ce workspace."}),t&&(0,s.jsx)("button",{onClick:t,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700",children:"Ajouter un contexte"})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)(u,{className:"w-5 h-5 text-purple-500"}),"Contextes Identifies (",e.length,")"]}),t&&(0,s.jsx)("button",{onClick:t,className:"px-3 py-1 text-sm bg-purple-600 text-white rounded hover:bg-purple-700",children:"+ Ajouter"})]}),(0,s.jsx)("div",{className:"space-y-3",children:e.map(e=>{let t=p[e.certaintyLevel];return(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:"[emoji]"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900",children:b[e.type]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Identifie par : ","AI"===e.identifiedBy?"IA":"Humain"]})]})]}),(0,s.jsxs)("div",{className:`flex items-center gap-1 px-2 py-1 bg-gray-100 rounded text-xs font-medium ${t.color}`,children:[(0,s.jsx)("span",{children:t.icon}),t.label]})]}),(0,s.jsxs)("div",{className:"ml-8",children:[(0,s.jsx)("p",{className:"text-sm text-gray-700 mb-3",children:e.description}),e.reasoning&&(0,s.jsx)("div",{className:"bg-purple-50 border border-purple-100 rounded p-3",children:(0,s.jsxs)("p",{className:"text-xs text-purple-800",children:[(0,s.jsx)("strong",{children:"Raisonnement :"})," ",e.reasoning]})})]}),(0,s.jsxs)("div",{className:"ml-8 mt-3 text-xs text-gray-500",children:[new Date(e.createdAt).toLocaleDateString("fr-FR")," a"," ",new Date(e.createdAt).toLocaleTimeString("fr-FR")]})]},e.id)})}),(0,s.jsx)("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4 text-sm",children:(0,s.jsxs)("p",{className:"text-purple-800",children:[(0,s.jsx)("strong",{children:"[emoji] Note :"})," Les contextes sont des hypotheses de cadrage. Plusieurs contextes peuvent coexister jusqu'a confirmation."]})})]})}var N=e.i(503116);function f({obligations:e,contexts:t=[],onAddObligation:r}){let a=e.filter(e=>e.mandatory),l=e.filter(e=>!e.mandatory),n=e.filter(e=>e.deadline);if(0===e.length)return(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"[emoji]"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucune obligation identifiee"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"L'IA n'a pas encore deduit d'obligations legales ou administratives."}),r&&(0,s.jsx)("button",{onClick:r,className:"px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700",children:"Ajouter une obligation"})]});let i=e.reduce((e,s)=>{let t=s.contextId;return e[t]||(e[t]=[]),e[t].push(s),e},{});return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)(d.FileText,{className:"w-5 h-5 text-orange-500"}),"Obligations Identifiees (",e.length,")"]}),(0,s.jsxs)("div",{className:"flex gap-4 mt-2 text-sm text-gray-600",children:[(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{className:"text-orange-600",children:a.length})," obligatoire(s)"]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{className:"text-blue-600",children:l.length})," optionnelle(s)"]}),(0,s.jsxs)("span",{children:[(0,s.jsx)("strong",{className:"text-red-600",children:n.length})," avec delai"]})]})]}),r&&(0,s.jsx)("button",{onClick:r,className:"px-3 py-1 text-sm bg-orange-600 text-white rounded hover:bg-orange-700",children:"+ Ajouter"})]}),(0,s.jsx)("div",{className:"space-y-4",children:Object.entries(i).map(([e,r])=>{let a=t.find(s=>s.id===e);return(0,s.jsxs)("div",{className:"border border-orange-200 rounded-lg overflow-hidden",children:[a&&(0,s.jsxs)("div",{className:"bg-orange-50 px-4 py-3 border-b border-orange-200",children:[(0,s.jsxs)("h4",{className:"font-semibold text-orange-900",children:["[emoji] Contexte : ",a.type]}),(0,s.jsx)("p",{className:"text-xs text-orange-700 mt-1",children:a.description})]}),(0,s.jsx)("div",{className:"p-4 space-y-3 bg-white",children:r.map(e=>(0,s.jsx)(y,{obligation:e},e.id))})]},e)})}),(0,s.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 text-sm",children:(0,s.jsxs)("p",{className:"text-orange-800",children:[(0,s.jsx)("strong",{children:"Ô∏è Regle #3 :"})," Chaque obligation est liee a un contexte specifique. Les obligations decoulent du cadre identifie."]})})]})}function y({obligation:e}){let t=e.deadline&&new Date(e.deadline)<new Date(Date.now()+6048e5);return(0,s.jsxs)("div",{className:`
      border rounded-lg p-4
      ${e.mandatory?"border-orange-300 bg-orange-50":"border-gray-200 bg-gray-50"}
    `,children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-xl",children:e.mandatory?"":"[emoji]"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-900",children:e.mandatory?"OBLIGATOIRE":"Optionnel"}),e.critical&&(0,s.jsx)("span",{className:"text-xs text-red-600 font-medium",children:"[emoji] DeLAI CRITIQUE"})]})]}),e.deadline&&(0,s.jsxs)("div",{className:`
            flex items-center gap-1 px-2 py-1 rounded text-xs font-medium
            ${t?"bg-red-100 text-red-700":"bg-blue-100 text-blue-700"}
          `,children:[(0,s.jsx)(N.Clock,{className:"w-3 h-3"}),new Date(e.deadline).toLocaleDateString("fr-FR")]})]}),(0,s.jsxs)("div",{className:"ml-7",children:[(0,s.jsx)("p",{className:"text-sm text-gray-900 mb-2",children:e.description}),e.legalRef&&(0,s.jsx)("div",{className:"bg-white border border-orange-200 rounded p-2 mb-2",children:(0,s.jsxs)("p",{className:"text-xs text-orange-800",children:[(0,s.jsx)("strong",{children:"[emoji] Base legale :"})," ",e.legalRef]})})]}),(0,s.jsxs)("div",{className:"ml-7 mt-3 pt-3 border-t border-gray-200 text-xs text-gray-500",children:["Deduit par ","AI"===e.deducedBy?"IA":"Humain"," le"," ",new Date(e.createdAt).toLocaleDateString("fr-FR")]})]})}var v=e.i(63209),w=e.i(373884);let E={INFORMATION:"Information manquante",DOCUMENT:"Document manquant",DECISION:"Decision a prendre",VALIDATION:"Validation requise",HUMAN_EXPERTISE:"Expertise humaine"},A={INFORMATION:"",DOCUMENT:"[emoji]",DECISION:"Ô∏è",VALIDATION:"",HUMAN_EXPERTISE:"[emoji]‚ÄçÔ∏è"};function I({missingElements:e,onResolve:t,onAddMissing:r}){let a=e.filter(e=>e.blocking&&!e.resolved),l=e.filter(e=>!e.blocking&&!e.resolved),n=e.filter(e=>e.resolved);return 0===e.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun element manquant !"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Tous les elements necessaires sont presents pour progresser."})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)(v.AlertCircle,{className:"w-5 h-5 text-orange-500"}),"elements Manquants"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[a.length," bloquant(s) - ",l.length," non-bloquant(s)"]})]}),r&&(0,s.jsx)("button",{onClick:r,className:"px-3 py-1 text-sm bg-orange-600 text-white rounded hover:bg-orange-700",children:"+ Identifier un manque"})]}),a.length>0&&(0,s.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(w.XCircle,{className:"w-5 h-5 text-red-500"}),(0,s.jsxs)("p",{className:"text-red-800 font-semibold",children:[a.length," element(s) bloquant(s) empeche(nt) la progression vers READY_FOR_HUMAN"]})]})}),a.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-sm font-semibold text-red-700 mb-3 flex items-center gap-2",children:[(0,s.jsx)(w.XCircle,{className:"w-4 h-4"}),"BLOQUANTS (",a.length,")"]}),(0,s.jsx)("div",{className:"space-y-3",children:a.map(e=>(0,s.jsx)(C,{element:e,onResolve:t,blocking:!0},e.id))})]}),l.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-sm font-semibold text-orange-700 mb-3 flex items-center gap-2",children:[(0,s.jsx)(N.Clock,{className:"w-4 h-4"}),"NON-BLOQUANTS (",l.length,")"]}),(0,s.jsx)("div",{className:"space-y-3",children:l.map(e=>(0,s.jsx)(C,{element:e,onResolve:t,blocking:!1},e.id))})]}),n.length>0&&(0,s.jsxs)("details",{className:"border border-gray-200 rounded-lg",children:[(0,s.jsxs)("summary",{className:"cursor-pointer p-4 hover:bg-gray-50 flex items-center gap-2",children:[(0,s.jsx)(c.CheckCircle,{className:"w-4 h-4 text-green-500"}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-green-700",children:["ReSOLUS (",n.length,")"]})]}),(0,s.jsx)("div",{className:"p-4 pt-0 space-y-3",children:n.map(e=>(0,s.jsx)(C,{element:e,onResolve:void 0,blocking:e.blocking,resolved:!0},e.id))})]})]})}function C({element:e,onResolve:t,blocking:r,resolved:a=!1}){return(0,s.jsxs)("div",{className:`
        border rounded-lg p-4 transition-all
        ${r&&!a?"border-red-300 bg-red-50":a?"border-green-200 bg-green-50 opacity-75":"border-orange-200 bg-orange-50"}
      `,children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:A[e.type]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-900",children:E[e.type]}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Identifie par : ","AI"===e.identifiedBy?"IA":"Humain"]})]})]}),(0,s.jsx)("div",{className:`
            px-2 py-1 rounded text-xs font-medium
            ${r&&!a?"bg-red-100 text-red-700":a?"bg-green-100 text-green-700":"bg-orange-100 text-orange-700"}
          `,children:a?"Resolu":r?"BLOQUANT":"Non-bloquant"})]}),(0,s.jsxs)("div",{className:"mb-3",children:[(0,s.jsx)("p",{className:"text-sm text-gray-900 font-medium mb-1",children:e.description}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 italic",children:["Pourquoi : ",e.why]})]}),a&&e.resolution&&(0,s.jsxs)("div",{className:"bg-white rounded p-3 border border-green-200 mb-3",children:[(0,s.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:(0,s.jsx)("strong",{children:"Resolution :"})}),(0,s.jsx)("p",{className:"text-sm text-gray-900",children:e.resolution}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Resolu par ",e.resolvedBy," le"," ",e.resolvedAt&&new Date(e.resolvedAt).toLocaleDateString("fr-FR")]})]}),!a&&t&&(0,s.jsx)("div",{className:"flex gap-2",children:(0,s.jsx)("button",{onClick:()=>t(e.id),className:`
              flex-1 px-3 py-2 rounded text-sm font-medium transition-colors
              ${r?"bg-red-600 hover:bg-red-700 text-white":"bg-orange-600 hover:bg-orange-700 text-white"}
            `,children:"Marquer comme resolu"})}),(0,s.jsxs)("div",{className:"mt-3 pt-3 border-t border-gray-200 text-xs text-gray-500",children:["Cree le ",new Date(e.createdAt).toLocaleDateString("fr-FR")," a"," ",new Date(e.createdAt).toLocaleTimeString("fr-FR")]})]})}var R=e.i(878894),T=e.i(25652);let k={LOW:{label:"Faible",color:"green"},MEDIUM:{label:"Moyen",color:"yellow"},HIGH:{label:"eleve",color:"red"}};function D({risks:e,onAddRisk:t}){if(0===e.length)return(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"Ô∏è"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun risque identifie"}),(0,s.jsx)("p",{className:"text-gray-600 mb-4",children:"L'IA n'a pas encore evalue les risques d'action prematuree."}),t&&(0,s.jsx)("button",{onClick:t,className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Ajouter un risque"})]});let r=[...e].sort((e,s)=>s.riskScore-e.riskScore),a=r.filter(e=>e.riskScore>=7),l=r.filter(e=>e.riskScore>=4&&e.riskScore<7),n=r.filter(e=>e.riskScore<4);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)(R.AlertTriangle,{className:"w-5 h-5 text-red-500"}),"Risques evalues (",e.length,")"]}),(0,s.jsxs)("div",{className:"flex gap-4 mt-2 text-sm",children:[(0,s.jsxs)("span",{className:"text-red-600",children:[(0,s.jsx)("strong",{children:a.length})," critique(s)"]}),(0,s.jsxs)("span",{className:"text-orange-600",children:[(0,s.jsx)("strong",{children:l.length})," eleve(s)"]}),(0,s.jsxs)("span",{className:"text-green-600",children:[(0,s.jsx)("strong",{children:n.length})," faible(s)"]})]})]}),t&&(0,s.jsx)("button",{onClick:t,className:"px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700",children:"+ Ajouter"})]}),a.length>0&&(0,s.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)(R.AlertTriangle,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"font-semibold text-red-900",children:["Ô∏è ",a.length," risque(s) critique(s) detecte(s)"]}),(0,s.jsx)("p",{className:"text-sm text-red-700 mt-1",children:"Ces risques necessitent une attention immediate avant toute action."})]})]})}),(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,s.jsxs)("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,s.jsx)(T.TrendingUp,{className:"w-4 h-4"}),"Matrice Probabilite x Impact"]}),(0,s.jsx)("div",{className:"grid grid-cols-3 gap-2 mb-6",children:["HIGH","MEDIUM","LOW"].map(t=>(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)("div",{className:"text-xs font-medium text-gray-600 mb-2",children:["HIGH"===t?"[Up] Haute":"MEDIUM"===t?"[Next] Moyenne":"[Down] Faible"," prob."]}),["HIGH","MEDIUM","LOW"].map(r=>{let a=e.filter(e=>e.probability===t&&e.impact===r),l=("HIGH"===t?3:"MEDIUM"===t?2:1)*("HIGH"===r?3:"MEDIUM"===r?2:1);return(0,s.jsxs)("div",{className:`
                      p-2 rounded border text-center text-xs
                      ${l>=7?"bg-red-100 border-red-300":l>=4?"bg-orange-100 border-orange-300":"bg-green-100 border-green-300"}
                    `,children:[(0,s.jsx)("div",{className:"font-bold",children:l}),(0,s.jsxs)("div",{className:"text-gray-600",children:[a.length," risque(s)"]})]},`${t}-${r}`)})]},`prob-${t}`))}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 text-center",children:["Impact : ",(0,s.jsx)("strong",{children:"[Back]"})," Faible | Moyen | eleve ",(0,s.jsx)("strong",{children:"[Next]"})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:r.map(e=>(0,s.jsx)(S,{risk:e},e.id))})]})}function S({risk:e}){let t=k[e.impact],r=k[e.probability],a=e.riskScore>=7?"red":e.riskScore>=4?"orange":"green";return(0,s.jsxs)("div",{className:`
      border rounded-lg p-4
      ${"red"===a?"border-red-300 bg-red-50":"orange"===a?"border-orange-300 bg-orange-50":"border-green-300 bg-green-50"}
    `,children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:(e.irreversible,"[emoji]")}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h5",{className:"font-semibold text-gray-900",children:[e.irreversible&&"Ô∏è IRReVERSIBLE - ","Score: ",e.riskScore,"/9"]}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Impact ",t.label," x Probabilite ",r.label]})]})]}),(0,s.jsx)("div",{className:`
          px-3 py-1 rounded-full text-sm font-bold
          ${"red"===a?"bg-red-200 text-red-900":"orange"===a?"bg-orange-200 text-orange-900":"bg-green-200 text-green-900"}
        `,children:e.riskScore})]}),(0,s.jsxs)("div",{className:"ml-8",children:[(0,s.jsx)("p",{className:"text-sm text-gray-900",children:e.description}),e.irreversible&&(0,s.jsx)("div",{className:"mt-3 bg-red-100 border border-red-300 rounded p-3",children:(0,s.jsxs)("p",{className:"text-xs text-red-900",children:[(0,s.jsx)("strong",{children:"[emoji] ATTENTION :"})," Ce risque est irreversible. Aucun retour en arriere possible une fois l'action entreprise."]})})]}),(0,s.jsxs)("div",{className:"ml-8 mt-3 pt-3 border-t border-gray-300 text-xs text-gray-600",children:["evalue par ","AI"===e.evaluatedBy?"IA":"Humain"," le"," ",new Date(e.createdAt).toLocaleDateString("fr-FR")]})]})}var O=e.i(972520);let L={QUESTION:"Question au client",DOCUMENT_REQUEST:"Demande de document",ALERT:"Alerte",ESCALATION:"Escalade",FORM_SEND:"Envoi de formulaire"},M={QUESTION:"",DOCUMENT_REQUEST:"[emoji]",ALERT:"[emoji]",ESCALATION:"Ô∏è",FORM_SEND:"[emoji]"},F={LOW:{color:"bg-gray-100 text-gray-700",label:"Basse"},NORMAL:{color:"bg-blue-100 text-blue-700",label:"Normale"},HIGH:{color:"bg-orange-100 text-orange-700",label:"Haute"},CRITICAL:{color:"bg-red-100 text-red-700",label:"Critique"}};function U({actions:e,onExecute:t}){let r=e.filter(e=>!e.executed),a=e.filter(e=>e.executed);return 0===e.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"[emoji]"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucune action proposee"}),(0,s.jsx)("p",{className:"text-gray-600",children:"L'IA n'a pas encore genere d'actions pour reduire l'incertitude."})]}):(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)(O.ArrowRight,{className:"w-5 h-5 text-indigo-500"}),"Actions Proposees"]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[r.length," en attente - ",a.length," executee(s)"]})]})}),r.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"text-sm font-semibold text-indigo-700 mb-3 flex items-center gap-2",children:[(0,s.jsx)(N.Clock,{className:"w-4 h-4"}),"EN ATTENTE (",r.length,")"]}),(0,s.jsx)("div",{className:"space-y-3",children:r.map(e=>(0,s.jsx)(_,{action:e,onExecute:t},e.id))})]}),a.length>0&&(0,s.jsxs)("details",{className:"border border-gray-200 rounded-lg",children:[(0,s.jsxs)("summary",{className:"cursor-pointer p-4 hover:bg-gray-50 flex items-center gap-2",children:[(0,s.jsx)(c.CheckCircle,{className:"w-4 h-4 text-green-500"}),(0,s.jsxs)("span",{className:"text-sm font-semibold text-green-700",children:["EXeCUTeES (",a.length,")"]})]}),(0,s.jsx)("div",{className:"p-4 pt-0 space-y-3",children:a.map(e=>(0,s.jsx)(_,{action:e,executed:!0},e.id))})]})]})}function _({action:e,onExecute:t,executed:r=!1}){let a=F[e.priority];return(0,s.jsxs)("div",{className:`
        border rounded-lg p-4 transition-all
        ${r?"border-green-200 bg-green-50":"border-indigo-200 bg-indigo-50"}
      `,children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-2xl",children:M[e.type]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h5",{className:"font-semibold text-gray-900",children:L[e.type]}),(0,s.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:["Cible : ","CLIENT"===e.target?"Client":"INTERNAL_USER"===e.target?"Interne":"Systeme"]})]})]}),(0,s.jsx)("div",{className:`px-2 py-1 rounded text-xs font-medium ${a.color}`,children:a.label})]}),(0,s.jsxs)("div",{className:"ml-8 mb-3",children:[(0,s.jsx)("p",{className:"text-sm text-gray-900 mb-2",children:(0,s.jsx)("strong",{children:"Contenu :"})}),(0,s.jsx)("div",{className:"bg-white rounded p-3 border border-gray-200",children:(0,s.jsx)("p",{className:"text-sm text-gray-700",children:e.content})}),(0,s.jsx)("div",{className:"mt-3 bg-indigo-50 border border-indigo-100 rounded p-3",children:(0,s.jsxs)("p",{className:"text-xs text-indigo-800",children:[(0,s.jsx)("strong",{children:"Pourquoi :"})," ",e.reasoning]})})]}),r&&e.result&&(0,s.jsxs)("div",{className:"ml-8 mb-3 bg-green-50 border border-green-200 rounded p-3",children:[(0,s.jsxs)("p",{className:"text-xs text-green-800",children:[(0,s.jsx)("strong",{children:"Resultat :"})," ",e.result]}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Execute par ",e.executedBy," le"," ",e.executedAt&&new Date(e.executedAt).toLocaleDateString("fr-FR")]})]}),!r&&t&&(0,s.jsx)("div",{className:"ml-8 flex gap-2",children:(0,s.jsx)("button",{onClick:()=>t(e.id),className:"flex-1 px-3 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded text-sm font-medium transition-colors",children:"Executer l'action"})}),(0,s.jsxs)("div",{className:"ml-8 mt-3 pt-3 border-t border-gray-200 text-xs text-gray-500",children:["Propose par ","AI"===e.proposedBy?"IA":"Humain"," le"," ",new Date(e.createdAt).toLocaleDateString("fr-FR")]})]})}var $=e.i(270756),P=e.i(440160),q=e.i(514764);function H({workspace:e,summary:t,onLock:r,onExport:a,onExecute:l}){let n=Math.round(100*e.uncertaintyLevel);return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-emerald-600 rounded-lg p-6 text-white",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"text-6xl"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Workspace Pret pour Validation Humaine"}),(0,s.jsx)("p",{className:"text-green-100",children:"Tous les elements bloquants ont ete resolus. Le workspace est actionnable."})]})]})}),(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"[emoji] Niveau d'Incertitude"}),(0,s.jsxs)("span",{className:`
            px-3 py-1 rounded-full text-sm font-medium
            ${n>=80?"bg-red-100 text-red-700":n>=50?"bg-orange-100 text-orange-700":n>=20?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}
          `,children:[n,"% d'incertitude"]})]}),(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-4",children:(0,s.jsx)("div",{className:`
              h-4 rounded-full transition-all
              ${n>=80?"bg-red-500":n>=50?"bg-orange-500":n>=20?"bg-yellow-500":"bg-green-500"}
            `,style:{width:`${100-n}%`}})}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:n<20?" Tres faible incertitude - Actionnable":n<50?"Ô∏è Incertitude moderee - Validation recommandee":n<80?"[emoji] Incertitude elevee - Validation requise":"[emoji] Incertitude critique - Investigation approfondie necessaire"})]}),(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"[emoji] Resume du Raisonnement"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,s.jsx)(B,{icon:"[emoji]",label:"Faits Extraits",value:t.factsCount,color:"blue"}),(0,s.jsx)(B,{icon:"[emoji]",label:"Contextes Identifies",value:t.contextsCount,color:"purple"}),(0,s.jsx)(B,{icon:"[emoji]",label:"Obligations Deduites",value:t.obligationsCount,color:"orange"}),(0,s.jsx)(B,{icon:"",label:"Manques Resolus",value:t.missingResolved,color:"green"}),(0,s.jsx)(B,{icon:"Ô∏è",label:"Risques evalues",value:t.risksEvaluated,color:"red"}),(0,s.jsx)(B,{icon:"[emoji]",label:"Actions Proposees",value:t.actionsProposed,color:"indigo"})]})]}),(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"[emoji] Informations Workspace"}),(0,s.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"ID Workspace :"}),(0,s.jsx)("span",{className:"font-mono text-gray-900",children:e.id})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Type de source :"}),(0,s.jsx)("span",{className:"font-semibold text-gray-900",children:e.sourceType})]}),e.procedureType&&(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Procedure CESEDA :"}),(0,s.jsx)("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded text-xs font-medium",children:e.procedureType})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Cree le :"}),(0,s.jsx)("span",{className:"text-gray-900",children:new Date(e.createdAt).toLocaleString("fr-FR")})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Derniere mise a jour :"}),(0,s.jsx)("span",{className:"text-gray-900",children:new Date(e.updatedAt).toLocaleString("fr-FR")})]}),(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Statut :"}),(0,s.jsx)("span",{className:`
              px-2 py-1 rounded text-xs font-medium
              ${e.locked?"bg-red-100 text-red-700":"bg-green-100 text-green-700"}
            `,children:e.locked?"[emoji] Verrouille":"[emoji] En cours"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-6",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"üéØ Actions Disponibles"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[!e.locked&&r&&(0,s.jsxs)("button",{onClick:r,className:"flex items-center justify-center gap-2 px-4 py-3 bg-red-600 hover:bg-red-700 text-white rounded-lg font-medium transition-colors",children:[(0,s.jsx)($.Lock,{className:"w-5 h-5"}),"Verrouiller le Workspace"]}),a&&(0,s.jsxs)("button",{onClick:a,className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-medium transition-colors",children:[(0,s.jsx)(P.Download,{className:"w-5 h-5"}),"Exporter le Raisonnement"]}),l&&(0,s.jsxs)("button",{onClick:l,className:"flex items-center justify-center gap-2 px-4 py-3 bg-green-600 hover:bg-green-700 text-white rounded-lg font-medium transition-colors",children:[(0,s.jsx)(q.Send,{className:"w-5 h-5"}),"Executer les Actions"]})]})]}),(0,s.jsxs)("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 text-sm",children:[(0,s.jsxs)("p",{className:"text-green-800",children:[(0,s.jsx)("strong",{children:" Regle #5 validee :"})," Aucun element bloquant non resolu. Le workspace a atteint l'etat READY_FOR_HUMAN conformement aux regles structurelles du moteur de raisonnement."]}),(0,s.jsx)("p",{className:"text-green-700 mt-2",children:"Vous pouvez maintenant valider humainement le raisonnement complet et executer les actions proposees."})]})]})}function B({icon:e,label:t,value:r,color:a}){return(0,s.jsxs)("div",{className:`
      border rounded-lg p-4 bg-${a}-50 border-${a}-200
    `,children:[(0,s.jsx)("div",{className:"text-2xl mb-2",children:e}),(0,s.jsx)("div",{className:`text-2xl font-bold text-${a}-700`,children:r}),(0,s.jsx)("div",{className:"text-xs text-gray-600 mt-1",children:t})]})}var V=e.i(871689),G=e.i(986640),X=e.i(283086);let W=e=>fetch(e).then(e=>e.json());function Q(){var e;let n,c,d=(0,r.useParams)(),o=(0,r.useRouter)(),x=d.id,[m,g]=(0,t.useState)(null),{data:u,error:b,isLoading:p,mutate:N}=(0,a.default)(x?`/api/lawyer/workspace/${x}`:null,W,{refreshInterval:5e3,revalidateOnFocus:!0,revalidateOnReconnect:!0}),y=u?.workspace,v=y?.facts||[],w=y?.contexts||[],E=y?.obligations||[],A=y?.missingElements||[],C=y?.risks||[],R=y?.proposedActions||[],T=y?.reasoningTraces||[];async function k(e,s){try{let t=await fetch(`/api/lawyer/workspace/${x}/resolve-missing`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({missingElementId:e,resolution:s})});if(!t.ok){let e=await t.json();throw Error(e.error||"Erreur de r√©solution")}N()}catch(e){console.error("Erreur r√©solution:",e),alert(e instanceof Error?e.message:"Erreur de r√©solution")}}async function S(e,s){try{let t=await fetch(`/api/lawyer/workspace/${x}/execute-action`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({actionId:e,result:s})});if(!t.ok){let e=await t.json();throw Error(e.error||"Erreur d'ex√©cution")}N()}catch(e){console.error("Erreur ex√©cution:",e),alert(e instanceof Error?e.message:"Erreur d'ex√©cution")}}async function O(){if(confirm("Verrouiller ce workspace ? Cette action est irr√©versible."))try{let e=await fetch(`/api/lawyer/workspace/${x}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({locked:!0})});if(!e.ok){let s=await e.json();throw Error(s.error||"Erreur de verrouillage")}N()}catch(e){console.error("Erreur verrouillage:",e),alert(e instanceof Error?e.message:"Erreur de verrouillage")}}async function L(e="markdown"){try{let s=await fetch(`/api/lawyer/workspace/${x}/export?format=${e}`);if(!s.ok)throw Error("Erreur d'export");let t=await s.blob(),r=window.URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download=`workspace-${x}.${"json"===e?"json":"md"}`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(r)}catch(e){console.error("Erreur export:",e),alert("Erreur d'export")}}let[M,F]=React.useState(!1);async function _(){if(y){F(!0);try{let e=await fetch(`/api/lawyer/workspace/${x}/execute-reasoning`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mode:"next"})});if(!e.ok){let s=await e.json();throw Error(s.error||"√âchec du raisonnement")}let s=await e.json();N(),alert(`‚úÖ Raisonnement IA ex\xe9cut\xe9!

Nouvel \xe9tat: ${s.result.newState}
Incertitude: ${(100*s.result.uncertaintyLevel).toFixed(0)}%`)}catch(e){console.error("Erreur IA:",e),alert(`‚ùå ${e instanceof Error?e.message:"Erreur inconnue"}`)}finally{F(!1)}}}if(p)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin text-6xl mb-4",children:"üß†"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Chargement du raisonnement..."})]})});if(b||!y)return(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"‚ùå"}),(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:b?"Erreur de chargement":"Workspace introuvable"}),(0,s.jsx)("button",{onClick:()=>o.push("/lawyer/workspaces"),className:"text-blue-600 hover:underline",children:"Retour √† la liste"})]})});let P=(0,l.formatUncertaintyLevel)(y.uncertaintyLevel),q=(e=y.currentState,c=(n=["RECEIVED","FACTS_EXTRACTED","CONTEXT_IDENTIFIED","OBLIGATIONS_DEDUCED","MISSING_IDENTIFIED","RISK_EVALUATED","ACTION_PROPOSED","READY_FOR_HUMAN"]).indexOf(e),n.slice(0,c));return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,s.jsx)("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("button",{onClick:()=>o.push("/lawyer/workspaces"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,s.jsx)(V.ArrowLeft,{className:"w-5 h-5"})}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)("span",{className:"text-3xl",children:"üß†"}),"Workspace #",y.id.slice(0,8)]}),(0,s.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:["Source : ",y.sourceType," ‚Ä¢ Cr√©√© le ",new Date(y.createdAt).toLocaleDateString("fr-FR")]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)("div",{className:"px-4 py-2 bg-gray-100 rounded-lg",children:[(0,s.jsx)("div",{className:"text-xs text-gray-600 mb-1",children:"Incertitude"}),(0,s.jsx)("div",{className:`text-sm font-bold ${P.color}`,children:P.label}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[Math.round(100*y.uncertaintyLevel),"%"]})]}),(0,s.jsx)("div",{className:`
                  px-4 py-2 rounded-lg flex items-center gap-2
                  ${y.locked?"bg-green-100":"bg-orange-100"}
                `,children:y.locked?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)($.Lock,{className:"w-4 h-4 text-green-600"}),(0,s.jsx)("span",{className:"text-sm font-medium text-green-700",children:"Verrouill√©"})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(G.Unlock,{className:"w-4 h-4 text-orange-600"}),(0,s.jsx)("span",{className:"text-sm font-medium text-orange-700",children:"En cours"})]})})]})]})})}),(0,s.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-6",children:(0,s.jsx)(i,{currentState:y.currentState,completedStates:q,onClick:e=>g(e)})})}),(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-8",children:(0,s.jsxs)("div",{className:"grid grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"col-span-2 space-y-6",children:[function(){let e=m||y.currentState;switch(e){case"RECEIVED":return(0,s.jsx)(K,{workspace:y});case"FACTS_EXTRACTED":return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsx)(h,{facts:v})});case"CONTEXT_IDENTIFIED":return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsx)(j,{contexts:w})});case"OBLIGATIONS_DEDUCED":return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsx)(f,{obligations:E,contexts:w})});case"MISSING_IDENTIFIED":return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsx)(I,{missingElements:A,onResolve:k})});case"RISK_EVALUATED":return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsx)(D,{risks:C})});case"ACTION_PROPOSED":return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsx)(U,{actions:R,onExecute:S})});case"READY_FOR_HUMAN":return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsx)(H,{workspace:y,summary:{factsCount:v.length,contextsCount:w.length,obligationsCount:E.length,missingResolved:A.filter(e=>e.resolved).length,risksEvaluated:C.length,actionsProposed:R.length},onLock:O,onExport:L})});default:return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"üöß"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Panel en construction"}),(0,s.jsxs)("p",{className:"text-gray-600",children:["L'interface pour l'√©tat \"",e,'" sera bient√¥t disponible.']})]})})}}(),T.length>0&&(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,s.jsx)(X.Sparkles,{className:"w-5 h-5 text-purple-500"}),"Traces de Raisonnement (",T.length,")"]}),(0,s.jsx)("div",{className:"space-y-3",children:T.map(e=>(0,s.jsxs)("div",{className:"border-l-4 border-purple-500 bg-purple-50 p-4 rounded-r",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,s.jsx)("span",{className:"text-sm font-semibold text-purple-900",children:e.step}),(0,s.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleTimeString("fr-FR")})]}),(0,s.jsx)("p",{className:"text-sm text-gray-700",children:e.explanation})]},e.id))})]})]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Message Source"}),(0,s.jsx)("div",{className:"bg-gray-50 rounded p-4 border border-gray-100",children:(0,s.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:y.sourceRaw})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Statistiques"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(Y,{label:"Faits extraits",value:v.length,icon:"‚úì"}),(0,s.jsx)(Y,{label:"Contextes",value:w.length,icon:"üß≠"}),(0,s.jsx)(Y,{label:"Obligations",value:E.length,icon:"üìú"}),(0,s.jsx)(Y,{label:"Manques",value:A.filter(e=>!e.resolved).length,icon:"‚ùó",highlight:A.some(e=>e.blocking&&!e.resolved)}),(0,s.jsx)(Y,{label:"Risques",value:C.length,icon:"‚ö†Ô∏è"}),(0,s.jsx)(Y,{label:"Actions",value:R.length,icon:"üëâ"})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Actions Rapides"}),(0,s.jsxs)("div",{className:"space-y-2",children:["READY_FOR_HUMAN"!==y.currentState&&!y.locked&&(0,s.jsx)("button",{onClick:_,disabled:M,className:"w-full px-4 py-2 bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded hover:from-purple-700 hover:to-blue-700 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:M?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin",children:"‚öôÔ∏è"}),(0,s.jsx)("span",{children:"IA en cours..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"üß†"}),(0,s.jsx)("span",{children:"Ex√©cuter Raisonnement IA"})]})}),(0,s.jsx)("button",{onClick:()=>L("markdown"),className:"w-full px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors text-sm font-medium",children:"Exporter (Markdown)"}),(0,s.jsx)("button",{onClick:()=>L("json"),className:"w-full px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded hover:bg-gray-50 transition-colors text-sm font-medium",children:"Exporter (JSON)"}),!y.locked&&(0,s.jsx)("button",{onClick:O,className:"w-full px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700 transition-colors text-sm font-medium",children:"Verrouiller et finaliser"})]})]})]})]})})]})}function K({workspace:e}){return(0,s.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"üì•"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Signal Brut Re√ßu"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:"Le workspace vient d'√™tre cr√©√©. L'IA n'a pas encore commenc√© l'analyse."}),(0,s.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 text-left",children:(0,s.jsxs)("p",{className:"text-sm text-blue-800",children:[(0,s.jsx)("strong",{children:"Prochaine √©tape :"})," Extraction des faits certains du message source."]})})]})})}function Y({label:e,value:t,icon:r,highlight:a=!1}){return(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("span",{className:"text-sm text-gray-600 flex items-center gap-2",children:[(0,s.jsx)("span",{children:r}),e]}),(0,s.jsx)("span",{className:`
          text-sm font-bold
          ${a?"text-red-600":"text-gray-900"}
        `,children:t})]})}e.s(["default",()=>Q,"dynamic",0,"force-dynamic"],341584)}]);