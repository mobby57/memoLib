(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,945832,e=>{"use strict";var t=e.i(843476),s=e.i(217255),a=e.i(618566),r=e.i(271645),l=e.i(522016);function n(){let{data:e,status:n}=(0,s.useSession)(),i=(0,a.useRouter)(),[d,c]=(0,r.useState)([]),[x,o]=(0,r.useState)([]),[m,h]=(0,r.useState)(!0);(0,r.useEffect)(()=>{"unauthenticated"===n?i.push("/auth/login"):e?.user&&"CLIENT"!==e.user.role?i.push("/dashboard"):e?.user?.role==="CLIENT"&&g()},[e,n,i]);let g=async()=>{try{let[e,t]=await Promise.all([fetch("/api/client/my-dossiers"),fetch("/api/client/my-factures")]);if(e.ok){let t=await e.json();c(t.dossiers)}if(t.ok){let e=await t.json();o(e.factures)}h(!1)}catch(e){console.error("Error fetching data:",e),h(!1)}};if(m)return(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600"})});let u=d.filter(e=>"en_cours"===e.statut||"urgent"===e.statut),p=x.filter(e=>"en_attente"===e.statut);return(0,t.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,t.jsx)("header",{className:"bg-white shadow-md border-b border-gray-200",children:(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-8 py-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Mon Espace Client"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Suivi de vos dossiers et documents"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-gray-500",children:"Bienvenue"}),(0,t.jsx)("p",{className:"font-semibold text-gray-900",children:e?.user?.name})]}),(0,t.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white text-xl font-bold shadow-lg",children:e?.user?.name?.charAt(0).toUpperCase()})]})]})})}),(0,t.jsxs)("main",{className:"max-w-7xl mx-auto px-8 py-8",children:[(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,t.jsxs)(l.default,{href:"/client/nouveau-dossier",className:"flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white font-bold rounded-xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all",children:[(0,t.jsx)("span",{className:"text-2xl"}),(0,t.jsx)("span",{children:"Nouveau Dossier"})]}),(0,t.jsxs)(l.default,{href:"/client/documents",className:"flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-purple-500 to-pink-600 text-white font-bold rounded-xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all",children:[(0,t.jsx)("span",{className:"text-2xl",children:"[emoji]"}),(0,t.jsx)("span",{children:"Mes Documents"})]}),(0,t.jsxs)(l.default,{href:"/client/messages",className:"flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-green-500 to-teal-600 text-white font-bold rounded-xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all",children:[(0,t.jsx)("span",{className:"text-2xl",children:"[emoji]"}),(0,t.jsx)("span",{children:"Messagerie"})]}),(0,t.jsxs)(l.default,{href:"/client/profil",className:"flex items-center gap-3 px-6 py-4 bg-gradient-to-r from-orange-500 to-red-600 text-white font-bold rounded-xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all",children:[(0,t.jsx)("span",{className:"text-2xl",children:"[emoji]"}),(0,t.jsx)("span",{children:"Mon Profil"})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Mes Dossiers"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:d.length}),(0,t.jsxs)("p",{className:"text-xs text-blue-600 mt-1",children:[u.length," en cours"]})]}),(0,t.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,t.jsx)("span",{className:"text-3xl",children:"[emoji]"})})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Factures"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:x.length}),(0,t.jsxs)("p",{className:"text-xs text-orange-600 mt-1",children:[p.length," en attente"]})]}),(0,t.jsx)("div",{className:"bg-green-100 p-3 rounded-full",children:(0,t.jsx)("span",{className:"text-3xl",children:"[emoji]"})})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Documents"}),(0,t.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:d.reduce((e,t)=>e+(t._count?.documents||0),0)}),(0,t.jsx)("p",{className:"text-xs text-purple-600 mt-1",children:"Total"})]}),(0,t.jsx)("div",{className:"bg-purple-100 p-3 rounded-full",children:(0,t.jsx)("span",{className:"text-3xl",children:"[emoji]"})})]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"[emoji]"})," Mes Dossiers"]}),0===d.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucun dossier pour le moment"})}):(0,t.jsx)("div",{className:"space-y-4",children:d.map(e=>(0,t.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900 text-lg",children:e.typeDossier}),(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${"urgent"===e.statut?"bg-red-100 text-red-800":"en_cours"===e.statut?"bg-blue-100 text-blue-800":"termine"===e.statut?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:e.statut})]}),(0,t.jsx)("p",{className:"text-gray-600 mb-2",children:e.objet}),(0,t.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,t.jsxs)("span",{children:["[emoji] Numero: ",e.numero]}),e.dateEcheance&&(0,t.jsxs)("span",{children:[" echeance: ",new Date(e.dateEcheance).toLocaleDateString("fr-FR")]}),(0,t.jsxs)("span",{children:["[emoji] ",e._count?.documents||0," documents"]})]})]}),(0,t.jsx)(l.default,{href:`/client/dossiers/${e.id}`,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold",children:"Voir details [Next]"})]})},e.id))})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,t.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[(0,t.jsx)("span",{children:"[emoji]"})," Mes Factures"]}),0===x.length?(0,t.jsx)("div",{className:"text-center py-12",children:(0,t.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucune facture pour le moment"})}):(0,t.jsx)("div",{className:"overflow-x-auto",children:(0,t.jsxs)("table",{className:"w-full",children:[(0,t.jsx)("thead",{children:(0,t.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,t.jsx)("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:"Numero"}),(0,t.jsx)("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:"Dossier"}),(0,t.jsx)("th",{className:"text-right py-3 px-4 text-gray-600 font-semibold",children:"Montant"}),(0,t.jsx)("th",{className:"text-center py-3 px-4 text-gray-600 font-semibold",children:"echeance"}),(0,t.jsx)("th",{className:"text-center py-3 px-4 text-gray-600 font-semibold",children:"Statut"}),(0,t.jsx)("th",{className:"text-right py-3 px-4 text-gray-600 font-semibold",children:"Actions"})]})}),(0,t.jsx)("tbody",{children:x.map(e=>(0,t.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"py-4 px-4 font-medium text-gray-900",children:e.numero}),(0,t.jsx)("td",{className:"py-4 px-4 text-gray-600",children:e.dossier?.typeDossier}),(0,t.jsxs)("td",{className:"py-4 px-4 text-right font-semibold text-gray-900",children:[e.montant.toFixed(2)," ",e.devise]}),(0,t.jsx)("td",{className:"py-4 px-4 text-center text-gray-600",children:new Date(e.dateEcheance).toLocaleDateString("fr-FR")}),(0,t.jsx)("td",{className:"py-4 px-4 text-center",children:(0,t.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${"payee"===e.statut?"bg-green-100 text-green-800":"en_attente"===e.statut?"bg-orange-100 text-orange-800":"en_retard"===e.statut?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:e.statut})}),(0,t.jsxs)("td",{className:"py-4 px-4 text-right",children:["en_attente"===e.statut&&(0,t.jsx)("button",{onClick:()=>{var t;return t=e.id,void alert(`Paiement de la facture ${t} - Integration a venir`)},className:"px-3 py-1 bg-green-500 text-white rounded text-sm font-semibold hover:bg-green-600",children:"Payer"}),"payee"===e.statut&&(0,t.jsx)(l.default,{href:`/api/client/factures/${e.id}/download`,className:"px-3 py-1 bg-blue-500 text-white rounded text-sm font-semibold hover:bg-blue-600 inline-block",children:"Telecharger"})]})]},e.id))})]})})]})]})]})}e.s(["default",()=>n,"dynamic",0,"force-dynamic"])}]);