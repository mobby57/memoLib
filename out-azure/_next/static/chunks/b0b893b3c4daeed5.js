(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,772919,e=>{"use strict";var r,a,t=((r={}).FAIBLE="faible",r.MOYEN="moyen",r.ELEVE="eleve",r.CRITIQUE="critique",r),s=((a={}).VERIFICATIONS="verifications",a.PIECES="pieces",a.ACTIONS="actions",a);e.s(["ChecklistCategory",()=>s,"PROCEDURE_COLORS",0,{OQTF:"#B91C1C",REFUS_TITRE:"#CA8A04",RETRAIT_TITRE:"#EA580C",ASILE:"#1E40AF",REGROUPEMENT_FAMILIAL:"#7C3AED",NATURALISATION:"#059669"},"PROCEDURE_LABELS",0,{OQTF:"OQTF (Obligation de Quitter le Territoire Francais)",REFUS_TITRE:"Refus de Titre de Sejour",RETRAIT_TITRE:"Retrait de Titre de Sejour",ASILE:"Demande d'Asile",REGROUPEMENT_FAMILIAL:"Regroupement Familial",NATURALISATION:"Naturalisation Francaise"},"URGENCY_COLORS",0,{faible:"#10B981",moyen:"#F59E0B",eleve:"#EA580C",critique:"#DC2626"},"UrgencyLevel",()=>t])},286014,e=>{"use strict";var r=e.i(843476),a=e.i(271645),t=e.i(618566),s=e.i(772919);function i(){let e=(0,t.useRouter)(),[i,l]=(0,a.useState)(!1),[n,o]=(0,a.useState)({procedureType:"",title:"",description:"",clientId:"",notificationDate:"",metadata:{}}),d=async r=>{if(r.preventDefault(),!n.procedureType)return void alert("Veuillez selectionner un type de procedure");l(!0);try{let r=await fetch("/api/workspaces",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw Error("Erreur lors de la creation");let a=await r.json();e.push(`/workspaces/${a.id}`)}catch(e){console.error("Error creating workspace:",e),alert("Erreur lors de la creation du dossier")}finally{l(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,r.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Nouveau Dossier CESDA"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Creer un nouveau dossier de contentieux des etrangers"})]}),(0,r.jsxs)("form",{onSubmit:d,className:"bg-white rounded-lg shadow-sm p-8 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type de procedure *"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Object.keys(s.PROCEDURE_COLORS).map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>o({...n,procedureType:e}),className:`p-4 rounded-lg border-2 transition-all ${n.procedureType===e?"border-blue-600 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,style:{backgroundColor:n.procedureType===e?`${s.PROCEDURE_COLORS[e]}20`:void 0},children:(0,r.jsx)("div",{className:"font-medium text-sm",children:e})},e))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Titre du dossier *"}),(0,r.jsx)("input",{type:"text",required:!0,value:n.title,onChange:e=>o({...n,title:e.target.value}),placeholder:"Ex: Recours OQTF M. Dupont",className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,r.jsx)("textarea",{value:n.description,onChange:e=>o({...n,description:e.target.value}),rows:4,placeholder:"Contexte et details du dossier...",className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date de notification *"}),(0,r.jsx)("input",{type:"date",required:!0,value:n.notificationDate,onChange:e=>o({...n,notificationDate:e.target.value}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),n.procedureType&&(0,r.jsxs)("div",{className:"border-t pt-6",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Informations specifiques"}),(()=>{switch(n.procedureType){case"OQTF":return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Type OQTF"}),(0,r.jsxs)("select",{value:n.metadata.type_oqtf||"",onChange:e=>o({...n,metadata:{...n.metadata,type_oqtf:e.target.value}}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Selectionner..."}),(0,r.jsx)("option",{value:"sans_delai",children:"Sans delai (48h)"}),(0,r.jsx)("option",{value:"avec_delai",children:"Avec delai de depart volontaire (30j)"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Interdiction de retour"}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",checked:!0===n.metadata.interdiction_retour,onChange:()=>o({...n,metadata:{...n.metadata,interdiction_retour:!0}}),className:"mr-2"}),"Oui"]}),(0,r.jsxs)("label",{className:"flex items-center",children:[(0,r.jsx)("input",{type:"radio",checked:!1===n.metadata.interdiction_retour,onChange:()=>o({...n,metadata:{...n.metadata,interdiction_retour:!1}}),className:"mr-2"}),"Non"]})]})]}),n.metadata.interdiction_retour&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Duree interdiction (ans)"}),(0,r.jsx)("input",{type:"number",value:n.metadata.duree_interdiction||"",onChange:e=>o({...n,metadata:{...n.metadata,duree_interdiction:parseInt(e.target.value)}}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"})]})]});case"ASILE":return(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Instance"}),(0,r.jsxs)("select",{value:n.metadata.instance||"",onChange:e=>o({...n,metadata:{...n.metadata,instance:e.target.value}}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500",children:[(0,r.jsx)("option",{value:"",children:"Selectionner..."}),(0,r.jsx)("option",{value:"OFPRA",children:"OFPRA"}),(0,r.jsx)("option",{value:"CNDA",children:"CNDA"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Numero OFPRA/CNDA"}),(0,r.jsx)("input",{type:"text",value:n.metadata.numero_ofpra||"",onChange:e=>o({...n,metadata:{...n.metadata,numero_ofpra:e.target.value}}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"})]})]});case"REGROUPEMENT_FAMILIAL":return(0,r.jsx)("div",{className:"space-y-4",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Membres de la famille (separes par virgules)"}),(0,r.jsx)("input",{type:"text",placeholder:"Ex: Conjoint, Enfant 1, Enfant 2",onChange:e=>o({...n,metadata:{...n.metadata,membres_famille:e.target.value.split(",").map(e=>e.trim())}}),className:"w-full border border-gray-300 rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500"})]})});default:return null}})()]}),(0,r.jsxs)("div",{className:"flex gap-4 pt-6",children:[(0,r.jsx)("button",{type:"button",onClick:()=>e.back(),className:"flex-1 border border-gray-300 text-gray-700 px-6 py-3 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Annuler"}),(0,r.jsx)("button",{type:"submit",disabled:i,className:"flex-1 bg-blue-600 hover:bg-blue-700 disabled:bg-gray-400 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:i?"Creation...":"Creer le dossier"})]})]})]})})}e.s(["default",()=>i,"dynamic",0,"force-dynamic"])}]);