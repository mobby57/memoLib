(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,514764,e=>{"use strict";let a=(0,e.i(475254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>a],514764)},531278,e=>{"use strict";let a=(0,e.i(475254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>a],531278)},623286,e=>{"use strict";var a=e.i(843476),r=e.i(271645),t=e.i(263488),s=e.i(514764),n=e.i(269638),i=e.i(531278),l=e.i(63209),d=e.i(284614),o=e.i(342920);let c=[{email:"mohamed.benali@example.com",name:"Mohamed Benali"},{email:"karim.ibrahim@example.com",name:"Karim Ibrahim"},{email:"nouveau.client@example.com",name:"Nouveau Client (non enregistre)"}],m=[{email:"jean.dupont@cabinet-dupont.fr",name:"Maitre Jean Dupont"},{email:"sophie.martin@cabinet-martin.fr",name:"Maitre Sophie Martin"},{email:"pierre.rousseau@cabinet-rousseau.fr",name:"Maitre Pierre Rousseau"}],u=[{name:"Question juridique urgente",subject:"URGENT - Question concernant mon dossier de regularisation",body:`Bonjour Maitre,

Je vous ecris car j'ai une situation urgente concernant mon dossier de regularisation.

J'ai recu hier une convocation de la prefecture pour un entretien le 15 fevrier prochain. Je suis tres inquiet car je ne sais pas quels documents je dois apporter.

Pouvez-vous me rappeler des que possible pour me conseiller sur la marche a suivre ?

Merci pour votre aide.

Cordialement,
Mohamed Benali
Tel: 06 12 34 56 78`},{name:"Demande de rendez-vous",subject:"Demande de rendez-vous pour consultation",body:`Bonjour Maitre,

Je souhaiterais prendre rendez-vous pour une consultation concernant ma demande de titre de sejour.

Je suis disponible les matins en semaine. Quelles sont vos disponibilites ?

Merci d'avance.

Cordialement`},{name:"Envoi de documents",subject:"Documents demandes pour mon dossier",body:`Bonjour Maitre,

Suite a notre dernier echange, veuillez trouver ci-joint les documents suivants :
- Copie de mon passeport
- Justificatifs de domicile des 3 derniers mois
- Attestation d'hebergement

N'hesitez pas a me contacter si vous avez besoin d'autres pieces.

Bien cordialement`},{name:"Reclamation",subject:"Insatisfaction concernant le suivi de mon dossier",body:`Bonjour,

Je me permets de vous ecrire car je suis mecontent du suivi de mon dossier.

Cela fait maintenant 3 semaines que j'attends un retour concernant ma demande et je n'ai recu aucune nouvelle malgre mes relances telephoniques.

Je souhaite obtenir des explications sur ce retard et connaitre l'etat d'avancement de mon dossier.

Dans l'attente de votre reponse.`}];function x(){let[e,x]=(0,r.useState)(c[0].email),[g,h]=(0,r.useState)(m[0].email),[b,p]=(0,r.useState)(""),[j,y]=(0,r.useState)(""),[v,f]=(0,r.useState)(!1),[k,N]=(0,r.useState)(null),[w,C]=(0,r.useState)(null),S=async()=>{if(!e||!g||!b||!j)return void C("Tous les champs sont requis");f(!0),C(null),N(null);try{let a=await fetch("/api/emails/incoming",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({from:e,to:g,subject:b,body:j,messageId:`test-${Date.now()}@simulator.local`})}),r=await a.json();a.ok?N(r):C(r.error||"Erreur lors de l'envoi")}catch(e){C("Erreur de connexion")}finally{f(!1)}};return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 dark:from-gray-900 dark:to-gray-800 p-6",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center justify-center gap-3",children:[(0,a.jsx)(t.Mail,{className:"w-8 h-8 text-blue-600"}),"Simulateur d'Email Client"]}),(0,a.jsx)("p",{className:"text-gray-600 dark:text-gray-400 mt-2",children:"Testez le flux complet de traitement des emails entrants"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-6 flex items-center gap-2",children:[(0,a.jsx)(s.Send,{className:"w-5 h-5"}),"Composer un email"]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[(0,a.jsx)(d.User,{className:"w-4 h-4 inline mr-1"}),"De (Client)"]}),(0,a.jsx)("select",{value:e,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:c.map(e=>(0,a.jsxs)("option",{value:e.email,children:[e.name," (",e.email,")"]},e.email))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:[(0,a.jsx)(o.Building,{className:"w-4 h-4 inline mr-1"}),"a (Avocat)"]}),(0,a.jsx)("select",{value:g,onChange:e=>h(e.target.value),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:m.map(e=>(0,a.jsxs)("option",{value:e.email,children:[e.name," (",e.email,")"]},e.email))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Sujet"}),(0,a.jsx)("input",{type:"text",value:b,onChange:e=>p(e.target.value),placeholder:"Sujet de l'email...",className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Message"}),(0,a.jsx)("textarea",{value:j,onChange:e=>y(e.target.value),placeholder:"Contenu de l'email...",rows:10,className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white"})]}),w&&(0,a.jsxs)("div",{className:"p-4 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-lg flex items-center gap-2 text-red-700 dark:text-red-400",children:[(0,a.jsx)(l.AlertCircle,{className:"w-5 h-5"}),w]}),k&&(0,a.jsxs)("div",{className:"p-4 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-green-700 dark:text-green-400 mb-2",children:[(0,a.jsx)(n.CheckCircle,{className:"w-5 h-5"}),(0,a.jsx)("span",{className:"font-semibold",children:"Email envoye avec succes!"})]}),(0,a.jsxs)("div",{className:"text-sm text-green-600 dark:text-green-300 space-y-1",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Email ID:"})," ",k.emailId]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Workflow ID:"})," ",k.workflowId]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Categorie detectee:"})," ",k.category]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Urgence:"})," ",k.urgency]})]}),(0,a.jsx)("a",{href:"/super-admin/emails",className:"inline-block mt-3 text-sm text-green-700 dark:text-green-400 underline hover:no-underline",children:"[Next] Voir dans le dashboard Super Admin"})]}),(0,a.jsx)("button",{onClick:S,disabled:v,className:"w-full flex items-center justify-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white font-medium rounded-lg transition",children:v?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.Loader2,{className:"w-5 h-5 animate-spin"}),"Envoi en cours..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.Send,{className:"w-5 h-5"}),"Envoyer l'email"]})})]})]}),(0,a.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Modeles d'email"}),(0,a.jsx)("div",{className:"space-y-3",children:u.map((e,r)=>(0,a.jsxs)("button",{onClick:()=>{p(e.subject),y(e.body)},className:"w-full text-left p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700 transition",children:[(0,a.jsx)("p",{className:"font-medium text-gray-900 dark:text-white text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate mt-1",children:e.subject})]},r))}),(0,a.jsxs)("div",{className:"mt-6 pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-3",children:"Comptes de test"}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 dark:text-gray-400 space-y-2",children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Super Admin:"}),(0,a.jsx)("br",{}),"superadmin@memoLib.com"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Avocat:"}),(0,a.jsx)("br",{}),"jean.dupont@cabinet-dupont.fr"]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("strong",{children:"Client:"}),(0,a.jsx)("br",{}),"mohamed.benali@example.com"]})]})]})]})]})]})})}e.s(["default",()=>x,"dynamic",0,"force-dynamic"])}]);