(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,659544,e=>{"use strict";var s=e.i(843476),i=e.i(271645),t=e.i(975157);let r=i.forwardRef(({className:e,variant:i="default",size:r="default",...a},n)=>(0,s.jsx)("button",{className:(0,t.cn)("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:opacity-50 disabled:pointer-events-none ring-offset-background",{"bg-primary text-primary-foreground hover:bg-primary/90":"default"===i,"border border-input hover:bg-accent hover:text-accent-foreground":"outline"===i,"hover:bg-accent hover:text-accent-foreground":"ghost"===i,"bg-destructive text-destructive-foreground hover:bg-destructive/90":"destructive"===i},{"h-10 py-2 px-4":"default"===r,"h-9 px-3 rounded-md":"sm"===r,"h-11 px-8 rounded-md":"lg"===r},e),ref:n,...a}));r.displayName="Button",e.s(["Button",()=>r])},527221,e=>{"use strict";var s=e.i(843476),i=e.i(271645),t=e.i(339964),r=e.i(496640),a=e.i(659544);function n(){let[e,n]=(0,i.useState)(null),[d,c]=(0,i.useState)([]),[o,x]=(0,i.useState)([]),[m,h]=(0,i.useState)([]),[u,j]=(0,i.useState)(!0);(0,i.useEffect)(()=>{p()},[]);let p=async()=>{try{let e=await fetch("/api/forms/stats"),s=await e.json();n(s);let i=await fetch("/api/forms/submissions?limit=10"),t=await i.json();c(t);let r=await fetch("/api/forms/approvals?status=pending"),a=await r.json();x(a);let l=await fetch("/api/forms/risks?priority=critical,high"),d=await l.json();h(d),j(!1)}catch(e){console.error("Erreur chargement donnees:",e),j(!1)}};return u?(0,s.jsx)("div",{className:"container mx-auto p-6",children:(0,s.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,s.jsx)("div",{className:"h-32 bg-gray-200 rounded"}),(0,s.jsx)("div",{className:"h-64 bg-gray-200 rounded"})]})}):(0,s.jsxs)("div",{className:"container mx-auto p-6 space-y-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"[emoji] Dashboard Decisionnel"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Gestion centralisee des formulaires et decisions organisationnelles"})]}),(0,s.jsx)(a.Button,{onClick:()=>window.location.href="/lawyer/forms",children:"Nouveau Formulaire"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{className:"pb-2",children:[(0,s.jsx)(CardDescription,{children:"Soumissions Totales"}),(0,s.jsx)(t.CardTitle,{className:"text-3xl",children:e?.totalSubmissions||0})]}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("p",{className:"text-sm text-green-600",children:"+12% ce mois"})})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{className:"pb-2",children:[(0,s.jsx)(CardDescription,{children:"Approbations en Attente"}),(0,s.jsx)(t.CardTitle,{className:"text-3xl text-orange-600",children:e?.pendingApprovals||0})]}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Necessite action"})})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{className:"pb-2",children:[(0,s.jsx)(CardDescription,{children:"Risques Critiques"}),(0,s.jsx)(t.CardTitle,{className:"text-3xl text-red-600",children:e?.criticalRisks||0})]}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("p",{className:"text-sm text-red-600",children:"Attention immediate"})})]}),(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{className:"pb-2",children:[(0,s.jsx)(CardDescription,{children:"Score Impact Moyen"}),(0,s.jsxs)(t.CardTitle,{className:"text-3xl",children:[e?.averageImpactScore?.toFixed(1)||"0.0","/20"]})]}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Derniers 30 jours"})})]})]}),(0,s.jsxs)(Tabs,{defaultValue:"submissions",className:"space-y-4",children:[(0,s.jsxs)(TabsList,{children:[(0,s.jsx)(TabsTrigger,{value:"submissions",children:"Soumissions Recentes"}),(0,s.jsxs)(TabsTrigger,{value:"approvals",children:["Mes Approbations (",o.length,")"]}),(0,s.jsxs)(TabsTrigger,{value:"risks",children:["Risques (",m.length,")"]}),(0,s.jsx)(TabsTrigger,{value:"analytics",children:"Analytics"})]}),(0,s.jsx)(TabsContent,{value:"submissions",className:"space-y-4",children:(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Dernieres Soumissions"}),(0,s.jsx)(CardDescription,{children:"Historique des formulaires soumis recemment"})]}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("div",{className:"space-y-3",children:d.map(e=>{var i,t,n;return(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(r.Badge,{variant:"strategic-decision"===e.formType?"default":"secondary",children:l(e.formType)}),(0,s.jsx)("span",{className:"font-medium",children:e.submitterEmail})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:new Date(e.submittedAt).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Impact"}),(0,s.jsxs)("div",{className:`font-bold ${(i=e.impactScore)>=15?"text-red-600":i>=9?"text-orange-600":i>=5?"text-yellow-600":"text-green-600"}`,children:[e.impactScore,"/20"]})]}),(0,s.jsx)(r.Badge,{variant:"approved"===(t=e.status)?"default":"rejected"===t?"destructive":"secondary",children:{pending:"En Attente",approved:"Approuve",rejected:"Rejete",cancelled:"Annule"}[n=e.status]||n}),(0,s.jsx)(a.Button,{variant:"outline",size:"sm",children:"Voir Details"})]})]},e.id)})})})]})}),(0,s.jsx)(TabsContent,{value:"approvals",className:"space-y-4",children:(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Approbations Requises"}),(0,s.jsx)(CardDescription,{children:"Decisions en attente de votre validation"})]}),(0,s.jsx)(t.CardContent,{children:(0,s.jsxs)("div",{className:"space-y-3",children:[o.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(r.Badge,{children:["Niveau ",e.level]}),(0,s.jsx)("span",{className:"font-medium",children:l(e.submission.formType)}),(0,s.jsxs)("span",{className:"text-gray-600",children:["par ",e.submission.submitterEmail]})]}),(0,s.jsxs)("p",{className:"text-sm text-orange-600 mt-1",children:["echeance: ",new Date(e.dueDate).toLocaleDateString("fr-FR")]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(a.Button,{variant:"outline",size:"sm",children:"Examiner"}),(0,s.jsx)(a.Button,{variant:"default",size:"sm",className:"bg-green-600",children:"[Check] Approuver"}),(0,s.jsx)(a.Button,{variant:"destructive",size:"sm",children:"[X] Rejeter"})]})]},e.id)),0===o.length&&(0,s.jsx)("p",{className:"text-center text-gray-500 py-8",children:"Aucune approbation en attente"})]})})]})}),(0,s.jsx)(TabsContent,{value:"risks",className:"space-y-4",children:(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Risques Identifies"}),(0,s.jsx)(CardDescription,{children:"Risques critiques et eleves necessitant attention"})]}),(0,s.jsx)(t.CardContent,{children:(0,s.jsx)("div",{className:"space-y-3",children:m.map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(r.Badge,{variant:"critical"===e.priorityLevel?"destructive":"default",children:e.priorityLevel.toUpperCase()}),(0,s.jsx)("span",{className:"font-medium",children:e.category})]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Soumis par ",e.submitterEmail]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Score"}),(0,s.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e.riskScore})]}),(0,s.jsx)(a.Button,{variant:"outline",size:"sm",children:"Traiter"})]})]},e.id))})})]})}),(0,s.jsx)(TabsContent,{value:"analytics",children:(0,s.jsxs)(t.Card,{children:[(0,s.jsxs)(t.CardHeader,{children:[(0,s.jsx)(t.CardTitle,{children:"Analytics & Tendances"}),(0,s.jsx)(CardDescription,{children:"Analyse des decisions organisationnelles"})]}),(0,s.jsx)(t.CardContent,{children:(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-3",children:"Taux d'Approbation"}),(0,s.jsxs)("div",{className:"text-4xl font-bold text-green-600",children:[e?.approvalRate||0,"%"]}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"Base sur les 90 derniers jours"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"font-semibold mb-3",children:"Delai Moyen d'Approbation"}),(0,s.jsx)("div",{className:"text-4xl font-bold",children:"4.2 jours"}),(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-2",children:"-15% vs mois precedent"})]})]})})]})})]})]})}function l(e){return({"resource-request":"[emoji] Demande de Ressources","strategic-decision":"ðŸŽ¯ Decision Strategique","risk-assessment":"ï¸ evaluation de Risque"})[e]||e}e.s(["default",()=>n,"dynamic",0,"force-dynamic"])}]);