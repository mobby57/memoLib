(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,320970,e=>{"use strict";var s=e.i(843476),t=e.i(522016);function l(){return(0,s.jsx)("nav",{className:"sticky top-0 z-50 bg-white shadow-md border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(t.default,{href:"/admin",className:"px-4 py-2 rounded-lg font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all",children:"ðŸ  Dashboard"}),(0,s.jsx)(t.default,{href:"/admin/clients",className:"px-4 py-2 rounded-lg font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all",children:"[emoji] Clients"}),(0,s.jsx)(t.default,{href:"/admin/dossiers",className:"px-4 py-2 rounded-lg font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all",children:"[emoji] Dossiers"}),(0,s.jsx)(t.default,{href:"/admin/documents",className:"px-4 py-2 rounded-lg font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all",children:"[emoji] Documents"}),(0,s.jsx)(t.default,{href:"/admin/messages",className:"px-4 py-2 rounded-lg font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all",children:"[emoji] Messages"}),(0,s.jsx)(t.default,{href:"/admin/email-monitoring",className:"px-4 py-2 rounded-lg font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all",children:"[emoji] Emails"}),(0,s.jsx)(t.default,{href:"/admin/parametres",className:"px-4 py-2 rounded-lg font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all",children:"ï¸ Parametres"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("span",{className:"px-3 py-1 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-full text-sm font-semibold",children:"ADMIN"}),(0,s.jsx)(t.default,{href:"/api/auth/signout",className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 font-semibold transition-colors",children:"Deconnexion"})]})]})})})}e.s(["default",()=>l])},672906,e=>{"use strict";var s=e.i(843476),t=e.i(217255),l=e.i(618566),a=e.i(271645),r=e.i(522016),i=e.i(320970);function n(){let{data:e,status:n}=(0,t.useSession)(),d=(0,l.useRouter)(),[o,c]=(0,a.useState)({clients:0,dossiers:0,factures:0,revenueTotal:0,clientsLimit:0,dossiersLimit:0,planName:"",aiLevel:1}),[x,m]=(0,a.useState)([]),[h,u]=(0,a.useState)([]),[g,b]=(0,a.useState)(!0);(0,a.useEffect)(()=>{"unauthenticated"===n?d.push("/auth/login"):e?.user&&"SUPER_ADMIN"===e.user.role?d.push("/super-admin"):e?.user&&"CLIENT"===e.user.role?d.push("/client"):e?.user?.role==="ADMIN"&&p()},[e,n,d]);let p=async()=>{try{let[s,t]=await Promise.all([fetch("/api/admin/dossiers"),fetch("/api/admin/clients")]);if(s.ok){let e=await s.json();m(e.dossiers)}if(t.ok){let e=await t.json();u(e.clients)}e?.user?.tenantId&&c({clients:0,dossiers:0,factures:0,revenueTotal:0,clientsLimit:50,dossiersLimit:100,planName:e.user.tenantPlan||"Basic",aiLevel:1}),b(!1)}catch(e){console.error("Error fetching data:",e),b(!1)}};if(g)return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600"})});let j=o.clientsLimit>0?o.clients/o.clientsLimit*100:0,f=o.dossiersLimit>0?o.dossiers/o.dossiersLimit*100:0;return(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-blue-50 to-indigo-50",children:[(0,s.jsx)(i.default,{}),(0,s.jsx)("header",{className:"bg-white shadow-md border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-8 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Dashboard Avocat"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Gestion de votre cabinet"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Cabinet ",e?.user?.tenantName||"Mon Cabinet"]}),(0,s.jsxs)("p",{className:"font-semibold text-gray-900",children:["Plan ",o.planName," - IA Niveau ",o.aiLevel]})]}),(0,s.jsx)("div",{className:"h-12 w-12 rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white text-xl font-bold shadow-lg",children:e?.user?.name?.charAt(0).toUpperCase()})]})]})})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-8 py-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,s.jsx)(r.default,{href:"/admin/clients",className:"bg-white rounded-xl shadow-md p-6 hover:shadow-xl transition-all cursor-pointer group",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"text-5xl mb-3 block group-hover:scale-110 transition-transform",children:"[emoji]"}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:"Gerer les Clients"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[o.clients," clients"]})]})}),(0,s.jsx)(r.default,{href:"/admin/dossiers",className:"bg-white rounded-xl shadow-md p-6 hover:shadow-xl transition-all cursor-pointer group",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"text-5xl mb-3 block group-hover:scale-110 transition-transform",children:"[emoji]"}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:"Gerer les Dossiers"}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[o.dossiers," dossiers"]})]})}),(0,s.jsx)(r.default,{href:"/admin/messages",className:"bg-white rounded-xl shadow-md p-6 hover:shadow-xl transition-all cursor-pointer group",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"text-5xl mb-3 block group-hover:scale-110 transition-transform",children:"[emoji]"}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:"Messages"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Conversations clients"})]})}),(0,s.jsx)(r.default,{href:"/admin/documents",className:"bg-white rounded-xl shadow-md p-6 hover:shadow-xl transition-all cursor-pointer group",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("span",{className:"text-5xl mb-3 block group-hover:scale-110 transition-transform",children:"[emoji]"}),(0,s.jsx)("p",{className:"font-semibold text-gray-900",children:"Documents"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Tous les documents"})]})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Clients"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:o.clients}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["sur ",o.clientsLimit," max"]})]}),(0,s.jsx)("div",{className:"bg-blue-100 p-3 rounded-full",children:(0,s.jsx)("span",{className:"text-3xl",children:"[emoji]"})})]}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:`h-2 rounded-full ${j>=90?"bg-red-500":j>=70?"bg-orange-500":"bg-blue-500"}`,style:{width:`${Math.min(j,100)}%`}})})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Dossiers"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:o.dossiers}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["sur ",o.dossiersLimit," max"]})]}),(0,s.jsx)("div",{className:"bg-green-100 p-3 rounded-full",children:(0,s.jsx)("span",{className:"text-3xl",children:"[emoji]"})})]}),(0,s.jsx)("div",{className:"mt-3",children:(0,s.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,s.jsx)("div",{className:`h-2 rounded-full ${f>=90?"bg-red-500":f>=70?"bg-orange-500":"bg-green-500"}`,style:{width:`${Math.min(f,100)}%`}})})})]}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"Factures"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:o.factures}),(0,s.jsx)("p",{className:"text-xs text-purple-600 mt-1",children:"Total emises"})]}),(0,s.jsx)("div",{className:"bg-purple-100 p-3 rounded-full",children:(0,s.jsx)("span",{className:"text-3xl",children:"[emoji]"})})]})}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 border-l-4 border-indigo-500",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-gray-500",children:"IA Autonomie"}),(0,s.jsxs)("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:["Niveau ",o.aiLevel]}),(0,s.jsx)("p",{className:"text-xs text-indigo-600 mt-1",children:1===o.aiLevel?"Assistant simple":2===o.aiLevel?"Pre-redaction":3===o.aiLevel?"Analyse juridique":"Autonomie maximale"})]}),(0,s.jsx)("div",{className:"bg-indigo-100 p-3 rounded-full",children:(0,s.jsx)("span",{className:"text-3xl",children:"[emoji]"})})]})})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"[emoji]"})," Dossiers Urgents"]}),(0,s.jsx)("button",{onClick:()=>d.push("/dossiers"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors font-semibold",children:"+ Nouveau Dossier"})]}),0===x.filter(e=>"urgent"===e.statut).length?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500 text-lg",children:" Aucun dossier urgent"})}):(0,s.jsx)("div",{className:"space-y-3",children:x.filter(e=>"urgent"===e.statut).slice(0,5).map(e=>(0,s.jsx)("div",{className:"border border-red-200 bg-red-50 rounded-lg p-4 hover:shadow-md transition-shadow",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)("span",{className:"text-red-600 font-bold",children:e.numero}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900",children:e.typeDossier}),(0,s.jsx)("span",{className:"px-2 py-1 bg-red-500 text-white rounded text-xs font-semibold",children:"URGENT"})]}),(0,s.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:e.objet}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Client: ",e.client?.nom," ",e.client?.prenom]})]}),(0,s.jsx)("button",{className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-semibold",children:"Traiter [Next]"})]})},e.id))})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("h2",{className:"text-2xl font-bold text-gray-900 flex items-center gap-2",children:[(0,s.jsx)("span",{children:"[emoji]"})," Derniers Clients"]}),(0,s.jsx)("button",{onClick:()=>d.push("/clients"),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors font-semibold",children:"+ Nouveau Client"})]}),0===h.length?(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucun client pour le moment"})}):(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:"Nom"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:"Email"}),(0,s.jsx)("th",{className:"text-left py-3 px-4 text-gray-600 font-semibold",children:"Telephone"}),(0,s.jsx)("th",{className:"text-center py-3 px-4 text-gray-600 font-semibold",children:"Dossiers"}),(0,s.jsx)("th",{className:"text-center py-3 px-4 text-gray-600 font-semibold",children:"Portail"})]})}),(0,s.jsx)("tbody",{children:h.slice(0,5).map(e=>(0,s.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,s.jsxs)("td",{className:"py-4 px-4 font-medium text-gray-900",children:[e.nom," ",e.prenom]}),(0,s.jsx)("td",{className:"py-4 px-4 text-gray-600",children:e.email}),(0,s.jsx)("td",{className:"py-4 px-4 text-gray-600",children:e.telephone}),(0,s.jsx)("td",{className:"py-4 px-4 text-center",children:(0,s.jsx)("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-semibold",children:e._count?.dossiers||0})}),(0,s.jsx)("td",{className:"py-4 px-4 text-center",children:e.user?(0,s.jsx)("span",{className:"text-green-600 font-semibold",children:"[Check] Actif"}):(0,s.jsx)("span",{className:"text-gray-400",children:"-"})})]},e.id))})]})})]})]})]})}e.s(["default",()=>n,"dynamic",0,"force-dynamic"])}]);