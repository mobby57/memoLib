(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,320970,e=>{"use strict";var s=e.i(843476),r=e.i(522016);function t(){return(0,s.jsx)("nav",{className:"sticky top-0 z-50 bg-white shadow-md border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(r.default,{href:"/admin",className:"px-4 py-2 rounded-lg font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all",children:"ðŸ  Dashboard"}),(0,s.jsx)(r.default,{href:"/admin/clients",className:"px-4 py-2 rounded-lg font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all",children:"[emoji] Clients"}),(0,s.jsx)(r.default,{href:"/admin/dossiers",className:"px-4 py-2 rounded-lg font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all",children:"[emoji] Dossiers"}),(0,s.jsx)(r.default,{href:"/admin/documents",className:"px-4 py-2 rounded-lg font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all",children:"[emoji] Documents"}),(0,s.jsx)(r.default,{href:"/admin/messages",className:"px-4 py-2 rounded-lg font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all",children:"[emoji] Messages"}),(0,s.jsx)(r.default,{href:"/admin/email-monitoring",className:"px-4 py-2 rounded-lg font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all",children:"[emoji] Emails"}),(0,s.jsx)(r.default,{href:"/admin/parametres",className:"px-4 py-2 rounded-lg font-semibold text-gray-700 hover:bg-blue-50 hover:text-blue-600 transition-all",children:"ï¸ Parametres"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("span",{className:"px-3 py-1 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-full text-sm font-semibold",children:"ADMIN"}),(0,s.jsx)(r.default,{href:"/api/auth/signout",className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 font-semibold transition-colors",children:"Deconnexion"})]})]})})})}e.s(["default",()=>t])},196841,e=>{"use strict";var s=e.i(843476),r=e.i(217255),t=e.i(618566),a=e.i(271645),l=e.i(522016),o=e.i(320970);function n(){let{data:e,status:n}=(0,r.useSession)(),d=(0,t.useRouter)(),[i,c]=(0,a.useState)("infos"),[u,m]=(0,a.useState)(!0),[x,b]=(0,a.useState)(!1),[p,g]=(0,a.useState)({firstName:"",lastName:"",email:"",phone:"",address:"",city:"",postalCode:"",country:""}),[h,f]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[y,j]=(0,a.useState)({type:"",text:""});(0,a.useEffect)(()=>{"unauthenticated"===n?d.push("/auth/login"):e?.user&&"ADMIN"!==e.user.role?d.push("/dashboard"):e?.user?.role==="ADMIN"&&N()},[e,n,d]);let N=async()=>{try{let e=await fetch("/api/admin/profil");if(e.ok){let s=await e.json();g(s.profil)}m(!1)}catch(e){console.error("Error fetching profile:",e),m(!1)}},v=async e=>{e.preventDefault(),b(!0),j({type:"",text:""});try{let e=await fetch("/api/admin/profil",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)});if(e.ok)j({type:"success",text:"Profil mis a jour avec succes !"});else{let s=await e.json();j({type:"error",text:s.error||"Erreur lors de la mise a jour"})}}catch(e){j({type:"error",text:"Erreur reseau"})}finally{b(!1)}},w=async e=>{if(e.preventDefault(),h.newPassword!==h.confirmPassword)return void j({type:"error",text:"Les mots de passe ne correspondent pas"});if(h.newPassword.length<8)return void j({type:"error",text:"Le mot de passe doit contenir au moins 8 caracteres"});b(!0),j({type:"",text:""});try{let e=await fetch("/api/admin/profil/password",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:h.currentPassword,newPassword:h.newPassword})});if(e.ok)j({type:"success",text:"Mot de passe change avec succes !"}),f({currentPassword:"",newPassword:"",confirmPassword:""});else{let s=await e.json();j({type:"error",text:s.error||"Erreur lors du changement de mot de passe"})}}catch(e){j({type:"error",text:"Erreur reseau"})}finally{b(!1)}};return u?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Chargement du profil..."})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,s.jsx)(o.default,{}),(0,s.jsx)("header",{className:"bg-white shadow-md border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-5xl mx-auto px-8 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(l.default,{href:"/admin",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,s.jsx)("span",{className:"text-2xl",children:"[Back]"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Mon Profil"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Gerer mes informations personnelles"})]})]})})}),(0,s.jsxs)("main",{className:"max-w-5xl mx-auto px-8 py-8",children:[y.text&&(0,s.jsx)("div",{className:`mb-6 p-4 rounded-lg ${"success"===y.type?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:y.text}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,s.jsx)("button",{onClick:()=>c("infos"),className:`flex-1 py-4 px-6 font-semibold transition-colors ${"infos"===i?"bg-blue-500 text-white":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:"[User] Informations Personnelles"}),(0,s.jsx)("button",{onClick:()=>c("security"),className:`flex-1 py-4 px-6 font-semibold transition-colors ${"security"===i?"bg-blue-500 text-white":"bg-gray-50 text-gray-700 hover:bg-gray-100"}`,children:"[Lock] Securite"})]}),"infos"===i&&(0,s.jsxs)("form",{onSubmit:v,className:"p-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Prenom *"}),(0,s.jsx)("input",{type:"text",required:!0,value:p.firstName,onChange:e=>g({...p,firstName:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom *"}),(0,s.jsx)("input",{type:"text",required:!0,value:p.lastName,onChange:e=>g({...p,lastName:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),(0,s.jsx)("input",{type:"email",value:p.email,disabled:!0,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg bg-gray-100 cursor-not-allowed"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"L'email ne peut pas etre modifie. Contactez le support si necessaire."})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Telephone"}),(0,s.jsx)("input",{type:"tel",value:p.phone||"",onChange:e=>g({...p,phone:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",placeholder:"+33 6 12 34 56 78"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse"}),(0,s.jsx)("input",{type:"text",value:p.address||"",onChange:e=>g({...p,address:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",placeholder:"123 rue de la Loi"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Ville"}),(0,s.jsx)("input",{type:"text",value:p.city||"",onChange:e=>g({...p,city:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",placeholder:"Paris"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Code Postal"}),(0,s.jsx)("input",{type:"text",value:p.postalCode||"",onChange:e=>g({...p,postalCode:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",placeholder:"75001"})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Pays"}),(0,s.jsx)("input",{type:"text",value:p.country||"",onChange:e=>g({...p,country:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none",placeholder:"France"})]})]}),(0,s.jsxs)("div",{className:"mt-8 flex justify-end gap-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>d.push("/admin"),className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 font-semibold transition-colors",children:"Annuler"}),(0,s.jsx)("button",{type:"submit",disabled:x,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 font-semibold transition-colors",children:x?"Enregistrement...":"Enregistrer les modifications"})]})]}),"security"===i&&(0,s.jsx)("form",{onSubmit:w,className:"p-8",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de passe actuel *"}),(0,s.jsx)("input",{type:"password",required:!0,value:h.currentPassword,onChange:e=>f({...h,currentPassword:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nouveau mot de passe *"}),(0,s.jsx)("input",{type:"password",required:!0,value:h.newPassword,onChange:e=>f({...h,newPassword:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"}),(0,s.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Minimum 8 caracteres"})]}),(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirmer le mot de passe *"}),(0,s.jsx)("input",{type:"password",required:!0,value:h.confirmPassword,onChange:e=>f({...h,confirmPassword:e.target.value}),className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"})]}),(0,s.jsx)("button",{type:"submit",disabled:x,className:"w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 font-semibold transition-colors",children:x?"Changement...":"Changer le mot de passe"})]})})]})]})]})}e.s(["default",()=>n,"dynamic",0,"force-dynamic"])}]);