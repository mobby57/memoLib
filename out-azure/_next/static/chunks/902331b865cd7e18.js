(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,500610,e=>{"use strict";var s=e.i(843476),t=e.i(217255),l=e.i(618566),r=e.i(271645),a=e.i(522016);function i(){let{data:e,status:i}=(0,t.useSession)(),o=(0,l.useRouter)(),[n,d]=(0,r.useState)([]),[c,m]=(0,r.useState)(!0),[x,u]=(0,r.useState)(!1),[h,g]=(0,r.useState)("all"),[b,p]=(0,r.useState)("");(0,r.useEffect)(()=>{"unauthenticated"===i?o.push("/auth/login"):e?.user&&"CLIENT"!==e.user.role?o.push("/dashboard"):e?.user?.role==="CLIENT"&&j()},[e,i,o]);let j=async()=>{try{let e=await fetch("/api/client/documents");if(e.ok){let s=await e.json();d(s.documents||[])}m(!1)}catch(e){console.error("Error fetching documents:",e),m(!1)}},f=async e=>{let s=e.target.files?.[0];if(!s)return;u(!0);let t=new FormData;t.append("file",s),t.append("description","Document televerse par le client");try{(await fetch("/api/client/documents/upload",{method:"POST",body:t})).ok?(await j(),alert("Document televerse avec succes !")):alert("Erreur lors du televersement")}catch(e){alert("Erreur de connexion")}finally{u(!1)}},N=n.filter(e=>{let s=e.originalName.toLowerCase().includes(b.toLowerCase())||e.description?.toLowerCase().includes(b.toLowerCase());return"all"===h?s:s&&e.mimeType.includes(h)});return c?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Chargement des documents..."})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,s.jsx)("header",{className:"bg-white shadow-md border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-8 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(a.default,{href:"/client",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,s.jsx)("span",{className:"text-2xl",children:"[Back]"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:"Mes Documents"}),(0,s.jsx)("p",{className:"text-gray-600 mt-1",children:"Gerez tous vos documents juridiques"})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Total"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]})]})})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-8 py-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ajouter un document"}),(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-blue-500 transition-colors",children:[(0,s.jsx)("input",{type:"file",id:"file-upload",className:"hidden",onChange:f,disabled:x}),(0,s.jsx)("label",{htmlFor:"file-upload",className:"cursor-pointer",children:(0,s.jsxs)("div",{className:"flex flex-col items-center gap-3",children:[(0,s.jsx)("span",{className:"text-6xl",children:x?"":"[emoji]"}),(0,s.jsx)("span",{className:"font-semibold text-gray-900 text-lg",children:x?"Televersement en cours...":"Cliquez pour ajouter un fichier"}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:"PDF, JPEG, PNG, DOCX (max 10 MB)"})]})})]})]}),(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-8",children:(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)("input",{type:"text",placeholder:"[emoji] Rechercher un document...",value:b,onChange:e=>p(e.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"})}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{onClick:()=>g("all"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${"all"===h?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Tous (",n.length,")"]}),(0,s.jsx)("button",{onClick:()=>g("pdf"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${"pdf"===h?"bg-red-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"[emoji] PDF"}),(0,s.jsx)("button",{onClick:()=>g("image"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${"image"===h?"bg-purple-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"[emoji]️ Images"}),(0,s.jsx)("button",{onClick:()=>g("word"),className:`px-4 py-2 rounded-lg font-semibold transition-colors ${"word"===h?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"[emoji] Word"})]})]})}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:[N.length," document(s)"]}),0===N.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("span",{className:"text-6xl mb-4 block",children:"[emoji]"}),(0,s.jsx)("p",{className:"text-gray-500 text-lg",children:b||"all"!==h?"Aucun document ne correspond a votre recherche":"Aucun document pour le moment"})]}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:N.map(e=>{var t,l;return(0,s.jsxs)("div",{className:"border-2 border-gray-200 rounded-lg p-4 hover:shadow-lg hover:border-blue-300 transition-all group",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,s.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg group-hover:bg-blue-200 transition-colors",children:(0,s.jsx)("span",{className:"text-3xl",children:(t=e.mimeType).includes("pdf")?"[emoji]":t.includes("image")?"[emoji]️":(t.includes("word")||t.includes("document")||t.includes("excel")||t.includes("spreadsheet"),"[emoji]")})}),(0,s.jsx)("a",{href:`/api/client/documents/${e.id}/download`,className:"p-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",download:!0,title:"Telecharger",children:"️"})]}),(0,s.jsx)("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:e.originalName}),e.description&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:e.description}),e.dossier&&(0,s.jsx)("div",{className:"mb-3 pb-3 border-b border-gray-200",children:(0,s.jsxs)(a.default,{href:`/client/dossiers/${e.dossier}`,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:["[emoji] ",e.dossier.typeDossier]})}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,s.jsx)("span",{children:(l=e.sizeBytes)<1024?l+" B":l<1048576?(l/1024).toFixed(1)+" KB":(l/1048576).toFixed(1)+" MB"}),(0,s.jsx)("span",{children:new Date(e.uploadedAt).toLocaleDateString("fr-FR")})]})]},e.id)})})]}),(0,s.jsx)("div",{className:"bg-blue-50 border-l-4 border-blue-500 p-6 rounded-lg mt-8",children:(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("span",{className:"text-2xl",children:"[emoji]"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-semibold text-blue-900 mb-2",children:"Conseils pour vos documents"}),(0,s.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,s.jsx)("li",{children:"- Privilegiez le format PDF pour les documents officiels"}),(0,s.jsx)("li",{children:"- Nommez vos fichiers de maniere claire et descriptive"}),(0,s.jsx)("li",{children:"- Assurez-vous que les documents sont lisibles et complets"}),(0,s.jsx)("li",{children:"- Les documents seront accessibles a votre avocat"})]})]})]})})]})]})}e.s(["default",()=>i,"dynamic",0,"force-dynamic"])}]);