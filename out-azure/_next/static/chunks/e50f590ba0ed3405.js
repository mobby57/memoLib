(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,224914,e=>{"use strict";var s=e.i(843476),t=e.i(217255),r=e.i(618566),a=e.i(271645),l=e.i(522016);function i(){let{data:e,status:i}=(0,t.useSession)(),n=(0,r.useRouter)(),c=(0,r.useParams)().id,[d,o]=(0,a.useState)(null),[x,m]=(0,a.useState)(!0),[h,b]=(0,a.useState)(null),[g,u]=(0,a.useState)("infos"),[p,j]=(0,a.useState)(!1);(0,a.useEffect)(()=>{"unauthenticated"===i?n.push("/auth/login"):e?.user&&"CLIENT"!==e.user.role?n.push("/dashboard"):e?.user?.role==="CLIENT"&&N()},[e,i,n,c]);let N=async()=>{try{let e=await fetch(`/api/client/dossiers/${c}`);if(!e.ok){403===e.status?b("Vous n'avez pas accÃ¨s Ã  ce dossier"):404===e.status?b("Dossier non trouvÃ©"):b("Erreur lors du chargement du dossier"),m(!1);return}let s=await e.json();o(s),m(!1)}catch(e){console.error("Error fetching dossier:",e),b("Erreur de connexion"),m(!1)}},f=async e=>{let s=e.target.files?.[0];if(!s)return;j(!0);let t=new FormData;t.append("file",s),t.append("dossierId",c),t.append("description","Document tÃ©lÃ©versÃ© par le client");try{(await fetch("/api/client/documents/upload",{method:"POST",body:t})).ok?(await N(),alert("Document tÃ©lÃ©versÃ© avec succÃ¨s !")):alert("Erreur lors du tÃ©lÃ©versement")}catch(e){alert("Erreur de connexion")}finally{j(!1)}},y=e=>{switch(e){case"critique":return"bg-red-500 text-white";case"haute":return"bg-orange-500 text-white";case"normale":return"bg-blue-500 text-white";default:return"bg-gray-400 text-white"}};return x?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Chargement du dossier..."})]})}):h||!d?(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md text-center",children:[(0,s.jsx)("div",{className:"text-6xl mb-4",children:"âš ï¸"}),(0,s.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Erreur"}),(0,s.jsx)("p",{className:"text-gray-600 mb-6",children:h}),(0,s.jsx)(l.default,{href:"/client",className:"inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold",children:"Retour au tableau de bord"})]})}):(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-blue-50",children:[(0,s.jsx)("header",{className:"bg-white shadow-md border-b border-gray-200",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-8 py-4",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(l.default,{href:"/client",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,s.jsx)("span",{className:"text-2xl",children:"â†"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-indigo-600 bg-clip-text text-transparent",children:d.typeDossier}),(0,s.jsxs)("p",{className:"text-gray-600 mt-1",children:["Dossier ",d.numero]})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("span",{className:`px-4 py-2 rounded-full text-sm font-semibold border-2 ${(e=>{switch(e){case"urgent":return"bg-red-100 text-red-800 border-red-300";case"en_cours":return"bg-blue-100 text-blue-800 border-blue-300";case"termine":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}})(d.statut)}`,children:d.statut.replace("_"," ").toUpperCase()}),(0,s.jsxs)("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${y(d.priorite)}`,children:["PrioritÃ©: ",d.priorite]})]})]})})}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-8 py-8",children:[(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg mb-8 overflow-hidden",children:[(0,s.jsxs)("div",{className:"flex border-b border-gray-200",children:[(0,s.jsx)("button",{onClick:()=>u("infos"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${"infos"===g?"bg-blue-500 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:"ðŸ“‹ Informations"}),(0,s.jsxs)("button",{onClick:()=>u("documents"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${"documents"===g?"bg-blue-500 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:["ðŸ“„ Documents (",d.documents?.length||0,")"]}),(0,s.jsxs)("button",{onClick:()=>u("echeances"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${"echeances"===g?"bg-blue-500 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:["â° Ã‰chÃ©ances (",d.echeances?.length||0,")"]}),(0,s.jsx)("button",{onClick:()=>u("timeline"),className:`flex-1 px-6 py-4 font-semibold transition-colors ${"timeline"===g?"bg-blue-500 text-white":"bg-white text-gray-600 hover:bg-gray-50"}`,children:"ðŸ“… Timeline"})]}),(0,s.jsxs)("div",{className:"p-8",children:["infos"===g&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-gray-500 uppercase",children:"Type de Dossier"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:d.typeDossier})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-gray-500 uppercase",children:"NumÃ©ro"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:d.numero})]}),d.articleCeseda&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-gray-500 uppercase",children:"Article CESEDA"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:d.articleCeseda})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-gray-500 uppercase",children:"Date de CrÃ©ation"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:new Date(d.dateCreation).toLocaleDateString("fr-FR")})]}),d.dateEcheance&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-gray-500 uppercase",children:"Date d'Ã‰chÃ©ance"}),(0,s.jsx)("p",{className:"text-lg font-semibold text-red-600 mt-1",children:new Date(d.dateEcheance).toLocaleDateString("fr-FR")})]})]}),d.objet&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-gray-500 uppercase",children:"Objet"}),(0,s.jsx)("p",{className:"text-gray-900 mt-2",children:d.objet})]}),d.description&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-gray-500 uppercase",children:"Description"}),(0,s.jsx)("p",{className:"text-gray-700 mt-2 leading-relaxed",children:d.description})]}),d.notes&&(0,s.jsxs)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded",children:[(0,s.jsx)("label",{className:"text-sm font-semibold text-yellow-800 uppercase",children:"Notes"}),(0,s.jsx)("p",{className:"text-yellow-900 mt-2",children:d.notes})]})]}),"documents"===g&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"Documents du dossier"}),(0,s.jsx)("div",{children:(0,s.jsxs)("label",{className:"cursor-pointer inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold transition-colors",children:[(0,s.jsx)("span",{children:"ðŸ“¤"}),p?"TÃ©lÃ©versement...":"Ajouter un document",(0,s.jsx)("input",{type:"file",className:"hidden",onChange:f,disabled:p})]})})]}),d.documents&&0!==d.documents.length?(0,s.jsx)("div",{className:"space-y-3",children:d.documents.map(e=>{var t;return(0,s.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow bg-white",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,s.jsx)("div",{className:"bg-blue-100 p-3 rounded-lg",children:(0,s.jsx)("span",{className:"text-2xl",children:"ðŸ“„"})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900",children:e.originalName}),e.description&&(0,s.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-sm text-gray-500",children:[(0,s.jsx)("span",{children:(t=e.sizeBytes)<1024?t+" B":t<1048576?(t/1024).toFixed(1)+" KB":(t/1048576).toFixed(1)+" MB"}),(0,s.jsx)("span",{children:"â€¢"}),(0,s.jsx)("span",{children:new Date(e.uploadedAt).toLocaleDateString("fr-FR")})]})]})]}),(0,s.jsx)("a",{href:`/api/client/documents/${e.id}/download`,className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 font-semibold transition-colors",download:!0,children:"TÃ©lÃ©charger"})]})},e.id)})}):(0,s.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,s.jsx)("span",{className:"text-6xl mb-4 block",children:"ðŸ“„"}),(0,s.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucun document pour ce dossier"})]})]}),"echeances"===g&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ã‰chÃ©ances et dÃ©lais"}),d.echeances&&0!==d.echeances.length?(0,s.jsx)("div",{className:"space-y-3",children:d.echeances.map(e=>(0,s.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 bg-white",children:(0,s.jsx)("div",{className:"flex items-start justify-between",children:(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900",children:e.titre}),(0,s.jsx)("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${y(e.priorite)}`,children:e.priorite})]}),e.description&&(0,s.jsx)("p",{className:"text-gray-600 mb-3",children:e.description}),(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm",children:[(0,s.jsxs)("span",{className:"text-gray-500",children:["ðŸ“… ",new Date(e.dateEcheance).toLocaleDateString("fr-FR")]}),(0,s.jsx)("span",{className:`px-2 py-1 rounded text-xs font-semibold ${"respectee"===e.statut?"bg-green-100 text-green-800":"en_attente"===e.statut?"bg-orange-100 text-orange-800":"bg-red-100 text-red-800"}`,children:e.statut})]})]})})},e.id))}):(0,s.jsxs)("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[(0,s.jsx)("span",{className:"text-6xl mb-4 block",children:"â°"}),(0,s.jsx)("p",{className:"text-gray-500 text-lg",children:"Aucune Ã©chÃ©ance enregistrÃ©e"})]})]}),"timeline"===g&&(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Historique du dossier"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"relative pl-12",children:[(0,s.jsx)("div",{className:"absolute left-0 top-1 bg-blue-500 rounded-full p-2",children:(0,s.jsx)("span",{className:"text-white text-sm",children:"ðŸ“"})}),(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900",children:"Dossier crÃ©Ã©"}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:new Date(d.dateCreation).toLocaleDateString("fr-FR")})]}),(0,s.jsxs)("p",{className:"text-gray-600",children:["Le dossier ",d.numero," a Ã©tÃ© ouvert"]})]})]}),d.documents&&d.documents.map(e=>(0,s.jsxs)("div",{className:"relative pl-12",children:[(0,s.jsx)("div",{className:"absolute left-0 top-1 bg-green-500 rounded-full p-2",children:(0,s.jsx)("span",{className:"text-white text-sm",children:"ðŸ“„"})}),(0,s.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsx)("h4",{className:"font-semibold text-gray-900",children:"Document ajoutÃ©"}),(0,s.jsx)("span",{className:"text-sm text-gray-500",children:new Date(e.uploadedAt).toLocaleDateString("fr-FR")})]}),(0,s.jsx)("p",{className:"text-gray-600",children:e.originalName})]})]},e.id))]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,s.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Actions"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,s.jsxs)("button",{className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[(0,s.jsx)("span",{className:"text-2xl",children:"ðŸ’¬"}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"font-semibold text-gray-900",children:"Contacter mon avocat"}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"Envoyer un message"})]})]}),(0,s.jsxs)("button",{className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[(0,s.jsx)("span",{className:"text-2xl",children:"ðŸ“¤"}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"font-semibold text-gray-900",children:"Ajouter des documents"}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"TÃ©lÃ©verser des fichiers"})]})]}),(0,s.jsxs)("button",{className:"flex items-center gap-3 p-4 border-2 border-gray-200 rounded-lg hover:border-blue-500 hover:bg-blue-50 transition-colors",children:[(0,s.jsx)("span",{className:"text-2xl",children:"ðŸ””"}),(0,s.jsxs)("div",{className:"text-left",children:[(0,s.jsx)("div",{className:"font-semibold text-gray-900",children:"Notifications"}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:"GÃ©rer les alertes"})]})]})]})]})]})]})}e.s(["default",()=>i,"dynamic",0,"force-dynamic"])}]);