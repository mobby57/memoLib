<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SecureVault Accessible</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/accessible.css') }}">
</head>
<body>
    <div class="container">
        <!-- Header avec synthÃ¨se vocale -->
        <header class="header">
            <h1>ğŸ“¨ SecureVault Accessible</h1>
            <button class="voice-btn" onclick="speakPage()" aria-label="Ã‰couter la page">
                ğŸ”Š Ã‰couter
            </button>
        </header>

        <!-- Zone principale avec 3 gros boutons -->
        <main class="main-buttons">
            
            <!-- Bouton 1: CrÃ©er message -->
            <div class="big-button" onclick="creerMessage()" tabindex="0" role="button" aria-label="CrÃ©er un nouveau message">
                <div class="button-icon">ğŸ“</div>
                <div class="button-text">CrÃ©er un message</div>
                <div class="button-subtitle">Parler ou Ã©crire</div>
            </div>

            <!-- Bouton 2: Joindre document -->
            <div class="big-button" onclick="joindreFichier()" tabindex="0" role="button" aria-label="Joindre un document">
                <div class="button-icon">ğŸ“</div>
                <div class="button-text">Joindre un document</div>
                <div class="button-subtitle">Photo, PDF, fichier</div>
            </div>

            <!-- Bouton 3: Envoyer -->
            <div class="big-button send-button" onclick="envoyerMessage()" tabindex="0" role="button" aria-label="Envoyer le message">
                <div class="button-icon">ğŸ“¤</div>
                <div class="button-text">Envoyer</div>
                <div class="button-subtitle">Valider et envoyer</div>
            </div>

        </main>

        <!-- Zone d'Ã©tat -->
        <div class="status-zone" id="statusZone">
            <div class="status-text" id="statusText">PrÃªt Ã  crÃ©er un message</div>
        </div>

        <!-- ContrÃ´les vocaux -->
        <div class="voice-controls">
            <button class="voice-control" onclick="startListening()" aria-label="Commande vocale">
                ğŸ¤ Parler
            </button>
            <button class="voice-control" onclick="toggleHelp()" aria-label="Aide">
                â“ Aide
            </button>
        </div>

        <!-- Modal pour crÃ©ation de message -->
        <div class="modal" id="messageModal" style="display: none;">
            <div class="modal-content">
                <h2>ğŸ“ CrÃ©er votre message</h2>
                
                <!-- Mode vocal -->
                <div class="mode-section">
                    <h3>ğŸ¤ Mode vocal</h3>
                    <button class="action-btn" onclick="startVoiceMessage()">
                        Parler maintenant
                    </button>
                    <div id="voiceResult" class="voice-result"></div>
                </div>

                <!-- Mode modÃ¨les -->
                <div class="mode-section">
                    <h3>ğŸ“‹ ModÃ¨les rapides</h3>
                    <div class="template-buttons">
                        <button class="template-btn" onclick="useTemplate('demande')">
                            ğŸ“Œ Demande d'information
                        </button>
                        <button class="template-btn" onclick="useTemplate('plainte')">
                            âš ï¸ Signaler un problÃ¨me
                        </button>
                        <button class="template-btn" onclick="useTemplate('confirmation')">
                            âœ… Confirmer une prestation
                        </button>
                    </div>
                </div>

                <!-- AperÃ§u du message -->
                <div class="message-preview" id="messagePreview" style="display: none;">
                    <h3>ğŸ“„ Votre message :</h3>
                    <div class="preview-text" id="previewText"></div>
                    <button class="action-btn" onclick="readMessage()">ğŸ”Š Ã‰couter</button>
                </div>

                <!-- Actions -->
                <div class="modal-actions">
                    <button class="cancel-btn" onclick="closeModal()">âŒ Annuler</button>
                    <button class="validate-btn" onclick="validateMessage()">âœ… Valider</button>
                </div>
            </div>
        </div>

        <!-- Modal pour envoi -->
        <div class="modal" id="sendModal" style="display: none;">
            <div class="modal-content">
                <h2>ğŸ“¤ Envoyer le message</h2>
                
                <div class="recipient-section">
                    <label for="recipient">Ã€ qui envoyer ?</label>
                    <input type="email" id="recipient" placeholder="email@exemple.com" class="big-input">
                    <button class="voice-btn" onclick="speakRecipient()">ğŸ¤ Dicter</button>
                </div>

                <div class="final-preview" id="finalPreview">
                    <!-- Contenu du message final -->
                </div>

                <div class="modal-actions">
                    <button class="cancel-btn" onclick="closeSendModal()">âŒ Annuler</button>
                    <button class="send-final-btn" onclick="sendFinalMessage()">ğŸ“¤ Envoyer maintenant</button>
                </div>
            </div>
        </div>

        <!-- Zone d'aide -->
        <div class="help-zone" id="helpZone" style="display: none;">
            <h3>â“ Comment utiliser l'application</h3>
            <ul class="help-list">
                <li>ğŸ¤ <strong>Parler :</strong> Cliquez sur "Parler" et dÃ©crivez votre message</li>
                <li>ğŸ“ <strong>ModÃ¨les :</strong> Choisissez un modÃ¨le prÃ©-Ã©crit</li>
                <li>ğŸ“ <strong>Fichiers :</strong> Joignez des photos ou documents</li>
                <li>ğŸ“¤ <strong>Envoyer :</strong> Validez et envoyez votre message</li>
            </ul>
            <button class="action-btn" onclick="readHelp()">ğŸ”Š Ã‰couter l'aide</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='js/accessible.js') }}"></script>
</body>
</html>