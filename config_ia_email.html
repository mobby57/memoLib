<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuration IA Email - R√®gles M√©tier</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: #f5f7fa; }
        .header { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; padding: 20px; }
        .card { background: white; border-radius: 10px; padding: 20px; margin-bottom: 20px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        .tabs { display: flex; margin-bottom: 20px; }
        .tab { padding: 12px 20px; background: #f8f9fa; border: none; cursor: pointer; border-radius: 5px 5px 0 0; margin-right: 5px; }
        .tab.active { background: #667eea; color: white; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        .email-item { background: #f8f9fa; border-left: 4px solid #28a745; padding: 15px; margin: 10px 0; border-radius: 5px; }
        .email-critique { border-left-color: #dc3545; background: #ffe6e6; }
        .email-urgent { border-left-color: #ffc107; background: #fff3cd; }
        .email-important { border-left-color: #17a2b8; background: #d1ecf1; }
        .form-group { margin-bottom: 15px; }
        .form-group label { display: block; margin-bottom: 5px; font-weight: bold; }
        .form-group input, .form-group select, .form-group textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .btn { padding: 8px 15px; border: none; border-radius: 5px; cursor: pointer; margin: 2px; }
        .btn-primary { background: #667eea; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-danger { background: #dc3545; color: white; }
        .regle-item { background: #f8f9fa; border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin: 10px 0; }
        .regle-active { border-color: #28a745; background: #d4edda; }
        .client-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .client-card { background: white; border-radius: 8px; padding: 15px; border-left: 4px solid #667eea; }
        .priority-badge { padding: 4px 8px; border-radius: 12px; font-size: 12px; font-weight: bold; }
        .priority-critique { background: #dc3545; color: white; }
        .priority-urgent { background: #ffc107; color: #212529; }
        .priority-important { background: #17a2b8; color: white; }
        .priority-normal { background: #6c757d; color: white; }
        .config-section { background: #f8f9fa; padding: 15px; border-radius: 8px; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="header">
        <div class="container">
            <h1>üìß Configuration IA Email - R√®gles M√©tier</h1>
            <p>Gestion intelligente des emails avec r√®gles personnalis√©es par client</p>
        </div>
    </div>

    <div class="container">
        <div class="card">
            <div class="tabs">
                <button class="tab active" onclick="showTab('emails')">üìß Emails Tri√©s</button>
                <button class="tab" onclick="showTab('clients')">üë• Profils Clients</button>
                <button class="tab" onclick="showTab('regles')">‚öôÔ∏è R√®gles M√©tier</button>
                <button class="tab" onclick="showTab('config')">üîß Configuration</button>
            </div>

            <!-- Onglet Emails Tri√©s -->
            <div id="emails" class="tab-content active">
                <h3>üìß Emails Tri√©s par Priorit√© IA</h3>
                
                <div class="config-section">
                    <h4>üö® CRITIQUE (Action imm√©diate)</h4>
                    <div class="email-item email-critique">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong>Ahmed HASSAN</strong> - ahmed.hassan@email.com
                                <p><strong>Sujet:</strong> URGENT - OQTF re√ßue hier</p>
                                <p><strong>IA d√©tecte:</strong> D√©lai 30 jours, proc√©dure OQTF, situation familiale</p>
                            </div>
                            <div>
                                <span class="priority-badge priority-critique">CRITIQUE</span>
                            </div>
                        </div>
                        <div style="margin-top: 10px;">
                            <strong>Actions IA sugg√©r√©es:</strong>
                            <ul>
                                <li>‚úÖ Cr√©er dossier urgent automatiquement</li>
                                <li>üìû Planifier RDV dans 24h</li>
                                <li>üìã Pr√©parer documents recours OQTF</li>
                                <li>üö® Alerter avocat senior imm√©diatement</li>
                            </ul>
                        </div>
                        <button class="btn btn-danger" onclick="traiterEmail('001')">üöÄ Traiter Imm√©diatement</button>
                    </div>
                </div>

                <div class="config-section">
                    <h4>‚ö° URGENT (< 3 jours)</h4>
                    <div class="email-item email-urgent">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong>Maria GONZALEZ</strong> - maria.gonzalez@email.com
                                <p><strong>Sujet:</strong> Convocation pr√©fecture demain</p>
                                <p><strong>IA d√©tecte:</strong> RDV pr√©fecture, documents manquants</p>
                            </div>
                            <div>
                                <span class="priority-badge priority-urgent">URGENT</span>
                            </div>
                        </div>
                        <div style="margin-top: 10px;">
                            <strong>Actions IA sugg√©r√©es:</strong>
                            <ul>
                                <li>üìã V√©rifier documents requis</li>
                                <li>üìû Appeler client avant RDV</li>
                                <li>üìß Envoyer checklist documents</li>
                            </ul>
                        </div>
                        <button class="btn btn-primary" onclick="traiterEmail('002')">üìû Contacter Client</button>
                    </div>
                </div>

                <div class="config-section">
                    <h4>üìã IMPORTANT (< 7 jours)</h4>
                    <div class="email-item email-important">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong>Fatima BENALI</strong> - fatima.benali@email.com
                                <p><strong>Sujet:</strong> Renouvellement carte s√©jour</p>
                                <p><strong>IA d√©tecte:</strong> Renouvellement, d√©lai 2 mois</p>
                            </div>
                            <div>
                                <span class="priority-badge priority-important">IMPORTANT</span>
                            </div>
                        </div>
                        <div style="margin-top: 10px;">
                            <strong>Actions IA sugg√©r√©es:</strong>
                            <ul>
                                <li>üìÖ Planifier RDV dans la semaine</li>
                                <li>üìã Pr√©parer dossier renouvellement</li>
                            </ul>
                        </div>
                        <button class="btn btn-success" onclick="traiterEmail('003')">üìÖ Planifier RDV</button>
                    </div>
                </div>
            </div>

            <!-- Onglet Profils Clients -->
            <div id="clients" class="tab-content">
                <h3>üë• Profils Clients & Situations Particuli√®res</h3>
                
                <button class="btn btn-success" onclick="ajouterClient()">‚ûï Nouveau Client</button>
                
                <div class="client-grid">
                    <div class="client-card">
                        <h4>Ahmed HASSAN</h4>
                        <p><strong>Email:</strong> ahmed.hassan@email.com</p>
                        <p><strong>Proc√©dure:</strong> Recours OQTF</p>
                        <div style="margin: 10px 0;">
                            <strong>Situation particuli√®re:</strong>
                            <ul>
                                <li>‚úÖ Famille en France (2 enfants scolaris√©s)</li>
                                <li>‚úÖ Travail d√©clar√© depuis 3 ans</li>
                                <li>üö® D√©lai critique OQTF</li>
                                <li>‚ö†Ô∏è Probl√®me sant√© (certificat m√©dical)</li>
                            </ul>
                        </div>
                        <div style="margin: 10px 0;">
                            <strong>R√®gles personnalis√©es actives:</strong>
                            <div class="regle-item regle-active">
                                <strong>OQTF_Urgence_Famille</strong>
                                <p>Si email contient "oqtf" + "enfant" ‚Üí Priorit√© CRITIQUE</p>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="modifierClient('hassan')">‚úèÔ∏è Modifier</button>
                    </div>

                    <div class="client-card">
                        <h4>Maria GONZALEZ</h4>
                        <p><strong>Email:</strong> maria.gonzalez@email.com</p>
                        <p><strong>Proc√©dure:</strong> Regroupement familial</p>
                        <div style="margin: 10px 0;">
                            <strong>Situation particuli√®re:</strong>
                            <ul>
                                <li>‚úÖ Conjoint fran√ßais</li>
                                <li>‚úÖ Ressources suffisantes</li>
                                <li>‚ö†Ô∏è Dossier OFII en cours</li>
                            </ul>
                        </div>
                        <div style="margin: 10px 0;">
                            <strong>R√®gles personnalis√©es actives:</strong>
                            <div class="regle-item regle-active">
                                <strong>Regroupement_Suivi</strong>
                                <p>Si email contient "ofii" ‚Üí Priorit√© URGENT</p>
                            </div>
                        </div>
                        <button class="btn btn-primary" onclick="modifierClient('gonzalez')">‚úèÔ∏è Modifier</button>
                    </div>
                </div>
            </div>

            <!-- Onglet R√®gles M√©tier -->
            <div id="regles" class="tab-content">
                <h3>‚öôÔ∏è R√®gles M√©tier Personnalis√©es</h3>
                
                <button class="btn btn-success" onclick="ajouterRegle()">‚ûï Nouvelle R√®gle</button>
                
                <div class="config-section">
                    <h4>üìã R√®gles Globales</h4>
                    
                    <div class="regle-item regle-active">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong>OQTF_Detection_Globale</strong>
                                <p><strong>Conditions:</strong> Email contient "oqtf" OU "expulsion"</p>
                                <p><strong>Actions:</strong> Priorit√© CRITIQUE + Alerte avocat + Cr√©ation dossier urgent</p>
                            </div>
                            <div>
                                <span class="priority-badge priority-critique">CRITIQUE</span>
                                <button class="btn btn-primary" onclick="modifierRegle('oqtf_global')">‚úèÔ∏è</button>
                            </div>
                        </div>
                    </div>

                    <div class="regle-item regle-active">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong>Delai_Court_Detection</strong>
                                <p><strong>Conditions:</strong> Email contient d√©lai < 7 jours</p>
                                <p><strong>Actions:</strong> Priorit√© URGENT + Notification avocat</p>
                            </div>
                            <div>
                                <span class="priority-badge priority-urgent">URGENT</span>
                                <button class="btn btn-primary" onclick="modifierRegle('delai_court')">‚úèÔ∏è</button>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="config-section">
                    <h4>üë§ R√®gles Sp√©cifiques Clients</h4>
                    
                    <div class="regle-item regle-active">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <strong>Ahmed_HASSAN_Famille</strong>
                                <p><strong>Client:</strong> ahmed.hassan@email.com</p>
                                <p><strong>Conditions:</strong> Email contient "enfant" OU "√©cole" OU "famille"</p>
                                <p><strong>Actions:</strong> Priorit√© URGENT + Mention situation familiale</p>
                            </div>
                            <div>
                                <span class="priority-badge priority-urgent">URGENT</span>
                                <button class="btn btn-primary" onclick="modifierRegle('hassan_famille')">‚úèÔ∏è</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Onglet Configuration -->
            <div id="config" class="tab-content">
                <h3>üîß Configuration Syst√®me</h3>
                
                <div class="config-section">
                    <h4>üìß Connexion Email</h4>
                    <div class="form-group">
                        <label>Serveur IMAP:</label>
                        <input type="text" value="imap.gmail.com" placeholder="imap.gmail.com">
                    </div>
                    <div class="form-group">
                        <label>Email:</label>
                        <input type="email" value="cabinet@avocat-dupont.fr" placeholder="votre@email.com">
                    </div>
                    <div class="form-group">
                        <label>Mot de passe application:</label>
                        <input type="password" placeholder="Mot de passe app">
                    </div>
                    <button class="btn btn-success">üîó Tester Connexion</button>
                </div>

                <div class="config-section">
                    <h4>‚öôÔ∏è Param√®tres IA</h4>
                    <div class="form-group">
                        <label>Fr√©quence v√©rification emails:</label>
                        <select>
                            <option value="5">5 minutes</option>
                            <option value="15" selected>15 minutes</option>
                            <option value="30">30 minutes</option>
                            <option value="60">1 heure</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>Seuil urgence (jours):</label>
                        <input type="number" value="7" min="1" max="30">
                    </div>
                    <div class="form-group">
                        <label>Notification avocat:</label>
                        <select>
                            <option value="immediate">Imm√©diate (CRITIQUE)</option>
                            <option value="hourly" selected>Toutes les heures (URGENT)</option>
                            <option value="daily">Quotidienne (IMPORTANT)</option>
                        </select>
                    </div>
                    <button class="btn btn-success">üíæ Sauvegarder</button>
                </div>

                <div class="config-section">
                    <h4>üìä Statistiques</h4>
                    <p><strong>Emails trait√©s aujourd'hui:</strong> 24</p>
                    <p><strong>Urgences d√©tect√©es:</strong> 3</p>
                    <p><strong>Taux pr√©cision IA:</strong> 94%</p>
                    <p><strong>Temps √©conomis√©:</strong> 2h 30min</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function traiterEmail(id) {
            alert(`Traitement email ${id}:\n\n‚úÖ Dossier cr√©√© automatiquement\nüìû RDV planifi√©\nüìß Client notifi√©\nüö® Avocat alert√©\n\nActions IA ex√©cut√©es avec succ√®s !`);
        }

        function ajouterClient() {
            alert(`Nouveau profil client:\n\nüìù Formulaire de cr√©ation\n‚Ä¢ Nom et email\n‚Ä¢ Proc√©dure en cours\n‚Ä¢ Situation particuli√®re\n‚Ä¢ R√®gles personnalis√©es\n\nInterface de cr√©ation ouverte...`);
        }

        function modifierClient(id) {
            alert(`Modification profil ${id}:\n\n‚úèÔ∏è √âdition des param√®tres\n‚Ä¢ Situation mise √† jour\n‚Ä¢ Nouvelles r√®gles\n‚Ä¢ Historique conserv√©\n\nInterface d'√©dition ouverte...`);
        }

        function ajouterRegle() {
            alert(`Nouvelle r√®gle m√©tier:\n\n‚öôÔ∏è Assistant de cr√©ation\n‚Ä¢ Conditions (mots-cl√©s, d√©lais)\n‚Ä¢ Actions automatiques\n‚Ä¢ Niveau de priorit√©\n‚Ä¢ Clients concern√©s\n\nInterface de cr√©ation ouverte...`);
        }

        function modifierRegle(id) {
            alert(`Modification r√®gle ${id}:\n\n‚úèÔ∏è √âdition des param√®tres\n‚Ä¢ Conditions ajust√©es\n‚Ä¢ Actions modifi√©es\n‚Ä¢ Test de la r√®gle\n\nInterface d'√©dition ouverte...`);
        }
    </script>
</body>
</html>